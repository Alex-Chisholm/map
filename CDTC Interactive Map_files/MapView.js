// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/TileInfo":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(c,g,l,f,x,k,u,t,m,a,d,h,q,v,n,e,r,C){var A;g=new g.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});l=A=class extends l.JSONSupport{static create(b={}){const {resolutionFactor:w=1,scales:p,size:B=256,spatialReference:y=q.WebMercator,numLODs:F=24}=b;if(!n.isValid(y)){b=[];if(p)for(var H=0;H<p.length;H++){var J=
p[H];b.push(new r({level:H,scale:J,resolution:J}))}else for(H=5E-4,J=F-1;0<=J;J--)b.unshift(new r({level:J,scale:H,resolution:H})),H*=2;return new A({dpi:96,lods:b,origin:new h(0,0,y),size:[B,B],spatialReference:y})}H=n.getInfo(y);b=b.origin?new h({x:b.origin.x,y:b.origin.y,spatialReference:y}):H?new h({x:H.origin[0],y:H.origin[1],spatialReference:y}):new h({x:0,y:0,spatialReference:y});H=1/(39.37*f.getMetersPerUnitForSR(y)*96);J=[];if(p)for(var Q=0;Q<p.length;Q++){var X=p[Q];J.push(new r({level:Q,
scale:X,resolution:X*H}))}else{var Y=n.isGeographic(y)?512/B*5.916575275917094E8:256/B*5.91657527591555E8;Q=Math.ceil(F/w);J.push(new r({level:0,scale:Y,resolution:Y*H}));for(X=1;X<Q;X++)Y/=2**w,J.push(new r({level:X,scale:Y,resolution:Y*H}))}return new A({dpi:96,lods:J,origin:b,size:[B,B],spatialReference:y})}constructor(b){super(b);this.dpi=96;this.spatialReference=this.size=this.origin=this.format=null}get isWrappable(){const {spatialReference:b,origin:w}=this;if(b&&w){const p=n.getInfo(b);return b.isWrappable&&
!!p&&Math.abs(p.origin[0]-w.x)<=p.dx}return!1}readOrigin(b,w){return h.fromJSON({spatialReference:w.spatialReference,...b})}set lods(b){const w=[],p=this._levelToLOD={};b&&b.forEach(B=>{w.push(B.scale);p[B.level]=B});this._set("scales",w);this._set("lods",b);this._initializeUpsampleLevels()}readSize(b,w){return[w.cols,w.rows]}writeSize(b,w){w.cols=b[0];w.rows=b[1]}zoomToScale(b){const w=this.scales;if(0>=b)return w[0];if(b>=w.length-1)return w[w.length-1];const p=Math.floor(b);return w[p]/(w[p]/w[p+
1])**(b-p)}scaleToZoom(b){const w=this.scales,p=w.length-1;let B=0;for(;B<p;B++){const y=w[B],F=w[B+1];if(y<=b)break;if(F===b)return B+1;if(y>b&&F<b)return B+Math.log(y/b)/Math.log(y/F)}return B}snapScale(b,w=.95){b=this.scaleToZoom(b);return b%Math.floor(b)>=w?this.zoomToScale(Math.ceil(b)):this.zoomToScale(Math.floor(b))}tileAt(b,w,p,B){var y=this.lodAt(b);if(!y)return null;let F;if("number"===typeof w)F=w,w=p;else{if(n.equals(w.spatialReference,this.spatialReference))F=w.x,w=w.y;else{B=e.project(w,
this.spatialReference);if(null==B)return null;F=B.x;w=B.y}B=p}p=y.resolution*this.size[0];y=y.resolution*this.size[1];B||=new C.TileKey(null,0,0,0,v.create());B.level=b;B.row=Math.floor((this.origin.y-w)/y+.001);B.col=Math.floor((F-this.origin.x)/p+.001);this.updateTileInfo(B);return B}updateTileInfo(b,w=A.ExtrapolateOptions.NONE){var p=this.lodAt(b.level);p||w!==A.ExtrapolateOptions.POWER_OF_TWO||(w=this.lods[this.lods.length-1],w.level<b.level&&(p=w));if(p){var B=b.level-p.level;w=p.resolution*
this.size[0]/2**B;p=p.resolution*this.size[1]/2**B;b.id=`${b.level}/${b.row}/${b.col}`;b.extent||(b.extent=v.create());b.extent[0]=this.origin.x+b.col*w;b.extent[1]=this.origin.y-(b.row+1)*p;b.extent[2]=b.extent[0]+w;b.extent[3]=b.extent[1]+p}}upsampleTile(b){const w=this._upsampleLevels[b.level];if(!w||-1===w.parentLevel)return!1;b.level=w.parentLevel;b.row=Math.floor(b.row/w.factor+.001);b.col=Math.floor(b.col/w.factor+.001);this.updateTileInfo(b);return!0}getTileBounds(b,w){var p=this.lodAt(w.level);
if(null==p)return null;var {resolution:B}=p;p=B*this.size[0];B*=this.size[1];b[0]=this.origin.x+w.col*p;b[1]=this.origin.y-(w.row+1)*B;b[2]=b[0]+p;b[3]=b[1]+B;return b}lodAt(b){return this._levelToLOD?.[b]??null}clone(){return A.fromJSON(this.write({}))}getOrCreateCompatible(b,w){if(256===this.size[0]&&256===this.size[1])return 256===b?this:null;const p=[],B=this.lods.length;for(let y=0;y<B;y++){const F=this.lods[y];p.push(new r({level:F.level,scale:F.scale,resolution:F.resolution*w}))}return new A({size:[b,
b],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:p})}_initializeUpsampleLevels(){const b=this.lods;this._upsampleLevels=[];let w=null;for(let p=0;p<b.length;p++){const B=b[p];this._upsampleLevels[B.level]={parentLevel:w?w.level:-1,factor:w?w.resolution/B.resolution:0};w=B}}};c.__decorate([x.property({type:Number,json:{write:!0}})],l.prototype,"compressionQuality",void 0);c.__decorate([x.property({type:Number,
json:{write:!0}})],l.prototype,"dpi",void 0);c.__decorate([x.property({type:String,json:{read:g.read,write:g.write,origins:{"web-scene":{read:!1,write:!1}}}})],l.prototype,"format",void 0);c.__decorate([x.property({readOnly:!0})],l.prototype,"isWrappable",null);c.__decorate([x.property({type:h,json:{write:!0}})],l.prototype,"origin",void 0);c.__decorate([m.reader("origin")],l.prototype,"readOrigin",null);c.__decorate([x.property({type:[r],value:null,json:{write:!0}})],l.prototype,"lods",null);c.__decorate([x.property({readOnly:!0})],
l.prototype,"scales",void 0);c.__decorate([x.property({cast:b=>Array.isArray(b)?b:"number"===typeof b?[b,b]:[256,256]})],l.prototype,"size",void 0);c.__decorate([m.reader("size",["rows","cols"])],l.prototype,"readSize",null);c.__decorate([d.writer("size",{cols:{type:k.Integer},rows:{type:k.Integer}})],l.prototype,"writeSize",null);c.__decorate([x.property({type:q,json:{write:!0}})],l.prototype,"spatialReference",void 0);l=A=c.__decorate([a.subclass("esri.layers.support.TileInfo")],l);(function(b){b=
b.ExtrapolateOptions||(b.ExtrapolateOptions={});b[b.NONE=0]="NONE";b[b.POWER_OF_TWO=1]="POWER_OF_TWO"})(l||={});return l})},"esri/layers/support/LOD":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(c,g,l,f,x,k,u){var t;g=t=class extends g.JSONSupport{constructor(m){super(m);this.cols=null;this.level=
0;this.origin=this.levelValue=null;this.resolution=0;this.rows=null;this.scale=0}clone(){return new t({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};c.__decorate([l.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],g.prototype,"cols",void 0);c.__decorate([l.property({type:f.Integer,json:{write:!0}})],g.prototype,"level",void 0);c.__decorate([l.property({type:String,json:{write:!0}})],
g.prototype,"levelValue",void 0);c.__decorate([l.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],g.prototype,"origin",void 0);c.__decorate([l.property({type:Number,json:{write:!0}})],g.prototype,"resolution",void 0);c.__decorate([l.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],g.prototype,"rows",void 0);c.__decorate([l.property({type:Number,json:{write:!0}})],g.prototype,"scale",void 0);
return g=t=c.__decorate([u.subclass("esri.layers.support.LOD")],g)})},"esri/layers/support/TileKey":function(){define(["exports"],function(c){class g{constructor(l,f,x,k,u){this.id=l;this.level=f;this.row=x;this.col=k;this.extent=u}}c.TileKey=g;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/BreakpointsOwner":function(){define("exports ../chunks/tslib.es6 ../core/ArrayPool ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,l,f,x,k,u,t,m){function a(q,v){return v?d[q].valueToClassName[v].split(" "):[]}const d={widthBreakpoint:{getValue(q){const v=q.viewSize[0];q=q.breakpoints;const n=this.values;return v<=q.xsmall?n.xsmall:v<=q.small?n.small:v<=q.medium?n.medium:v<=q.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(q){const v=q.viewSize[1];q=q.breakpoints;const n=this.values;return v<=q.xsmall?n.xsmall:v<=q.small?n.small:v<=q.medium?n.medium:v<=q.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(q){q=q.viewSize;const v=this.values;return q[1]>=q[0]?v.portrait:v.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},h={xsmall:544,small:768,medium:992,large:1200};c.BreakpointsOwner=
q=>{q=class extends q{constructor(...v){super(...v);this.heightBreakpoint=this.widthBreakpoint=this.orientation=null;this.breakpoints=h}initialize(){this.addHandles(f.watch(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),f.initial))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(v){var n=this._get("breakpoints");if(v!==n){n=(n=v)&&n.xsmall<n.small&&n.small<n.medium&&n.medium<n.large;if(!n){const e=JSON.stringify(h,null,2);console.warn("provided breakpoints are not valid, using defaults:"+
e)}v=n?v:h;this._set("breakpoints",{...v})}}_updateClassNames(){if(this.container){var v=l.acquire(),n=l.acquire(),e=!1,r;for(r in d){const C=this[r],A=d[r].getValue({viewSize:this.size,breakpoints:this.breakpoints});C!==A&&(e=!0,this[r]=A,a(r,C).forEach(b=>n.push(b)),a(r,A).forEach(b=>v.push(b)))}e&&(this._applyClassNameChanges(v,n),l.release(v),l.release(n))}}_applyClassNameChanges(v,n){const e=this.container;e&&(n.forEach(r=>e.classList.remove(r)),v.forEach(r=>e.classList.add(r)))}_removeActiveClassNames(){const v=
this.container;if(v)for(var n in d)a(n,this[n]).forEach(e=>v.classList.remove(e))}};g.__decorate([x.property()],q.prototype,"breakpoints",null);g.__decorate([x.property()],q.prototype,"orientation",void 0);g.__decorate([x.property()],q.prototype,"widthBreakpoint",void 0);g.__decorate([x.property()],q.prototype,"heightBreakpoint",void 0);return q=g.__decorate([m.subclass("esri.views.BreakpointsOwner")],q)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/DOMContainer":function(){define("exports ../chunks/tslib.es6 ../intl ../core/domUtils ../core/events ../core/has ../core/Logger ../core/maybe ../core/reactiveUtils ../core/scheduling ../core/accessorSupport/decorators/property ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay ../intl/locale ../intl/messages".split(" "),
function(c,g,l,f,x,k,u,t,m,a,d,h,q,v,n,e){function r(A){A&&(f.empty(A),A.parentNode&&A.parentNode.removeChild(A))}const C=[0,0];c.DOMContainer=A=>{A=class extends A{constructor(...b){super(...b);this._freqInfo={freq:16,time:750};this._overlayRenderTaskHandle=null;this.height=0;this.position=this.overlay=this.messagesCommon=null;this.resizing=!1;this.surface=this.root=null;this.suspended=!0;this.userContent=this.ui=null;this.width=0;this.widthBreakpoint=null;this.addHandles([m.watch(()=>this.cursor,
w=>{const {surface:p}=this;p&&p.setAttribute("data-cursor",w)}),m.watch(()=>this.navigating,w=>{const {surface:p}=this;p&&p.setAttribute("data-navigating",w.toString())})])}initialize(){const b=k("mac"),w=async()=>{b&&(await m.whenOnce(()=>this.ready),this.messagesCommon=await e.fetchMessageBundle("esri/t9n/common").catch(()=>{}))};w();this.addHandles([m.watch(()=>this.ui,(p,B)=>this._handleUIChange(p,B),m.initial),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused")),
n.onLocaleChange(w),m.watch(()=>[this.surface,this.messagesCommon],()=>{b&&this.surface?.setAttribute("aria-label",this.messagesCommon?.ariaLabels?.navigationMacVoiceOver??"")})])}destroy(){this.destroyed||(this.ui=t.destroyMaybe(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(b){var w=this._get("container");const p=f.byId(b);p||"string"!==typeof b||u.getLogger(this).error("#container",`element with id '${b}' not found`);if(w!==p)if(this._stopMeasuring(),
w&&(w.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(r(this.root),this._set("root",null)),this.userContent&&(f.reparent(this.userContent,w),r(this.userContent),this._set("userContent",null))),p){p.classList.add("esri-view");b=document.createElement("div");b.className="esri-view-user-storage";f.reparent(p,b);p.appendChild(b);this._set("userContent",
b);b=document.createElement("div");b.className="esri-view-root";p.insertBefore(b,p.firstChild);this._set("root",b);w=document.createElement("div");w.className="esri-view-surface";w.setAttribute("role","application");w.tabIndex=0;b.appendChild(w);this._set("surface",w);var B=new v;b.appendChild(B.surface);this._set("overlay",B);this.addHandles(m.watch(()=>B.needsRender,y=>{this._overlayRenderTaskHandle=y&&!this._overlayRenderTaskHandle?a.addFrameTask({render:()=>this.overlay?.render()}):t.removeMaybe(this._overlayRenderTaskHandle)}));
this.forceDOMReadyCycle();this._set("container",p);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const b=document.activeElement===this.surface;return document.hasFocus()&&b}get size(){return[this.width,this.height]}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(b,w,p){const B=this.position;b-=B?B[0]:0;w-=B?B[1]:0;p?(p[0]=b,p[1]=
w):p=[b,w];return p}containerToPage(b,w,p){const B=this.position;b+=B?B[0]:0;w+=B?B[1]:0;p?(p[0]=b,p[1]=w):p=[b,w];return p}_handleUIChange(b,w){this.removeHandles("ui");w&&w!==b&&w.destroy();b&&(b.view=this,this.addHandles(m.watch(()=>this.root,p=>{if(p){const B=document.createElement("div");p.appendChild(B);p=B}else p=null;b.container=p},m.initial),"ui"));this._set("ui",b)}_stopMeasuring(){this.removeHandles("measuring");this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const b=
this._freqInfo;b.freq=16;b.time=750;this.addHandles([x.on(window,"resize",()=>{b.freq=16;b.time=750}),a.addFrameTask({prepare:w=>{const p=this._measure(),B=this._freqInfo;B.time+=w.deltaTime;p&&(B.freq=16,this._get("resizing")||this._set("resizing",!0));B.time<B.freq||(B.time=0,this._position()||p?B.freq=16:B.freq=Math.min(750,2*B.freq),!p&&512<=B.freq&&this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();this._position()}_measure(){var b=this.container;const w=b?b.clientWidth:
0;b=b?b.clientHeight:0;if(0===w||0===b)return this.suspended||this._set("suspended",!0),!1;const p=this.width,B=this.height;if(w===p&&b===B)return this.suspended&&this._set("suspended",!1),!1;this._set("width",w);this._set("height",b);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:p,oldHeight:B,width:w,height:b});return!0}_position(){var b=this.container;const w=this.position;var p;if(p=b)p=(b.ownerDocument||window.document).defaultView,b=b.getBoundingClientRect(),C[0]=b.left+
(p?.pageXOffset??0),C[1]=b.top+(p?.pageYOffset??0),p=C;b=p;return b?w&&b[0]===w[0]&&b[1]===w[1]?!1:(this._set("position",[b[0],b[1]]),!0):!1}forceDOMReadyCycle(){}};g.__decorate([d.property()],A.prototype,"container",null);g.__decorate([d.property({readOnly:!0})],A.prototype,"focused",null);g.__decorate([d.property({readOnly:!0})],A.prototype,"height",void 0);g.__decorate([d.property()],A.prototype,"messagesCommon",void 0);g.__decorate([d.property({type:v})],A.prototype,"overlay",void 0);g.__decorate([d.property({readOnly:!0})],
A.prototype,"position",void 0);g.__decorate([d.property({readOnly:!0})],A.prototype,"resizing",void 0);g.__decorate([d.property({readOnly:!0})],A.prototype,"root",void 0);g.__decorate([d.property({value:null,readOnly:!0})],A.prototype,"size",null);g.__decorate([d.property({readOnly:!0})],A.prototype,"surface",void 0);g.__decorate([d.property({readOnly:!0})],A.prototype,"suspended",void 0);g.__decorate([d.property()],A.prototype,"ui",void 0);g.__decorate([d.property({readOnly:!0})],A.prototype,"userContent",
void 0);g.__decorate([d.property({readOnly:!0})],A.prototype,"width",void 0);g.__decorate([d.property()],A.prototype,"widthBreakpoint",void 0);return A=g.__decorate([q.subclass("esri.views.DOMContainer")],A)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/support/UpdatingHandles ../../libs/maquette/projection ../../libs/maquette/projector".split(" "),
function(c,g,l,f,x,k,u,t,m,a,d){g=class extends g{constructor(){super(...arguments);this.items=new l;this._watchUpdatingTracking=new m.UpdatingHandles;this._callbacks=new Map;this._projector=d.createProjector();this._hiddenProjector=d.createProjector()}get needsRender(){return 0<this.items.length}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const h=document.createElement("div");h.className="esri-overlay-surface";this._set("surface",h);this._hiddenSurface=document.createElement("div");
this._hiddenSurface.setAttribute("style","visibility: hidden;");h.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,q=>{for(const v of q.added){const n=()=>v.render();this._callbacks.set(v,n);this._projector.append(this.surface,n)}for(const v of q.removed)q=this._projector.detach(this._callbacks.get(v)),this.surface.removeChild(q.domNode),this._callbacks.delete(v)})}addItem(h){this.items.add(h)}removeItem(h){this.items.remove(h)}destroy(){this.items.removeAll();
this._callbacks.forEach(h=>this._projector.detach(h));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(h){const q=this._hiddenSurface,v=this._hiddenProjector;let n;const e=()=>n=h.render();v.append(q,e);v.renderNow();const r={left:0,top:0,right:0,bottom:0};if(n?.domNode){const C=n.domNode.getBoundingClientRect();r.left=C.left;r.top=C.top;r.right=C.right;r.bottom=C.bottom}for(v.detach(e);q.firstChild;)q.removeChild(q.firstChild);
return r}overlaps(h,q){h=this.computeBoundingRect(h);q=this.computeBoundingRect(q);return Math.max(h.left,q.left)<=Math.min(h.right,q.right)&&Math.max(h.top,q.top)<=Math.min(h.bottom,q.bottom)}get hasVisibleItems(){return this.items.some(h=>h.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(h,q){const v=!!q?.disableDecorations;if(this.items.some(e=>e.visible&&!(v&&e.isDecoration))){var n=h.getContext("2d");n.save();n.font=this._fontString();this.items.forEach(e=>
{v&&e.isDecoration||(n.save(),e.renderCanvas(n),n.restore())});n.restore()}}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};c.__decorate([f.property({readOnly:!0})],g.prototype,"surface",void 0);c.__decorate([f.property({readOnly:!0})],g.prototype,"items",void 0);c.__decorate([f.property({readOnly:!0})],g.prototype,"needsRender",null);c.__decorate([f.property({readOnly:!0})],g.prototype,"_watchUpdatingTracking",void 0);c.__decorate([f.property({readOnly:!0})],g.prototype,
"updating",null);return g=c.__decorate([t.subclass("esri.views.overlay.ViewOverlay")],g)})},"esri/views/PopupView":function(){define("require exports ../chunks/tslib.es6 ../core/asyncUtils ../core/deprecate ../core/Error ../core/has ../core/Logger ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./input/InputManager".split(" "),function(c,g,l,f,x,k,u,t,m,a,d,h,q,v){function n(A){return null!=A&&"open"in
A&&"declaredClass"in A}function e(A){return null!=A&&"declaredClass"in A&&"dockOptions"in A}const r=A=>Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"}));class C{constructor(A){this.layerView=A;this._resolver=m.createResolver();this.graphics=[]}get promise(){return this._resolver.promise}resolve(A){const {layerView:b,graphics:w,_resolver:p}=this;if(!b)return p.resolve(w),p.promise;let B;b.fetchPopupFeaturesFromGraphics(w,A).catch(y=>{B=y;return null}).then(y=>
{y?p.resolve(y):p.reject(B)});return p.promise}}g.PopupView=A=>{A=class extends A{constructor(){super(...arguments);this._popupSetupTask=null;this.popup={};this.popupEnabled=!0}initialize(){this.addHandles([a.watch(()=>[this.ui,this.popup],([b,w],p)=>{if(p){const [B,y]=p;B&&n(y)&&(y.view=null,e(y)&&B.remove(y,"popup"))}b&&n(w)&&(w.view=this,e(w)&&b.add(w,{key:"popup",position:"manual",internal:!0}))},a.initial),this.on("click",b=>{this.popup&&this.popupEnabled&&("mouse"!==b.pointerType||0===b.button)&&
(!n(this.popup)&&"autoOpenEnabled"in this.popup&&!1===this.popup.autoOpenEnabled||(n(this.popup)?this.popup.viewModel.handleViewClick(b):b.async(async()=>{await this.setupPopup();n(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(b)})))},v.ViewEventPriorities.WIDGET)]);a.whenOnce(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{new Promise((b,w)=>c(["../widgets/Popup"],p=>b(r(p)),w))})}destroy(){this.destroyed||this.closePopup()}async openPopup(b){if(n(this.popup))return this.popup.open(b);
try{await this.setupPopup(),this.popup?this.popup.open(b):t.getLogger(this).error(new k("view:null-popup","Popup is null and can't be opened"))}catch{}}closePopup(){this._popupSetupTask?.abort();n(this.popup)&&this.popup.close()}async fetchPopupFeatures(b,w){await this.when();return this._popupHitsToFeatures(await this._getPopupHits(b,w),w)}async setupPopup(){this._popupSetupTask?.abort();if(this.popup&&!n(this.popup))return this._popupSetupTask=f.createTask(async b=>{const {default:w}=await new Promise((p,
B)=>c(["../widgets/Popup"],y=>p(r(y)),B));m.throwIfAborted(b);this.popup&&!n(this.popup)&&(b=this.popup,delete b.open,delete b.close,this.popup=new w(b))}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:b,hits:w},p){const B=[],y=[];let F=!1;const H=m.wrapAbortWithTimeout(p,u("popup-view-fetch-timeout")??5E3);p=J=>{const Q=y.at(-1);Q&&Q.layerView===J&&!F?J=Q:(J=new C(J),y.push(J),B.push(J.promise));return J};for(const J of w)"graphic"in J?(p(J.layerView).graphics.push(J.graphic),
F=!1):(B.push(J.layerView.fetchPopupFeaturesAtLocation(J.mapPoint,H)),F=!0);y.map(J=>J.resolve(H));w=m.allSettledValues(B).then(J=>J.filter(Q=>!!Q).flat());return{pendingFeatures:B,allGraphicsPromise:w,location:b}}async _getPopupHits(b,w){const {hits:p,location:B}=await this.popupHitTest(b);m.throwIfAborted(w);b=[];for(const y of p)if("graphic"in y){if(this._isValidPopupGraphic(y.graphic,w)){const F=this._isValidPopupGraphicsLayerView(y.layerView)?y.layerView:void 0;b.push({graphic:y.graphic,layerView:F})}}else this._isValidPopupLocationLayerView(y.layerView)&&
b.push({mapPoint:y.mapPoint,layerView:y.layerView});return{hits:b,location:B}}_isValidPopupGraphic(b,w){return b&&!!b.getEffectivePopupTemplate(null!=w&&w.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(b){return!b||(!("layer"in b)||!b.suspended)&&"fetchPopupFeaturesFromGraphics"in b}_isValidPopupLocationLayerView(b){return(!("layer"in b)||!b.suspended)&&"fetchPopupFeaturesAtLocation"in b}};l.__decorate([d.property({cast(b){if(!b||n(b))return b;"object"===typeof b&&(b.open=w=>{x.deprecated(t.getLogger(this),
"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"});return this.openPopup(w)},b.close=()=>{x.deprecated(t.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"});return this.closePopup()});return b}})],A.prototype,"popup",void 0);l.__decorate([d.property()],
A.prototype,"popupEnabled",void 0);return A=l.__decorate([q.subclass("esri.views.PopupView")],A)};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/AnimationManager":function(){define("../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/Accessor ../../core/maybe ../../core/scheduling ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../ViewAnimation ./unitBezier ./viewpointUtils ../../geometry/Point".split(" "),
function(c,g,l,f,x,k,u,t,m,a,d,h,q,v,n){class e{constructor(r,C,A,b){const w=r.targetGeometry,p=C.targetGeometry;b?"string"===typeof b&&(b=q.parse(b)||q.easingFunctions.ease):b=q.easingFunctions.ease;this.easing=b;this.duration=A;this.sCenterX=w.x;this.sCenterY=w.y;this.sScale=r.scale;this.sRotation=r.rotation;this.tCenterX=p.x;this.tCenterY=p.y;this.tScale=C.scale;this.tRotation=C.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-
this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}applyRatio(r,C){var A=this.easing(C);let b,w;1<=C?(C=this.tCenterX,b=this.tCenterY,w=this.tRotation,A=this.tScale):(C=this.sCenterX+A*this.dCenterX,b=this.sCenterY+A*this.dCenterY,w=this.sRotation+A*this.dRotation,A=this.sScale+A*this.dScale);r.targetGeometry.x=C;r.targetGeometry.y=b;r.scale=A;r.rotation=w}}g=class extends f{constructor(r){super(r);this.updateFunction=
this._animation=null;this.duration=200;this.transition=null;this.easing=q.easingFunctions.ease;this.view=null;this.viewpoint=new l({targetGeometry:new n,scale:0,rotation:0});this._updateTask=k.addFrameTask({postRender:this._postRender.bind(this)});this._updateTask.pause()}destroy(){this._updateTask=x.removeMaybe(this._updateTask)}get animation(){return this._animation}set animation(r){this._animation=r;this.view&&(this.view.animation=r)}animate(r,C,A){this.stop();v.copy(this.viewpoint,C);this.transition=
new e(this.viewpoint,r.target,A?.duration||this.duration,A?.easing||this.easing);C=()=>{this.animation===r&&this._updateTask&&("finished"===r.state&&(this.transition?.applyRatio(this.viewpoint,1),this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.updateFunction=this.animation=null)};r.when(C,C);this._startTime=performance.now();this._updateTask.resume();return this.animation=r}animateContinous(r,C){this.stop();this.updateFunction=C;this.viewpoint=r;const A=new h({target:r.clone()});
r=()=>{this.animation===A&&this._updateTask&&(this.updateFunction=this.animation=null)};A.when(r,r);this._startTime=performance.now();this._updateTask.resume();return this.animation=A}stop(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)}_postRender(r){var C=this.animation;if(C&&C.state!==h.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,r.deltaTime);else{r=this.transition;C=(performance.now()-this._startTime)/r.duration;const A=1<=C;r.applyRatio(this.viewpoint,
C);A&&this.animation?.finish()}this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};c.__decorate([u.property()],g.prototype,"duration",void 0);c.__decorate([u.property()],g.prototype,"transition",void 0);c.__decorate([u.property()],g.prototype,"easing",void 0);c.__decorate([u.property()],g.prototype,"view",void 0);c.__decorate([u.property()],g.prototype,"viewpoint",void 0);return g=c.__decorate([d.subclass("esri.views.2d.AnimationManager")],g)})},"esri/views/2d/unitBezier":function(){define(["exports"],
function(c){function g(x,k,u,t){function m(e,r){var C;let A,b;A=e;for(C=0;8>C;C++){b=((h*A+d)*A+a)*A-e;if(Math.abs(b)<r)return A;var w=(3*h*A+2*d)*A+a;if(1E-6>Math.abs(w))break;A-=b/w}w=0;C=1;A=e;if(A<w)return w;if(A>C)return C;for(;w<C;){b=((h*A+d)*A+a)*A;if(Math.abs(b-e)<r)break;e>b?w=A:C=A;A=.5*(C-w)+w}return A}const a=3*x,d=3*(u-x)-a,h=1-a-d,q=3*k,v=3*(t-k)-q,n=1-q-v;return function(e,r=1E-6){e=m(e,r);return((n*e+v)*e+q)*e}}const l=/^cubic-bezier\((.*)\)/,f={};f.ease=g(.25,.1,.25,1);f.linear=
g(0,0,1,1);f.easeIn=f["ease-in"]=g(.42,0,1,1);f.easeOut=f["ease-out"]=g(0,0,.58,1);f.easeInOut=f["ease-in-out"]=g(.42,0,.58,1);c.easingFunctions=f;c.parse=function(x){let k=f[x]||null;!k&&(x=l.exec(x))&&(x=x[1].split(",").map(u=>parseFloat(u.trim())),4!==x.length||x.some(u=>isNaN(u))||(k=g.apply(g,x)));return k};c.unitBezier=g;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/viewpointUtils":function(){define("exports ../../Viewpoint ../../core/Collection ../../core/mathUtils ../../core/unitUtils ../../core/libs/gl-matrix-2/math/common ../../core/libs/gl-matrix-2/math/mat2d ../../core/libs/gl-matrix-2/factories/mat2df64 ../../core/libs/gl-matrix-2/math/vec2 ../../core/libs/gl-matrix-2/factories/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/projection ../../geometry/SpatialReference ../../geometry/support/normalizeUtils ../../geometry/support/spatialReferenceUtils".split(" "),
function(c,g,l,f,x,k,u,t,m,a,d,h,q,v,n,e,r){function C(D,N){return N.type?m.set(D,N.x,N.y):m.copy(D,N)}function A(D,N,K=0){var P=D.width,R=D.height;0!==K&&(P=f.deg2rad(K),K=Math.abs(Math.cos(P)),R=Math.abs(Math.sin(P)),P=D.width*K+D.height*R,R=D.width*R+D.height*K);return Math.max(P/Math.max(1,N[0]),R/Math.max(1,N[1]))*H(D.spatialReference)}async function b(D,N,K,P){if(!D||Array.isArray(D)&&!D.length)return null;l.isCollection(D)&&(D=D.toArray());if(Array.isArray(D)&&D.length&&"object"===typeof D[0]){var R=
D.every(S=>"attributes"in S);var Z=D.some(S=>!S.geometry),fa=D;if(R&&Z&&N&&N.allLayerViews){R=new Map;for(var ja of D)D=ja.layer,Z=R.get(D)||[],fa=ja.attributes[D.objectIdField],null!=fa&&Z.push(fa),R.set(D,Z);const S=[];R.forEach((ca,ha)=>{const ma=N.allLayerViews.find(ka=>ka.layer.id===ha.id);if(ma&&"queryFeatures"in ma){const ka=ha.createQuery();ka.objectIds=ca;ka.returnGeometry=!0;S.push(ma.queryFeatures(ka))}});ja=await Promise.all(S);D=[];for(var ia of ja)if(ia&&ia.features&&ia.features.length)for(var O of ia.features)null!=
O.geometry&&D.push(O.geometry);fa=D}for(const S of fa)P=await b(S,N,K,P);return P}if(Array.isArray(D)&&2===D.length&&"number"===typeof D[0]&&"number"===typeof D[1])R=new q(D);else if(D instanceof h)R=D;else if("geometry"in D)if(D.geometry)R=D.geometry;else if(D.layer){const S=D.layer;(ia=N.allLayerViews.find(ca=>ca.layer.id===S.id))&&"queryFeatures"in ia&&(O=S.createQuery(),O.objectIds=[D.attributes[S.objectIdField]],O.returnGeometry=!0,R=(await ia.queryFeatures(O))?.features?.[0]?.geometry)}if(null==
R)return null;switch(R.type){case "point":ia=new d({xmin:R.x,ymin:R.y,xmax:R.x,ymax:R.y,spatialReference:R.spatialReference});break;case "extent":case "multipoint":case "polygon":case "polyline":ia=e.getDenormalizedExtent(R);break;default:ia=R.extent}if(!ia)return null;v.isLoaded()||v.canProjectWithoutEngine(ia.spatialReference,K)||await v.load();K=v.project(ia,K);return K?P=P?P.union(K):K:null}function w(D){if(D&&(!Array.isArray(D)||"number"!==typeof D[0])&&("object"===typeof D||Array.isArray(D)&&
"object"===typeof D[0])){if("layer"in D&&null!=D.layer?.minScale&&null!=D.layer.maxScale){var N=D.layer;return{min:N.minScale,max:N.maxScale}}if(Array.isArray(D)&&D.length&&D.every(K=>"layer"in K)){let K=N=0;for(const P of D)D=P.layer,D?.minScale&&D.maxScale&&(N=D.minScale<N?D.minScale:N,K=D.maxScale>K?D.maxScale:K);return N&&K?{min:N,max:K}:null}}}function p(D,N){return r.equals(D.wkid?D:D.spatialReference||n.WGS84,N)?D:v.project(D,N)}function B(D,N){const K=D.targetGeometry,P=N.targetGeometry;K.x=
P.x;K.y=P.y;K.spatialReference=P.spatialReference;D.scale=N.scale;D.rotation=N.rotation;return D}function y(D,N,K){return K?m.set(D,.5*(N[0]-K.right+K.left),.5*(N[1]-K.bottom+K.top)):m.scale(D,N,.5)}function F(D){var N=D.scale;D=D.targetGeometry;D=null!=D&&r.isValid(D.spatialReference)?1/(39.37*x.getMetersPerUnitForSR(D.spatialReference)*96):1;return N*D}function H(D){return r.isValid(D)?39.37*x.getMetersPerUnitForSR(D)*96:1}function J(D){return(D=r.getInfo(D))?D.valid[1]-D.valid[0]:0}const Q=180/
Math.PI,X=function(){const D=a.create();return function(N,K,P){const R=K.targetGeometry;C(D,R);K=.5*F(K);N.xmin=D[0]-K*P[0];N.ymin=D[1]-K*P[1];N.xmax=D[0]+K*P[0];N.ymax=D[1]+K*P[1];N.spatialReference=R.spatialReference;return N}}(),Y=function(){const D=a.create();return function(N,K,P){return m.sub(N,m.scale(N,K,.5),y(D,K,P))}}(),V=function(){const D=t.create(),N=a.create();return function(K,P,R,Z){const fa=F(P);P=k.toRadian(P.rotation)||0;m.set(N,fa,fa);u.fromScaling(D,N);u.rotate(D,D,P);u.translate(D,
D,Y(N,R,Z));u.translate(D,D,[0,Z.top-Z.bottom]);return m.set(K,D[4],D[5])}}(),ba=function(){const D=a.create(),N=a.create(),K=a.create();return function(P,R,Z,fa,ja,ia){m.negate(D,R);m.scale(N,Z,.5*ia);m.set(K,1/fa*ia,-1/fa*ia);u.fromTranslation(P,N);ja&&u.rotate(P,P,ja);u.scale(P,P,K);u.translate(P,P,D);return P}}(),da=function(){const D=a.create();return function(N,K,P,R){const Z=F(K),fa=k.toRadian(K.rotation)||0;C(D,K.targetGeometry);return ba(N,D,P,Z,fa,R)}}(),z=function(){const D=a.create();
return function(N,K,P,R){const Z=F(K);C(D,K.targetGeometry);return ba(N,D,P,Z,0,R)}}(),E=function(){const D=a.create(),N=a.create(),K=[0,0,0];return function(P,R,Z){m.subtract(D,P,R);m.normalize(D,D);m.subtract(N,P,Z);m.normalize(N,N);m.cross(K,D,N);P=Math.acos(m.dot(D,N)/(m.length(D)*m.length(N)))*Q;0>K[2]&&(P=-P);isNaN(P)&&(P=0);return P}}(),L=function(){const D=a.create();return function(N,K,P,R){const Z=N.targetGeometry;B(N,K);V(D,K,P,R);Z.x+=D[0];Z.y+=D[1];return N}}(),U=function(){return function(D,
N,K){B(D,N);N=D.targetGeometry;N.x=K.x;N.y=K.y;N.spatialReference=K.spatialReference;return D}}(),G=function(){const D=a.create();return function(N,K,P,R,Z){Z||="center";m.sub(D,P,R);m.scale(D,D,.5);P=D[0];R=D[1];switch(Z){case "center":m.set(D,0,0);break;case "left":m.set(D,-P,0);break;case "top":m.set(D,0,R);break;case "right":m.set(D,P,0);break;case "bottom":m.set(D,0,-R);break;case "top-left":m.set(D,-P,R);break;case "bottom-left":m.set(D,-P,-R);break;case "top-right":m.set(D,P,R);break;case "bottom-right":m.set(D,
P,-R)}ea(N,K,D);return N}}(),I=function(){const D=a.create();return function(N,K,P,R,Z){B(N,K);isNaN(P)||0===P||(W(D,R,K,Z),N.scale=K.scale*P,aa(D,D,N,Z),ea(N,N,m.set(D,D[0]-R[0],R[1]-D[1])));return N}}(),M=function(){const D=a.create();return function(N,K,P,R,Z,fa){B(N,K);isNaN(P)||0===P||(W(D,Z,K,fa),N.scale=K.scale*P,N.rotation+=R,aa(D,D,N,fa),ea(N,N,m.set(D,D[0]-Z[0],Z[1]-D[1])));return N}}(),T=function(){const D=a.create(),N=a.create();return function(K,P,R,Z,fa,ja,ia){Y(N,ja,ia);m.add(D,fa,
N);return Z?M(K,P,R,Z,D,ja):I(K,P,R,D,ja)}}(),W=function(){const D=t.create();return function(N,K,P,R){var Z=m.transformMat2d;da(D,P,R,1);P=u.invert(D,D);return Z.call(m,N,K,P)}}(),aa=function(){const D=t.create();return function(N,K,P,R){return m.transformMat2d(N,K,da(D,P,R,1))}}(),ea=function(){const D=a.create(),N=t.create();return function(K,P,R){B(K,P);const Z=F(P),fa=K.targetGeometry;u.fromRotation(N,k.toRadian(P.rotation)||0);u.scale(N,N,a.fromValues(Z,Z));m.transformMat2d(D,R,N);fa.x+=D[0];
fa.y+=D[1];return K}}();c.addPadding=L;c.angleBetween=E;c.centerAt=U;c.copy=B;c.create=async function(D,N){if(!D||!N)return new g({targetGeometry:new q,scale:0,rotation:0});let K=N.spatialReference;const {constraints:P,padding:R,viewpoint:Z,size:fa}=N,ja=[R?fa[0]-R.left-R.right:fa[0],R?fa[1]-R.top-R.bottom:fa[1]];var ia=null;D instanceof g?ia=D:D.viewpoint?ia=D.viewpoint:D.target&&"esri.Viewpoint"===D.target.declaredClass&&(ia=D.target);let O=null;if(ia?.targetGeometry)O=ia.targetGeometry;else if(D instanceof
d)O=D;else if(D||D&&("center"in D||"extent"in D||"target"in D))O=await b(D.center,N,K)||await b(D.extent,N,K)||await b(D.target,N,K)||await b(D,N,K);!O&&Z?.targetGeometry?O=Z.targetGeometry:!O&&N.extent&&(O=N.extent);if(!K){var S=N.spatialReference||N.extent||O;K=S.wkid?S:S.spatialReference||n.WGS84}v.isLoaded()||r.equals(O.spatialReference,K)||v.canProjectWithoutEngine(O.spatialReference,K)||await v.load();S=p(O,K);S="center"in S?S.center:S;!1!==N.pickClosestTarget&&"point"===S.type&&"point"===Z.targetGeometry?.type&&
(S.x=e.getClosestDenormalizedXToReference(S.x,Z.targetGeometry.x,S.spatialReference));let ca=0;ia?ca=ia.rotation:D.hasOwnProperty("rotation")?ca=D.rotation:Z&&(ca=Z.rotation);let ha=0;null!=ia?.targetGeometry&&"point"===ia.targetGeometry.type?ha=ia.scale:"scale"in D&&D.scale?ha=D.scale:"zoom"in D&&-1!==D.zoom&&P&&P.effectiveLODs?ha=P.zoomToScale(D.zoom):Array.isArray(O)||"point"===O.type||"extent"===O.type&&0===O.width&&0===O.height?(ia=p(N.extent,K),ha=null!=ia?A(ia,ja,ca):N.extent?A(N.extent,ja,
ca):Z.scale):ha=A(p(O.extent,K),ja,ca);if(D=w(D.target??D))D.min&&D.min<ha?ha=D.min:D.max&&D.max>ha&&(ha=D.max);D=new g({targetGeometry:S,scale:ha,rotation:ca});P&&(D=P.fit(D),P.constrainByGeometry(D),P.rotationEnabled||(D.rotation=Z.rotation));return D};c.extentToScale=A;c.getAnchor=y;c.getExtent=X;c.getMatrix=ba;c.getPaddingMapTranslation=V;c.getPaddingScreenTranslation=Y;c.getResolution=F;c.getResolutionToScaleFactor=H;c.getTransform=da;c.getTransformNoRotation=z;c.getWorldScreenWidth=function(D,
N){return Math.round(J(D)/N)};c.getWorldWidth=J;c.padAndScaleAndRotateBy=T;c.resize=G;c.rotateBy=function(D,N,K){B(D,N);D.rotation+=K;return D};c.rotateTo=function(D,N,K){B(D,N);D.rotation=K;return D};c.scaleAndRotateBy=M;c.scaleTo=function(D,N,K){B(D,N);D.scale=K;return D};c.setExtent=function(D,N,K,P,R){U(D,N,K.center);D.scale=A(K,P);R?.constraints?.constrain(D);return D};c.toMap=W;c.toScreen=aa;c.translateBy=ea;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["exports",
"./common"],function(c,g){function l(y,F){y[0]=F[0];y[1]=F[1];y[2]=F[2];y[3]=F[3];y[4]=F[4];y[5]=F[5];return y}function f(y){y[0]=1;y[1]=0;y[2]=0;y[3]=1;y[4]=0;y[5]=0;return y}function x(y,F,H,J,Q,X,Y){y[0]=F;y[1]=H;y[2]=J;y[3]=Q;y[4]=X;y[5]=Y;return y}function k(y,F){const H=F[0],J=F[1],Q=F[2],X=F[3],Y=F[4];F=F[5];let V=H*X-J*Q;if(!V)return null;V=1/V;y[0]=X*V;y[1]=-J*V;y[2]=-Q*V;y[3]=H*V;y[4]=(Q*F-X*Y)*V;y[5]=(J*Y-H*F)*V;return y}function u(y){return y[0]*y[3]-y[1]*y[2]}function t(y,F,H){const J=
F[0],Q=F[1],X=F[2],Y=F[3],V=F[4];F=F[5];const ba=H[0],da=H[1],z=H[2],E=H[3],L=H[4];H=H[5];y[0]=J*ba+X*da;y[1]=Q*ba+Y*da;y[2]=J*z+X*E;y[3]=Q*z+Y*E;y[4]=J*L+X*H+V;y[5]=Q*L+Y*H+F;return y}function m(y,F,H){const J=F[0],Q=F[1],X=F[2],Y=F[3],V=F[4];F=F[5];const ba=Math.sin(H);H=Math.cos(H);y[0]=J*H+X*ba;y[1]=Q*H+Y*ba;y[2]=J*-ba+X*H;y[3]=Q*-ba+Y*H;y[4]=V;y[5]=F;return y}function a(y,F,H){const J=F[1],Q=F[2],X=F[3],Y=F[4],V=F[5],ba=H[0];H=H[1];y[0]=F[0]*ba;y[1]=J*ba;y[2]=Q*H;y[3]=X*H;y[4]=Y;y[5]=V;return y}
function d(y,F,H){const J=F[0],Q=F[1],X=F[2],Y=F[3],V=F[4];F=F[5];const ba=H[0];H=H[1];y[0]=J;y[1]=Q;y[2]=X;y[3]=Y;y[4]=J*ba+X*H+V;y[5]=Q*ba+Y*H+F;return y}function h(y,F){const H=Math.sin(F);F=Math.cos(F);y[0]=F;y[1]=H;y[2]=-H;y[3]=F;y[4]=0;y[5]=0;return y}function q(y,F){y[0]=F[0];y[1]=0;y[2]=0;y[3]=F[1];y[4]=0;y[5]=0;return y}function v(y,F){y[0]=1;y[1]=0;y[2]=0;y[3]=1;y[4]=F[0];y[5]=F[1];return y}function n(y){return"mat2d("+y[0]+", "+y[1]+", "+y[2]+", "+y[3]+", "+y[4]+", "+y[5]+")"}function e(y){return Math.sqrt(y[0]**
2+y[1]**2+y[2]**2+y[3]**2+y[4]**2+y[5]**2+1)}function r(y,F,H){y[0]=F[0]+H[0];y[1]=F[1]+H[1];y[2]=F[2]+H[2];y[3]=F[3]+H[3];y[4]=F[4]+H[4];y[5]=F[5]+H[5];return y}function C(y,F,H){y[0]=F[0]-H[0];y[1]=F[1]-H[1];y[2]=F[2]-H[2];y[3]=F[3]-H[3];y[4]=F[4]-H[4];y[5]=F[5]-H[5];return y}function A(y,F,H){y[0]=F[0]*H;y[1]=F[1]*H;y[2]=F[2]*H;y[3]=F[3]*H;y[4]=F[4]*H;y[5]=F[5]*H;return y}function b(y,F,H,J){y[0]=F[0]+H[0]*J;y[1]=F[1]+H[1]*J;y[2]=F[2]+H[2]*J;y[3]=F[3]+H[3]*J;y[4]=F[4]+H[4]*J;y[5]=F[5]+H[5]*J;return y}
function w(y,F){return y[0]===F[0]&&y[1]===F[1]&&y[2]===F[2]&&y[3]===F[3]&&y[4]===F[4]&&y[5]===F[5]}function p(y,F){const H=y[0],J=y[1],Q=y[2],X=y[3],Y=y[4];y=y[5];const V=F[0],ba=F[1],da=F[2],z=F[3],E=F[4];F=F[5];const L=g.getEpsilon();return Math.abs(H-V)<=L*Math.max(1,Math.abs(H),Math.abs(V))&&Math.abs(J-ba)<=L*Math.max(1,Math.abs(J),Math.abs(ba))&&Math.abs(Q-da)<=L*Math.max(1,Math.abs(Q),Math.abs(da))&&Math.abs(X-z)<=L*Math.max(1,Math.abs(X),Math.abs(z))&&Math.abs(Y-E)<=L*Math.max(1,Math.abs(Y),
Math.abs(E))&&Math.abs(y-F)<=L*Math.max(1,Math.abs(y),Math.abs(F))}const B=Object.freeze(Object.defineProperty({__proto__:null,add:r,copy:l,determinant:u,equals:p,exactEquals:w,frob:e,fromRotation:h,fromScaling:q,fromTranslation:v,identity:f,invert:k,mul:t,multiply:t,multiplyScalar:A,multiplyScalarAndAdd:b,rotate:m,scale:a,set:x,str:n,sub:C,subtract:C,translate:d},Symbol.toStringTag,{value:"Module"}));c.add=r;c.copy=l;c.determinant=u;c.equals=p;c.exactEquals=w;c.frob=e;c.fromRotation=h;c.fromScaling=
q;c.fromTranslation=v;c.identity=f;c.invert=k;c.mat2d=B;c.mul=t;c.multiply=t;c.multiplyScalar=A;c.multiplyScalarAndAdd=b;c.rotate=m;c.scale=a;c.set=x;c.str=n;c.sub=C;c.subtract=C;c.translate=d;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["exports"],function(c){function g(){return[1,0,0,1,0,0]}function l(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function f(t,m,a,d,h,q){return[t,m,a,d,h,q]}function x(t,m){return new Float64Array(t,
m,6)}const k=g(),u=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:k,clone:l,create:g,createView:x,fromValues:f},Symbol.toStringTag,{value:"Module"}));c.IDENTITY=k;c.clone=l;c.create=g;c.createView=x;c.fromValues=f;c.mat2df64=u;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["exports","./common"],function(c,g){function l(G,I){G[0]=I[0];G[1]=I[1];return G}function f(G,I,M){G[0]=I;G[1]=M;return G}function x(G,I,M){G[0]=
I[0]+M[0];G[1]=I[1]+M[1];return G}function k(G,I,M){G[0]=I[0]-M[0];G[1]=I[1]-M[1];return G}function u(G,I,M){G[0]=I[0]*M[0];G[1]=I[1]*M[1];return G}function t(G,I,M){G[0]=I[0]/M[0];G[1]=I[1]/M[1];return G}function m(G,I){G[0]=Math.ceil(I[0]);G[1]=Math.ceil(I[1]);return G}function a(G,I){G[0]=Math.floor(I[0]);G[1]=Math.floor(I[1]);return G}function d(G,I,M){G[0]=Math.min(I[0],M[0]);G[1]=Math.min(I[1],M[1]);return G}function h(G,I,M){G[0]=Math.max(I[0],M[0]);G[1]=Math.max(I[1],M[1]);return G}function q(G,
I){G[0]=Math.round(I[0]);G[1]=Math.round(I[1]);return G}function v(G,I,M){G[0]=I[0]*M;G[1]=I[1]*M;return G}function n(G,I,M,T){G[0]=I[0]+M[0]*T;G[1]=I[1]+M[1]*T;return G}function e(G,I){const M=I[0]-G[0];G=I[1]-G[1];return Math.sqrt(M*M+G*G)}function r(G,I){const M=I[0]-G[0];G=I[1]-G[1];return M*M+G*G}function C(G){const I=G[0];G=G[1];return Math.sqrt(I*I+G*G)}function A(G){const I=G[0];G=G[1];return I*I+G*G}function b(G,I){G[0]=-I[0];G[1]=-I[1];return G}function w(G,I){G[0]=1/I[0];G[1]=1/I[1];return G}
function p(G,I){var M=I[0];const T=I[1];M=M*M+T*T;0<M&&(M=1/Math.sqrt(M),G[0]=I[0]*M,G[1]=I[1]*M);return G}function B(G,I){return G[0]*I[0]+G[1]*I[1]}function y(G,I,M){I=I[0]*M[1]-I[1]*M[0];G[0]=G[1]=0;G[2]=I;return G}function F(G,I,M,T){const W=I[0];I=I[1];G[0]=W+T*(M[0]-W);G[1]=I+T*(M[1]-I);return G}function H(G,I){I=I||1;const M=2*g.RANDOM()*Math.PI;G[0]=Math.cos(M)*I;G[1]=Math.sin(M)*I;return G}function J(G,I,M){const T=I[0];I=I[1];G[0]=M[0]*T+M[2]*I;G[1]=M[1]*T+M[3]*I;return G}function Q(G,I,
M){const T=I[0];I=I[1];G[0]=M[0]*T+M[2]*I+M[4];G[1]=M[1]*T+M[3]*I+M[5];return G}function X(G,I,M){const T=I[0];I=I[1];G[0]=M[0]*T+M[3]*I+M[6];G[1]=M[1]*T+M[4]*I+M[7];return G}function Y(G,I,M){const T=I[0];I=I[1];G[0]=M[0]*T+M[4]*I+M[12];G[1]=M[1]*T+M[5]*I+M[13];return G}function V(G,I,M,T){const W=I[0]-M[0];I=I[1]-M[1];const aa=Math.sin(T);T=Math.cos(T);G[0]=W*T-I*aa+M[0];G[1]=W*aa+I*T+M[1];return G}function ba(G,I){var M=G[0];G=G[1];const T=I[0];I=I[1];let W=M*M+G*G;0<W&&(W=1/Math.sqrt(W));let aa=
T*T+I*I;0<aa&&(aa=1/Math.sqrt(aa));M=(M*T+G*I)*W*aa;return 1<M?0:-1>M?Math.PI:Math.acos(M)}function da(G){return"vec2("+G[0]+", "+G[1]+")"}function z(G,I){return G[0]===I[0]&&G[1]===I[1]}function E(G,I){const M=G[0];G=G[1];const T=I[0];I=I[1];const W=g.getEpsilon();return Math.abs(M-T)<=W*Math.max(1,Math.abs(M),Math.abs(T))&&Math.abs(G-I)<=W*Math.max(1,Math.abs(G),Math.abs(I))}function L(G,I,M,T,W){let aa=I[0]-M[0];M=I[1]-M[1];W=(T[0]*aa+T[1]*M)*(W-1);aa=T[0]*W;M=T[1]*W;G[0]=I[0]+aa;G[1]=I[1]+M;return G}
const U=Object.freeze(Object.defineProperty({__proto__:null,add:x,angle:ba,ceil:m,copy:l,cross:y,dist:e,distance:e,div:t,divide:t,dot:B,equals:E,exactEquals:z,floor:a,inverse:w,len:C,length:C,lerp:F,max:h,min:d,mul:u,multiply:u,negate:b,normalize:p,projectAndScale:L,random:H,rotate:V,round:q,scale:v,scaleAndAdd:n,set:f,sqrDist:r,sqrLen:A,squaredDistance:r,squaredLength:A,str:da,sub:k,subtract:k,transformMat2:J,transformMat2d:Q,transformMat3:X,transformMat4:Y},Symbol.toStringTag,{value:"Module"}));
c.add=x;c.angle=ba;c.ceil=m;c.copy=l;c.cross=y;c.dist=e;c.distance=e;c.div=t;c.divide=t;c.dot=B;c.equals=E;c.exactEquals=z;c.floor=a;c.inverse=w;c.len=C;c.length=C;c.lerp=F;c.max=h;c.min=d;c.mul=u;c.multiply=u;c.negate=b;c.normalize=p;c.projectAndScale=L;c.random=H;c.rotate=V;c.round=q;c.scale=v;c.scaleAndAdd=n;c.set=f;c.sqrDist=r;c.sqrLen=A;c.squaredDistance=r;c.squaredLength=A;c.str=da;c.sub=k;c.subtract=k;c.transformMat2=J;c.transformMat2d=Q;c.transformMat3=X;c.transformMat4=Y;c.vec2=U;Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["exports"],function(c){function g(){return[0,0]}function l(e){return[e[0],e[1]]}function f(e,r){return[e,r]}function x(e,r=[0,0]){const C=Math.min(2,e.length);for(let A=0;A<C;++A)r[A]=e[A];return r}function k(e,r){return new Float64Array(e,r,2)}function u(){return[0,0]}function t(){return[1,1]}function m(){return[1,0]}function a(){return[0,1]}const d=[0,0],h=[1,1],q=[1,0],v=[0,1],n=Object.freeze(Object.defineProperty({__proto__:null,
ONES:h,UNIT_X:q,UNIT_Y:v,ZEROS:d,clone:l,create:g,createView:k,fromArray:x,fromValues:f,ones:t,unitX:m,unitY:a,zeros:u},Symbol.toStringTag,{value:"Module"}));c.ONES=h;c.UNIT_X=q;c.UNIT_Y=v;c.ZEROS=d;c.clone=l;c.create=g;c.createView=k;c.fromArray=x;c.fromValues=f;c.ones=t;c.unitX=m;c.unitY=a;c.vec2f64=n;c.zeros=u;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/FrameTask":function(){define(["../../core/reactiveUtils","../../core/scheduling"],function(c,g){class l{constructor(f){this.view=
f;this._updateParameters=this._frameTaskHandle=this._stationaryHandle=null;this._updateRequested=!1;this.stationary=!0;this.animationInProgress=!1;this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)};this.update=()=>{this._updateRequested=!1;if(!this.view?.destroyed){var {allLayerViews:x,
graphicsView:k,labelManager:u,state:{id:t}}=this.view;x.forEach(this._updateLayerView,this);null!=u&&(u.lastUpdateId!==t&&(u.viewChange(),u.lastUpdateId=t),u.updateRequested&&u.processUpdate(this._updateParameters));null!=k&&(k.lastUpdateId!==t&&(k.viewChange(),k.lastUpdateId=t),k.updateRequested&&k.processUpdate(this._updateParameters));this.view.graphicsTileStore.setViewState(this._updateParameters.state);this.animationInProgress||this._updateRequested||this._frameTaskHandle?.pause()}}}destroy(){this.stop()}start(){if(!this._frameTaskHandle){var f=
this.view;this.stationary=f.stationary;this._updateParameters={state:f.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:f.renderingOptions};this._stationaryHandle=c.watch(()=>f.stationary,x=>{this.stationary=x;this.requestFrame()});this._frameTaskHandle=g.addFrameTask(this);this.requestUpdate()}}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=
null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(f){if(f.attached){var x=this.view.state,k=f.lastUpdateId;if(null==k||!this.stationary&&!f.moving)f.moving=!0,f.moveStart();k!==x.id&&f.viewChange();this.stationary&&f.moving&&(f.moving=!1,f.moveEnd());f.lastUpdateId=x.id;f.updateRequested&&f.processUpdate(this._updateParameters);
"layerViews"in f&&f.layerViews?.forEach(this._updateLayerView,this)}else this.requestUpdate()}}return l})},"esri/views/2d/GoToManager":function(){define("exports ../../chunks/tslib.es6 ../../core/Accessor ../../core/Error ../../core/Logger ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../ViewAnimation ./viewpointUtils".split(" "),function(c,g,l,f,x,k,u,t,m,a,d,h,q){c.GoToManager=
class extends l{constructor(v){super(v);this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(v,n){if(v){var e=new h;this.view.animation=e;await u.whenOnce(()=>this.view.ready,n);var r={animate:!0,...n},{extent:C,spatialReference:A,size:b,viewpoint:w,constraints:p,padding:B,allLayerViews:y}=this.view;v=q.create(v,{extent:C,spatialReference:A,size:b,viewpoint:w,constraints:p,padding:B,allLayerViews:y,pickClosestTarget:n?.pickClosestTarget??!0});e?.update(v);this._gotoTask={};return r.animate?
this._gotoAnimated(v,r):this._gotoImmediate(v,r)}x.getLogger(this).error("#goTo()","target cannot be null or undefined")}_gotoImmediate(v,n){const e=this._gotoTask,r=this.view.animation;v=v.then(C=>{k.throwIfAborted(n);if(e!==this._gotoTask)throw new f("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=r.target=C;r.finish()});return this._cancellableGoTo(e,r,v,n)}_gotoAnimated(v,n){const e=this._gotoTask,r=this.view.animation;if(!r)return Promise.resolve();v=v.then(C=>{k.throwIfAborted(n);
if(e!==this._gotoTask)throw new f("view:goto-interrupted","Goto was interrupted");r.update(C);this.view.animationManager.animate(r,this.view.viewpoint,n);return r.when().then(()=>{},()=>{})});return this._cancellableGoTo(e,r,v,n)}_cancellableGoTo(v,n,e,r){const C=()=>v===this._gotoTask;return k.whenOrAbort(e,r).finally(()=>{C()&&(n.done||n.stop())})}};g.__decorate([t.property({constructOnly:!0})],c.GoToManager.prototype,"view",void 0);c.GoToManager=g.__decorate([d.subclass("esri.views.2d.GoToManager")],
c.GoToManager);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error"],function(c,g,l){function f(){return Promise.all([new Promise((m,a)=>c(["./webglDeps"],m,a)),new Promise((m,a)=>c(["./mapViewDeps"],m,a))])}const x=m=>Object.freeze(Object.defineProperty({__proto__:null,default:m},Symbol.toStringTag,{value:"Module"})),k=()=>f().then(()=>new Promise((m,a)=>c(["./layers/TileLayerView2D"],
d=>m(x(d)),a))),u=()=>f().then(()=>new Promise((m,a)=>c(["./layers/FeatureLayerView2D"],d=>m(x(d)),a))),t={"base-dynamic":()=>f().then(()=>new Promise((m,a)=>c(["./layers/BaseDynamicLayerView2D"],d=>m(x(d)),a))),"base-tile":k,"bing-maps":k,catalog:()=>f().then(()=>new Promise((m,a)=>c(["./layers/CatalogLayerView2D"],d=>m(x(d)),a))),"catalog-dynamic-group":()=>f().then(()=>new Promise((m,a)=>c(["./layers/CatalogDynamicGroupLayerView2D"],d=>m(x(d)),a))),"catalog-footprint":()=>f().then(()=>new Promise((m,
a)=>c(["./layers/CatalogFootprintLayerView2D"],d=>m(x(d)),a))),csv:u,"geo-rss":()=>f().then(()=>new Promise((m,a)=>c(["./layers/GeoRSSLayerView2D"],d=>m(x(d)),a))),feature:u,geojson:u,graphics:()=>f().then(()=>new Promise((m,a)=>c(["./layers/GraphicsLayerView2D"],d=>m(x(d)),a))),group:()=>f().then(()=>new Promise((m,a)=>c(["./layers/GroupLayerView2D"],d=>m(x(d)),a))),imagery:()=>f().then(()=>new Promise((m,a)=>c(["./layers/ImageryLayerView2D"],d=>m(x(d)),a))),"imagery-tile":()=>f().then(()=>new Promise((m,
a)=>c(["./layers/ImageryTileLayerView2D"],d=>m(x(d)),a))),kml:()=>f().then(()=>new Promise((m,a)=>c(["./layers/KMLLayerView2D"],d=>m(x(d)),a))),"knowledge-graph":()=>f().then(()=>new Promise((m,a)=>c(["./layers/KnowledgeGraphLayerView2D"],d=>m(x(d)),a))),"link-chart":()=>f().then(()=>new Promise((m,a)=>c(["./layers/KnowledgeGraphLayerView2D"],d=>m(x(d)),a))),"knowledge-graph-sublayer":u,"map-image":()=>f().then(()=>new Promise((m,a)=>c(["./layers/MapImageLayerView2D"],d=>m(x(d)),a))),"map-notes":()=>
f().then(()=>new Promise((m,a)=>c(["./layers/MapNotesLayerView2D"],d=>m(x(d)),a))),media:()=>f().then(()=>new Promise((m,a)=>c(["./layers/MediaLayerView2D"],d=>m(x(d)),a))),"ogc-feature":()=>f().then(()=>new Promise((m,a)=>c(["./layers/OGCFeatureLayerView2D"],d=>m(x(d)),a))),"open-street-map":k,"oriented-imagery":u,route:()=>f().then(()=>new Promise((m,a)=>c(["./layers/RouteLayerView2D"],d=>m(x(d)),a))),stream:()=>f().then(()=>new Promise((m,a)=>c(["./layers/StreamLayerView2D"],d=>m(x(d)),a))),"subtype-group":()=>
f().then(()=>new Promise((m,a)=>c(["./layers/SubtypeGroupLayerView2D"],d=>m(x(d)),a))),tile:k,"vector-tile":()=>f().then(()=>new Promise((m,a)=>c(["./layers/VectorTileLayerView2D"],d=>m(x(d)),a))),video:()=>f().then(()=>new Promise((m,a)=>c(["./layers/VideoLayerView2D"],d=>m(x(d)),a))),wcs:()=>f().then(()=>new Promise((m,a)=>c(["./layers/ImageryTileLayerView2D"],d=>m(x(d)),a))),"web-tile":k,wfs:u,wms:()=>f().then(()=>new Promise((m,a)=>c(["./layers/WMSLayerView2D"],d=>m(x(d)),a))),wmts:()=>f().then(()=>
new Promise((m,a)=>c(["./layers/WMTSLayerView2D"],d=>m(x(d)),a))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};g.layerView2DImporter={hasLayerViewModule:m=>null!=t[m.type],importLayerView:m=>{var a=t[m.type];if(null==a)throw m=m.declaredClass?m.declaredClass.slice(m.declaredClass.lastIndexOf(".")+1):"Unknown",a=m.replaceAll(/([a-z])([A-Z])/g,
"$1-$2").toLowerCase(),new l(`${a}:view-not-supported`,`${m} is not supported in 2D`);return a(m)}};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/MapViewConstraints":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../layers/support/LOD ./constraints/GeometryConstraint ./constraints/RotationConstraint ./constraints/ZoomConstraint ../../geometry/Extent ../../geometry/Polygon".split(" "),
function(c,g,l,f,x,k,u,t,m,a,d,h,q,v,n){g={base:null,key:"type",typeMap:{extent:v,polygon:n}};l=class extends l{constructor(e){super(e);this.lods=null;this.maxScale=this.minScale=0;this.maxZoom=this.minZoom=-1;this.snapToZoom=this.rotationEnabled=!0;this.customConstraints=new f}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?
this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new d.GeometryConstraint({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new h({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),
r=this.lods||this.view?.constraintsInfo.lods,C=this.minZoom,A=this.maxZoom,b=this.minScale,w=this.maxScale,p=this.snapToZoom;return e&&e.lods===r&&e.minZoom===C&&e.maxZoom===A&&e.minScale===b&&e.maxScale===w&&e.snapToZoom===p?e:new q({lods:r,minZoom:C,maxZoom:A,minScale:b,maxScale:w,snapToZoom:p})}canZoomInTo(e){const r=this.effectiveMaxScale;return 0===r||e>=r}canZoomOutTo(e){const r=this.effectiveMinScale;return 0===r||e<=r}constrain(e,r){this._zoom.constrain(e,r);this._rotation.constrain(e,r);
this._geometry.constrain(e,r);this.customConstraints.forEach(C=>C.constrain(e,r));return e}constrainByGeometry(e){this._geometry.constrain(e);this.customConstraints.forEach(r=>r.applyPanConstraint?.(e));return e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};
c.__decorate([x.property({readOnly:!0})],l.prototype,"effectiveLODs",null);c.__decorate([x.property({readOnly:!0})],l.prototype,"effectiveMinScale",null);c.__decorate([x.property({readOnly:!0})],l.prototype,"effectiveMaxScale",null);c.__decorate([x.property({readOnly:!0})],l.prototype,"effectiveMinZoom",null);c.__decorate([x.property({readOnly:!0})],l.prototype,"effectiveMaxZoom",null);c.__decorate([x.property({types:g,value:null})],l.prototype,"geometry",null);c.__decorate([x.property({type:[a]})],
l.prototype,"lods",void 0);c.__decorate([x.property()],l.prototype,"minScale",void 0);c.__decorate([x.property()],l.prototype,"maxScale",void 0);c.__decorate([x.property()],l.prototype,"minZoom",void 0);c.__decorate([x.property()],l.prototype,"maxZoom",void 0);c.__decorate([x.property()],l.prototype,"rotationEnabled",void 0);c.__decorate([x.property()],l.prototype,"snapToZoom",void 0);c.__decorate([x.property({type:f})],l.prototype,"customConstraints",void 0);c.__decorate([x.property()],l.prototype,
"view",void 0);c.__decorate([x.property({readOnly:!0})],l.prototype,"version",null);c.__decorate([x.property({type:d.GeometryConstraint,readOnly:!0})],l.prototype,"_geometry",null);c.__decorate([x.property({type:h})],l.prototype,"_rotation",null);c.__decorate([x.property({readOnly:!0,type:q})],l.prototype,"_zoom",null);return l=c.__decorate([m.subclass("esri.views.2d.MapViewConstraints")],l)})},"esri/views/2d/constraints/GeometryConstraint":function(){define("exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/Logger ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../geometry/projection ../../../geometry/support/contains ../../../geometry/support/near".split(" "),
function(c,g,l,f,x,k,u,t,m,a,d,h){var q;c.GeometryConstraint=q=class extends f.NumericIdentifiableMixin(l){constructor(v){super(v);this.spatialReference=this.geometry=null}get normalizedGeometry(){if(null==this.geometry||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return a.project(this.geometry,this.spatialReference)}catch(v){return x.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",
{geometry:this.geometry,spatialReference:this.spatialReference,error:v}),null}return this.geometry}constrain(v,n){if(null==this.normalizedGeometry)return v;n=v.targetGeometry;if("extent"===this.normalizedGeometry.type?d.extentContainsPoint(this.normalizedGeometry,n):d.polygonContainsPoint(this.normalizedGeometry,n))return v;({coordinate:n}=h.nearestCoordinate(this.normalizedGeometry,n));if(!n)return v;v.targetGeometry=n;return v}clone(){return new q({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};
g.__decorate([k.property({constructOnly:!0})],c.GeometryConstraint.prototype,"geometry",void 0);g.__decorate([k.property({readOnly:!0})],c.GeometryConstraint.prototype,"normalizedGeometry",null);g.__decorate([k.property({constructOnly:!0})],c.GeometryConstraint.prototype,"spatialReference",void 0);c.GeometryConstraint=q=g.__decorate([m.subclass("esri.views.2d.constraints.GeometryConstraint")],c.GeometryConstraint);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/near":function(){define(["exports",
"../../geometry","../../core/libs/gl-matrix-2/math/vec2","./coordsUtils","../Point"],function(c,g,l,f,x){c.nearestCoordinate=function(k,u){const {spatialReference:t}=u;u=[u.x,u.y];let m=Number.POSITIVE_INFINITY,a=0,d=0;const h=[0,0];k="extent"===k.type?[[[k.xmin,k.ymin],[k.xmin,k.ymax],[k.xmax,k.ymax],[k.xmax,k.ymin],[k.xmin,k.ymin]]]:k.rings;for(const q of k)for(k=0;k<q.length-1;k++){f.projectPointOnLine(h,u,q,k);const v=l.distance(u,h);v<m&&(m=v,a=h[0],d=h[1])}return{coordinate:new x({x:a,y:d,spatialReference:t}),
distance:m}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/constraints/RotationConstraint":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),function(c,g,l,f,x,k,u,t){var m;g=m=class extends l.NumericIdentifiableMixin(g){constructor(){super(...arguments);
this.rotationEnabled=this.enabled=!0}constrain(a,d){if(!this.enabled||!d)return a;this.rotationEnabled||(a.rotation=d.rotation);return a}clone(){return new m({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};c.__decorate([f.property()],g.prototype,"enabled",void 0);c.__decorate([f.property()],g.prototype,"rotationEnabled",void 0);return g=m=c.__decorate([t.subclass("esri.views.2d.constraints.RotationConstraint")],g)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,l,f,x,k,u,t){var m;g=m=class extends l.NumericIdentifiableMixin(g){constructor(a){super(a);this._lodByScale={};this._scales=[];this.effectiveLODs=null;this.effectiveMaxZoom=this.effectiveMinZoom=-1;this.effectiveMaxScale=this.effectiveMinScale=0;this.lods=null;this.maxZoom=this.minZoom=-1;this.maxScale=this.minScale=0;this.snapToZoom=!0}initialize(){let {lods:a,minScale:d,maxScale:h,minZoom:q,maxZoom:v}=this,n=-1,e=-1,r=!1,C=!1;0!==d&&0!==h&&d<h&&([d,h]=[h,d]);if(a?.length){a=a.map(b=>
b.clone());a.sort((b,w)=>w.scale-b.scale);a.forEach((b,w)=>b.level=w);for(const b of a){!r&&0<d&&d>=b.scale&&(n=b.level,r=!0);!C&&0<h&&h>=b.scale&&(e=A?A.level:-1,C=!0);var A=b}-1===q&&(q=0===d?0:n);-1===v&&(v=0===h?a.length-1:e);q=Math.max(q,0);q=Math.min(q,a.length-1);v=Math.max(v,0);v=Math.min(v,a.length-1);q>v&&([q,v]=[v,q]);d=a[q].scale;h=a[v].scale;a.splice(0,q);a.splice(v-q+1,a.length);a.forEach((b,w)=>{this._lodByScale[b.scale]=b;this._scales[w]=b.scale});this._set("effectiveLODs",a);this._set("effectiveMinZoom",
q);this._set("effectiveMaxZoom",v)}this._set("effectiveMinScale",d);this._set("effectiveMaxScale",h)}constrain(a,d){if(d&&a.scale===d.scale)return a;var h=this.effectiveMinScale;const q=this.effectiveMaxScale,v=a.targetGeometry,n=d&&d.targetGeometry,e=0!==h&&a.scale>h;if(0!==q&&a.scale<q||e)h=e?h:q,d&&n&&(d=(h-d.scale)/(a.scale-d.scale),v.x=n.x+(v.x-n.x)*d,v.y=n.y+(v.y-n.y)*d),a.scale=h;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a}fit(a){if(!this.effectiveLODs||
!this.snapToZoom)return this.constrain(a,null);const d=this.scaleToZoom(a.scale);a.scale=this.zoomToScale(.99<Math.abs(d-Math.floor(d))?Math.round(d):Math.floor(d));return a}zoomToScale(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);const d=this._scales;if(0>=a)return d[0];if(a>=d.length)return d[d.length-1];const h=Math.round(a);return d[h]+(h-a)*(d[Math.round(a-.5)]-d[h])}scaleToZoom(a){if(!this.effectiveLODs)return-1;const d=this._scales;let h,q;if(a>=d[0])return this.effectiveMinZoom;
if(a<=d[d.length-1])return this.effectiveMaxZoom;for(let v=0;v<d.length-1;v++){h=d[v];q=d[v+1];if(q===a)return v+this.effectiveMinZoom+1;if(h>a&&q<a)return v+this.effectiveMinZoom+1-(a-q)/(h-q)}return-1}snapToClosestScale(a){if(!this.effectiveLODs)return a;a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))}snapToNextScale(a,d=.5){if(!this.effectiveLODs)return a*d;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)}snapToPreviousScale(a,d=2){if(!this.effectiveLODs)return a*d;a=
Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)}clone(){return new m({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce((d,h)=>Math.abs(h-a)<=Math.abs(d-a)?h:d,this._scales[0]);return this._lodByScale[a].scale}};c.__decorate([f.property({readOnly:!0})],g.prototype,"effectiveLODs",void 0);c.__decorate([f.property({readOnly:!0})],g.prototype,
"effectiveMinZoom",void 0);c.__decorate([f.property({readOnly:!0})],g.prototype,"effectiveMaxZoom",void 0);c.__decorate([f.property({readOnly:!0})],g.prototype,"effectiveMinScale",void 0);c.__decorate([f.property({readOnly:!0})],g.prototype,"effectiveMaxScale",void 0);c.__decorate([f.property()],g.prototype,"lods",void 0);c.__decorate([f.property()],g.prototype,"minZoom",void 0);c.__decorate([f.property()],g.prototype,"maxZoom",void 0);c.__decorate([f.property()],g.prototype,"minScale",void 0);c.__decorate([f.property()],
g.prototype,"maxScale",void 0);c.__decorate([f.property()],g.prototype,"snapToZoom",void 0);return g=m=c.__decorate([t.subclass("esri.views.2d.constraints.ZoomConstraint")],g)})},"esri/views/2d/tiling/TileInfoView":function(){define(["../../../geometry/support/spatialReferenceUtils","./LODInfo","./TileCoverage","./TileKey","./TileSpan"],function(c,g,l,f,x){const k=new f("0/0/0/0");class u{static create(a,d){a[1]>d[1]&&([a,d]=[d,a]);const [h,q]=a,[v,n]=d;a=v-h;d=n-q;d=0!==d?a/d:0;const e=(Math.ceil(q)-
q)*d,r=(Math.floor(q)-q)*d;return new u(h,Math.floor(q),Math.ceil(n),d,0>a?e:r,0>a?r:e,0>a?v:h,0>a?h:v)}constructor(a,d,h,q,v,n,e,r){this.x=a;this.ymin=d;this.ymax=h;this.invM=q;this.leftAdjust=v;this.rightAdjust=n;this.leftBound=e;this.rightBound=r}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const t=[[0,0],[0,0],[0,0],[0,0]];class m{constructor(a,d=null,h=a.lods[0].level,q=
a.lods[a.lods.length-1].level){this.tileInfo=a;this.fullExtent=d;this.scales=[];this._infoByScale={};this._infoByLevel={};const v=a.lods.filter(e=>e.level>=h&&e.level<=q);this.minScale=v[0].scale;this.maxScale=v[v.length-1].scale;const n=this._lodInfos=v.map(e=>g.create(a,e,d));v.forEach((e,r)=>{this._infoByLevel[e.level]=n[r];this._infoByScale[e.scale]=n[r];this.scales[r]=e.scale},this);this._wrap=a.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(a){return this._infoByLevel["number"===
typeof a?a:a.level]}getTileBounds(a,d,h=!1){k.set(d);return(d=this._infoByLevel[k.level])?d.getTileBounds(a,k,h):a}getTileCoords(a,d,h=!1){k.set(d);return(d=this._infoByLevel[k.level])?d.getTileCoords(a,k,h):a}getTileCoverage(a,d=192,h=!0,q="closest"){if(!h&&(a.scale>this.minScale||a.scale<this.maxScale))return null;h="closest"===q?this.getClosestInfoForScale(a.scale):this.getSmallestInfoForScale(a.scale);q=l.pool.acquire(h);const v=this._wrap;var n=Infinity;let e=-Infinity;const r=q.spans;t[0][0]=
t[0][1]=t[1][1]=t[3][0]=-d;t[1][0]=t[2][0]=a.size[0]+d;t[2][1]=t[3][1]=a.size[1]+d;for(C of t)a.toMap(C,C),C[0]=h.getColumnForX(C[0]),C[1]=h.getRowForY(C[1]);a=[];var C=3;for(d=0;4>d;d++)t[d][1]===t[C][1]?C=d:(C=u.create(t[d],t[C]),n=Math.min(C.ymin,n),e=Math.max(C.ymax,e),void 0===a[C.ymin]&&(a[C.ymin]=[]),a[C.ymin].push(C),C=d);if(null==n||null==e||100<e-n)return null;for(d=[];n<e;){null!=a[n]&&(d=d.concat(a[n]));C=Infinity;var A=-Infinity;for(var b=d.length-1;0<=b;b--){var w=d[b];C=Math.min(C,
w.getLeftCol());A=Math.max(A,w.getRightCol())}C=Math.floor(C);A=Math.floor(A);if(n>=h.first[1]&&n<=h.last[1])if(v)if(h.size[0]<h.worldSize[0])for(b=Math.floor(A/h.worldSize[0]),w=Math.floor(C/h.worldSize[0]);w<=b;w++)r.push(new x(n,Math.max(h.getFirstColumnForWorld(w),C),Math.min(h.getLastColumnForWorld(w),A)));else r.push(new x(n,C,A));else C>h.last[0]||A<h.first[0]||(C=Math.max(C,h.first[0]),A=Math.min(A,h.last[0]),r.push(new x(n,C,A)));n+=1;for(C=d.length-1;0<=C;C--)A=d[C],A.ymax>=n?A.incrRow():
d.splice(C,1)}return q}getTileParentId(a){k.set(a);a=this._lodInfos.indexOf(this._infoByLevel[k.level])-1;if(0>a)return null;this._getTileIdAtLOD(k,this._lodInfos[a],k);return k.id}getTileResolution(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1}getTileScale(a){return(a=this._infoByLevel[a.level])?a.scale:-1}intersects(a,d){k.set(d);d=this._infoByLevel[k.level];const h=a.lodInfo;if(h.resolution>d.resolution){this._getTileIdAtLOD(k,h,k);var q=h.denormalizeCol(k.col,k.world);
for(var v of a.spans)if(v.row===k.row&&v.colFrom<=q&&v.colTo>=q)return!0}if(h.resolution<d.resolution){const [e,r,C,A]=a.spans.reduce((b,w)=>{b[0]=Math.min(b[0],w.row);b[1]=Math.max(b[1],w.row);b[2]=Math.min(b[2],w.colFrom);b[3]=Math.max(b[3],w.colTo);return b},[Infinity,-Infinity,Infinity,-Infinity]);q=d.denormalizeCol(k.col,k.world);a=h.getColumnForX(d.getXForColumn(q));v=h.getRowForY(d.getYForRow(k.row));q=h.getColumnForX(d.getXForColumn(q+1))-1;d=h.getRowForY(d.getYForRow(k.row+1))-1;return!(a>
A||q<C||v>r||d<e)}const n=h.denormalizeCol(k.col,k.world);return a.spans.some(e=>e.row===k.row&&e.colFrom<=n&&e.colTo>=n)}normalizeBounds(a,d,h){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];this._wrap&&(d=c.getInfo(this.tileInfo.spatialReference),h=-h*(d.valid[1]-d.valid[0]),a[0]+=h,a[2]+=h);return a}getSmallestInfoForScale(a){const d=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>d[0])return this._infoByScale[d[0]];for(let h=1;h<d.length-1;h++)if(a>d[h]+1E-6)return this._infoByScale[d[h-
1]];return this._infoByScale[d[d.length-1]]}getClosestInfoForScale(a){const d=this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=d.reduce((h,q)=>Math.abs(q-a)<Math.abs(h-a)?q:h,d[0]);return this._infoByScale[a]}scaleToLevel(a){const d=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(let h=d.length-1;0<=h;h--)if(a<d[h])return h===d.length-1?this._infoByScale[d[d.length-1]].level:this._infoByScale[d[h]].level+(d[h]-a)/(d[h]-d[h+1]);return this._infoByScale[d[0]].level}scaleToZoom(a){return this.tileInfo.scaleToZoom(a)}_getTileIdAtLOD(a,
d,h){const q=this._infoByLevel[h.level];a.set(h);if(d.resolution<q.resolution)return null;if(d.resolution===q.resolution)return a;a.level=d.level;a.col=Math.floor(h.col*q.resolution/d.resolution+.01);a.row=Math.floor(h.row*q.resolution/d.resolution+.01);return a}}return m})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../geometry/support/spatialReferenceUtils","./TileKey"],function(c,g){function l(k,u,t){k[0]=u;k[1]=t;return k}const f=new g("0/0/0/0");class x{static create(k,u,t=null){var m=
c.getInfo(k.spatialReference);const a=u.origin||[k.origin.x,k.origin.y],d=[k.size[0]*u.resolution,k.size[1]*u.resolution],h=[-Infinity,-Infinity],q=[Infinity,Infinity],v=[Infinity,Infinity];null!=t&&(l(h,Math.max(0,Math.floor((t.xmin-a[0])/d[0])),Math.max(0,Math.floor((a[1]-t.ymax)/d[1]))),l(q,Math.max(0,Math.floor((t.xmax-a[0])/d[0])),Math.max(0,Math.floor((a[1]-t.ymin)/d[1]))),l(v,q[0]-h[0]+1,q[1]-h[1]+1));const {cols:n,rows:e}=u;!t&&n&&e&&(l(h,n[0],e[0]),l(q,n[1],e[1]),l(v,n[1]-n[0]+1,e[1]-e[0]+
1));let r;k.isWrappable?(k=[Math.ceil(Math.round((m.valid[1]-m.valid[0])/u.resolution)/k.size[0]),v[1]],m=[Math.floor((m.origin[0]-a[0])/d[0]),h[1]],t=[k[0]+m[0]-1,q[1]],r=!0):(m=h,t=q,k=v,r=!1);return new x(u.level,u.resolution,u.scale,a,h,q,v,d,m,t,k,r)}constructor(k,u,t,m,a,d,h,q,v,n,e,r){this.level=k;this.resolution=u;this.scale=t;this.origin=m;this.first=a;this.last=d;this.size=h;this.norm=q;this.worldStart=v;this.worldEnd=n;this.worldSize=e;this.wrap=r}normalizeCol(k){if(!this.wrap)return k;
const u=this.worldSize[0];return 0>k?u-1-Math.abs((k+1)%u):k%u}denormalizeCol(k,u){return this.wrap?this.worldSize[0]*u+k:k}getWorldForColumn(k){return this.wrap?Math.floor(k/this.worldSize[0]):0}getFirstColumnForWorld(k){return k*this.worldSize[0]+this.first[0]}getLastColumnForWorld(k){return k*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(k){return(k-this.origin[0])/this.norm[0]}getXForColumn(k){return this.origin[0]+k*this.norm[0]}getRowForY(k){return(this.origin[1]-k)/this.norm[1]}getYForRow(k){return this.origin[1]-
k*this.norm[1]}getTileBounds(k,u,t=!1){f.set(u);var m=t?f.col:this.denormalizeCol(f.col,f.world),a=f.row;u=this.getXForColumn(m);t=this.getYForRow(a+1);m=this.getXForColumn(m+1);a=this.getYForRow(a);k[0]=u;k[1]=t;k[2]=m;k[3]=a;return k}getTileCoords(k,u,t=!1){f.set(u);u=t?f.col:this.denormalizeCol(f.col,f.world);Array.isArray(k)?l(k,this.getXForColumn(u),this.getYForRow(f.row)):(k.x=this.getXForColumn(u),k.y=this.getYForRow(f.row));return k}}return x})},"esri/views/2d/tiling/TileKey":function(){define(["../../../core/ObjectPool"],
function(c){class g{static getId(l,f,x,k){return"object"===typeof l?`${l.level}/${l.row}/${l.col}/${l.world}`:`${l}/${f}/${x}/${k}`}constructor(l,f,x,k){this.set(l,f,x,k)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(l){this.set(l)}get hash(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}acquire(l,f,x,k){this.set(l,f,x,k)}contains(l){const f=l.level-this.level;return 0<=f&&this.row===l.row>>
f&&this.col===l.col>>f&&this.world===l.world}containsChild(l){const f=l.level-this.level;return 0<f&&this.row===l.row>>f&&this.col===l.col>>f&&this.world===l.world}equals(l){return this.level===l.level&&this.row===l.row&&this.col===l.col&&this.world===l.world}clone(){return new g(this)}release(){this.world=this.col=this.row=this.level=0}set(l,f,x,k){if(null==l)this.world=this.col=this.row=this.level=0;else if("object"===typeof l)this.level=l.level||0,this.row=l.row||0,this.col=l.col||0,this.world=
l.world||0;else if("string"===typeof l){const [u,t,m,a]=l.split("/");this.level=parseFloat(u);this.row=parseFloat(t);this.col=parseFloat(m);this.world=parseFloat(a)}else this.level=+l,this.row=+f,this.col=+x,this.world=+k||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return 0>=this.level?null:new g(this.level-1,this.row>>1,this.col>>1,this.world)}getNeighborId(l,f){return`${this.level}/${this.row+f}/${this.col+l}/${this.world}`}getChildKeys(){const l=
this.level+1,f=this.row<<1,x=this.col<<1,k=this.world;return[new g(l,f,x,k),new g(l,f,x+1,k),new g(l,f+1,x,k),new g(l,f+1,x+1,k)]}compareRowMajor(l){return this.row<l.row?-1:this.row>l.row?1:this.col<l.col?-1:this.col>l.col?1:0}}g.pool=new c(g,null,null,25,50);return g})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool","./TileKey"],function(c,g){class l{constructor(){this.spans=[]}acquire(f){this.lodInfo=f}release(){this.lodInfo=null;this.spans.length=0}*keys(){const f=
this.lodInfo;for(const {row:x,colFrom:k,colTo:u}of this.spans)for(let t=k;t<=u;t++){const m=f.getWorldForColumn(t);yield new g(f.level,x,f.normalizeCol(t),m)}}forEach(f,x){const {spans:k,lodInfo:u}=this,{level:t}=u;if(0!==k.length)for(const {row:m,colFrom:a,colTo:d}of k)for(let h=a;h<=d;h++)f.call(x,t,m,u.normalizeCol(h),u.getWorldForColumn(h))}}l.pool=new c(l);return l})},"esri/views/2d/tiling/TileSpan":function(){define(function(){class c{constructor(g,l,f){this.row=g;this.colFrom=l;this.colTo=
f}}return c})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../core/libs/gl-matrix-2/math/vec2 ../../support/QueueProcessor".split(" "),function(c,g,l,f,x,k,u,t,m,a){function d(e,r){e.length=0;r.forEach(C=>e.push(C));return e}const h=new Set,q=[],v=new Map,
n=[0,0];g=class extends g{constructor(e){super(e);this._keyToItem=new Map;this.concurrency=6;this.strategy="scale-first";this.tileInfoView=null}initialize(){const {concurrency:e,process:r,strategy:C}=this;this._queue=new a.QueueProcessor({concurrency:e,process:(A,b)=>{A=this._keyToItem.get(A);return r(A,{signal:b})},peeker:"scale-first"===C?A=>this._peekByScaleFirst(A):A=>this._peekByCenterFirst(A)})}destroy(){this.clear();this._queue=l.destroyMaybe(this._queue)}get length(){return this._queue?this._queue.length:
0}get onGoingCount(){return this._keyToItem.size}abort(e){this._queue.abort("string"===typeof e?e:e.id)}clear(){this._queue.clear();this._keyToItem.clear()}has(e){return"string"===typeof e?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){e="string"===typeof e?e:e.id;return this.has(e)&&this._queue.isOngoing(e)}pause(){this._queue.pause()}push(e){const r=e.key.id;if(this._queue.has(r))return this._queue.get(r);const C=this._queue.push(r),A=()=>{this._keyToItem.delete(r)};this._keyToItem.set(r,
e);C.then(A,A);return C}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const r=this.tileInfoView;let C=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;e.forEach(y=>{y=this._keyToItem.get(y);const F=this.tileInfoView.getTileScale(y.key);v.has(F)||(v.set(F,[]),C=Math.max(F,C),A=Math.min(F,A));v.get(F).push(y.key);h.add(F)});let b=this.state.scale;v.has(b)||(d(q,h),q.sort((y,F)=>y-F),b=q.reduce((y,F)=>Math.abs(F-b)<Math.abs(y-
b)?F:y,q[0]));b=Math.min(b,C);b=Math.max(b,A);e=v.get(b);const w=r.getClosestInfoForScale(b),p=w.getColumnForX(this.state.center[0]),B=w.getRowForY(this.state.center[1]);e.sort((y,F)=>{const H=w.denormalizeCol(y.col,y.world),J=w.denormalizeCol(F.col,F.world);return Math.sqrt((p-H)*(p-H)+(B-y.row)*(B-y.row))-Math.sqrt((p-J)*(p-J)+(B-F.row)*(B-F.row))});h.clear();v.clear();return e[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const r=this.tileInfoView,C=this.state.center;
let A=Number.POSITIVE_INFINITY,b;e.forEach(w=>{w=this._keyToItem.get(w);r.getTileCoords(n,w.key);const p=m.distance(n,C);p<A&&(A=p,b=w.key)});return b.id}};c.__decorate([f.property({constructOnly:!0})],g.prototype,"concurrency",void 0);c.__decorate([f.property({constructOnly:!0})],g.prototype,"process",void 0);c.__decorate([f.property()],g.prototype,"state",void 0);c.__decorate([f.property({constructOnly:!0})],g.prototype,"strategy",void 0);c.__decorate([f.property({constructOnly:!0})],g.prototype,
"tileInfoView",void 0);return g=c.__decorate([t.subclass("esri.views.2d.tiling.TileQueue")],g)})},"esri/views/support/QueueProcessor":function(){define("exports ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/ReactiveMap ../../core/scheduling ../../core/signal".split(" "),function(c,g,l,f,x,k,u){class t{constructor(a,d){this.item=a;this.controller=d;this.promise=null}}class m{constructor(a){this._task=this._schedule=null;this._deferreds=new x;this._controllers=new x;this._processingItems=
new x;this._pausedSignal=u.signal(!1);this.concurrency=1;a.concurrency&&(this.concurrency=a.concurrency);this._queue=new f(a.peeker);this.process=a.process;const d=a.scheduler;a.priority&&d&&(this._task=d.registerTask(a.priority,this))}destroy(){this.clear();this._schedule=g.removeMaybe(this._schedule);this._task=g.removeMaybe(this._task)}get updating(){return!!this._task?.updating||this.running}get length(){return this._processingItems.size+this._queue.length}abort(a){(a=this._controllers.get(a))&&
a.abort()}clear(){this._queue.clear();const a=[];this._controllers.forEach(d=>a.push(d));this._controllers.clear();a.forEach(d=>d.abort());this._processingItems.clear();this._cancelNext()}forEach(a){this._deferreds.forEach((d,h)=>a(h))}get(a){return(a=this._deferreds.get(a))?a.promise:void 0}isOngoing(a){return this._processingItems.has(a)}has(a){return this._deferreds.has(a)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(a,d){const h=this.get(a);if(h)return h;
const q=new AbortController;let v=null;d&&(v=l.onAbort(d,()=>q.abort()));const n=()=>{e.remove();null!=v&&v.remove();this._removeItem(a);this._queue.remove(a);this._scheduleNext()},e=l.onAbortOrThrow(q.signal,()=>{const C=this._processingItems.get(a);C&&C.controller.abort();n();r.reject(l.createAbortError())}),r=l.createResolver();this._deferreds.set(a,r);this._controllers.set(a,q);r.promise.then(n,n);this._queue.push(a);this._scheduleNext();return r.promise}last(){return this._queue.last()}lastPromise(){const a=
this.last();return a?this.get(a):null}peek(){return this._queue.peek()}popLast(){const a=this._queue.popLast();a&&(this._deferreds.get(a)?.reject(l.createAbortError("Removed from queue")),this._removeItem(a));return a}reset(){const a=[];this._processingItems.forEach(d=>a.push(d));this._processingItems.clear();for(const d of a)this._queue.push(d.item),d.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const a=[];
for(;this._queue.length;)a.push(this._queue.pop());this.clear();return a}get running(){return!this._pausedSignal.value&&0<this._queue.length&&this._processingItems.size<this.concurrency}runTask(a){for(;!a.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),a.madeProgress()}_removeItem(a){this._deferreds.delete(a);this._controllers.delete(a);this._processingItems.delete(a)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=
k.schedule(()=>{this._schedule=null;this._next()}))}_next(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(a,d){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).resolve(d))}_processError(a,d){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).reject(d))}_canProcessFulfillment(a){return this._deferreds.get(a.item)&&
this._processingItems.get(a.item)===a?!0:!1}_process(a){if(null!=a){var d=new AbortController,h=new t(a,d);this._processingItems.set(a,h);try{var q=this.process(a,d.signal)}catch(v){this._processError(h,v)}l.isPromiseLike(q)?(h.promise=q,q.then(v=>this._processResult(h,v),v=>this._processError(h,v))):this._processResult(h,q)}}get test(){return{update:a=>this.runTask(a)}}}c.QueueProcessor=m;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/tiling/TileStrategy":function(){define(["../../../geometry/support/aaBoundingRect",
"./TileCache","./TileCoverage","./TileKey"],function(c,g,l,f){const x=new f(0,0,0,0),k=new Map,u=[],t=[];class m{constructor(a){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;null!=a.resampling&&(this.resampling=a.resampling);a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&
(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&(this.buffer=a.buffer);a.cacheSize&&(this._tileCache=new g(a.cacheSize,this.tileInfoView,d=>{this.releaseTile(d)}))}destroy(){this.tileIndex.clear()}update(a){const {resampling:d,tileIndex:h}=this,{scale:q,center:v,resolution:n}=a.state,{minScale:e,maxScale:r}=this.tileInfoView,C=!a.stationary&&q>this._previousScale;this._previousScale=q;if(!d&&(q>e||q<r))this.tiles.length=0,this.clear();else if(a=this.tileInfoView.getTileCoverage(a.state,this.buffer,
this.resampling,this.coveragePolicy)){var {spans:A,lodInfo:b}=a,{level:w}=b;this.tiles.length=0;h.forEach(F=>F.visible=!0);var p=0,B=0;if(0<A.length)for(const {row:F,colFrom:H,colTo:J}of A)for(var y=H;y<=J;y++){p++;const Q=x.set(w,F,b.normalizeCol(y),b.getWorldForColumn(y)).id;let X=h.get(Q);if(X)X.isReady?(k.set(Q,X),B++):C||this._addParentTile(Q,k);else{if(this._tileCache?.has(Q)){if(X=this._tileCache.pop(Q),this.tileIndex.set(Q,X),X.isReady){k.set(Q,X);B++;continue}}else X=this.acquireTile(x),
this.tileIndex.set(Q,X);C||this._addParentTile(Q,k)}}p=B===p;for(const [F,H]of h)k.has(F)||(x.set(F),B=this.tileInfoView.intersects(a,x),y="purge"===this.cachePolicy?x.level!==w:x.level>w,!B||!C&&p?!y&&B||u.push(H):H.isReady?y&&"purge"===this.cachePolicy&&this._hasReadyAncestor(x,w)?u.push(H):t.push(H):y&&u.push(H));for(const F of t)F.isReady&&k.set(F.key.id,F);for(const F of u)this._tileCache?this._tileCache.add(F):this.releaseTile(F),h.delete(F.key.id);for(const F of k.values())this.tiles.push(F);
for(const F of h.values())k.has(F.key.id)||(F.visible=!1);this._tileCache?.prune(w,v,n);l.pool.release(a);t.length=0;u.length=0;k.clear()}else this.tiles.length=0,this.clear()}clear(){const {tileIndex:a}=this;for(const d of a.values())this.releaseTile(d);a.clear()}refresh(a){for(const d of this.tileIndex.values())this.tiles.includes(d)?a(d):u.push(d);for(const d of u)this.releaseTile(d),this.tileIndex.delete(d.key.id);this._tileCache?.clear()}updateCacheSize(a){this._tileCache&&(this._tileCache.maxSize=
a)}_addParentTile(a,d){let h=null;for(;;){a=this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)){if(h=this.tileIndex.get(a),h?.isReady){d.has(h.key.id)||d.set(h.key.id,h);break}}else if(this._tileCache?.has(a)&&(h=this._tileCache.pop(a),this.tileIndex.set(a,h),h?.isReady)){d.has(h.key.id)||d.set(h.key.id,h);break}}}_hasReadyAncestor(a,d){const h=c.create();this.tileInfoView.getTileBounds(h,a,!0);for(const q of this.tileIndex.values())if(q.isReady&&q.key.level>=d&&q.key.level<
a.level){const v=c.create();this.tileInfoView.getTileBounds(v,q.key,!0);if(c.contains(v,h))return!0}return!1}}return m})},"esri/views/2d/tiling/TileCache":function(){define(["../../../core/libs/gl-matrix-2/math/vec2"],function(c){class g{constructor(l,f,x){this.maxSize=l;this._tileInfoView=f;this._removedFunc=x;this._tilePerId=new Map;this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear();this._tileKeysPerLevel=[]}has(l){return this._tilePerId.has(l)}get(l){return this._tilePerId.get(l)}pop(l){const f=
this._tilePerId.get(l);if(f){var x=this._tileKeysPerLevel[f.key.level];this._tilePerId["delete"](l);for(let k=0;k<x.length;k++)if(x[k].id===l){x.splice(k,1);break}f.visible=!0;return f}}add(l){l.visible=!1;const f=l.key,x=f.id;this._tilePerId.has(x)||(this._tilePerId.set(x,l),l=f.level,this._tileKeysPerLevel[l]||(this._tileKeysPerLevel[l]=[]),this._tileKeysPerLevel[l].push(f))}prune(l,f,x){let k=this._tilePerId.size;if(!(k<=this.maxSize)){for(var u=this._tileKeysPerLevel.length-1;k>this.maxSize&&
0<=u;)u!==l&&(k=this._pruneAroundCenterTile(k,f,x,u)),u--;k>this.maxSize&&(k=this._pruneAroundCenterTile(k,f,x,l))}}_pruneAroundCenterTile(l,f,x,k){k=this._tileKeysPerLevel[k];if(!k||0===k.length)return l;const {size:u,origin:t}=this._tileInfoView.tileInfo,m=x*u[0],a=x*u[1],d=[0,0],h=[0,0];for(k.sort((q,v)=>{d[0]=t.x+m*(q.col+.5);d[1]=t.y-a*(q.row+.5);h[0]=t.x+m*(v.col+.5);h[1]=t.y-a*(v.row+.5);return c.squaredDistance(d,f)-c.squaredDistance(h,f)});0<k.length&&(x=k.pop(),this._removeTile(x.id),l--,
l!==this.maxSize););return l}_removeTile(l){const f=this._tilePerId.get(l);this._removedFunc&&f&&this._removedFunc(f);this._tilePerId["delete"](l)}}return g})},"esri/views/2d/ViewStateManager":function(){define("exports ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/Accessor ../../core/Error ../../core/has ../../core/Logger ../../core/reactiveUtils ../../core/screenUtils ../../core/Warning ../../core/accessorSupport/decorators/property ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../chunks/pe ../../geometry/Point ../../geometry/projection ../../geometry/support/spatialReferenceUtils ./PaddedViewState ./viewpointUtils ../../geometry/Extent".split(" "),
function(c,g,l,f,x,k,u,t,m,a,d,h,q,v,n,e,r,C,A,b,w){c.ViewStateManager=class extends x{constructor(p){super(p);this.constraints=null;this.ready=!1;this.resizeAlign="center";this.addHandles([m.watch(()=>this.constraints?.version,B=>{this.constraints&&B&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},m.sync)])}get center(){if(!this.ready)return this._get("center");const {center:p,spatialReference:B}=this.state.paddedViewState;this.state.commitProperty("id");
return new e({x:p[0],y:p[1],spatialReference:B})}set center(p){if(null!=p)if(this.ready){try{var B=this._project(p,this.state.spatialReference)}catch(y){t.getLogger(this).error(new k("mapview:invalid-center","could not project the value in the view's spatial reference",{input:p,error:y}));return}p=this.viewpoint;b.centerAt(p,p,B);this.viewpoint=p}else this._set("center",p)}get extent(){if(!this.ready)return this._get("extent");this.state.commitProperty("id");return this.state.paddedViewState.extent.clone()}set extent(p){if(null!=
p)if(p.width&&p.height)if(this.ready){try{var B=this._project(p,this.state.spatialReference)}catch(y){t.getLogger(this).error(new k("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:y}));return}p=this.viewpoint;b.setExtent(p,p,B,this.state.size,{constraints:this.constraints});this.viewpoint=p}else this._set("extent",p),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),this._set("zoom",void 0);else t.getLogger(this).error(new k("mapview:invalid-extent",
"invalid extent size"))}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(p){this.ready?(this.state.padding=p,this._set("padding",this.state.padding)):this._set("padding",p)}get resolution(){if(!this.ready)return 0;this.state.commitProperty("id");return this.state.resolution}get rotation(){if(!this.ready)return this._get("rotation");this.state.commitProperty("id");return this.state.rotation}set rotation(p){if(!isNaN(p))if(this.ready){var B=this.viewpoint;b.rotateTo(B,
B,p);this.viewpoint=B}else this._set("rotation",p)}get scale(){if(!this.ready)return this._get("scale");this.state.commitProperty("id");return this.state.scale}set scale(p){if(p&&!isNaN(p))if(this.ready){var B=this.viewpoint;b.scaleTo(B,B,p);this.viewpoint=B}else if(this._set("scale",p),this._set("zoom",void 0),p=this._get("extent"))this._set("extent",void 0),this._set("center",p.center)}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(p){if(null!=
p)if(this.ready){var B;try{var y=this._project(p,this.state.spatialReference);!p.scale||isNaN(p.scale)?B=new k("mapview:invalid-viewpoint",`invalid scale value of ${p.scale}`):null==p.targetGeometry&&(B=new k("mapview:invalid-viewpoint","geometry not defined"))}catch(F){B=new k("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:F})}B?t.getLogger(this).error(B):(this._scaleBeforeChangingSpatialReference=null,p=new f({targetGeometry:new e,scale:0,rotation:0}),
b.copy(p,y),this.constraints?.constrain(p,this.state.paddedViewState.viewpoint),this.state.viewpoint=p,this._set("viewpoint",p))}else this._set("viewpoint",p),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),this._set("scale",void 0)}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(p){if(0<=p)if(this.ready)if(p=this.constraints?.zoomToScale(p)??0){var B=this.viewpoint;b.scaleTo(B,B,p);this.viewpoint=B;this._set("zoom",
this.constraints?.scaleToZoom(this.scale)??-1)}else this._set("zoom",-1);else if(this._set("zoom",p),this._set("scale",void 0),p=this._get("extent"))this._set("extent",void 0),this._set("center",p.center)}getUserStartupOptions(p){if(!p[0]&&!p[1])return{center:void 0,rotation:void 0,scale:void 0};const {padding:B,constraints:y}=this;var F=this._get("center"),H=this._get("extent");const J=this._get("scale");var Q=this._get("rotation");const X=this._get("viewpoint");var Y=this._get("zoom");Y=null!=Y&&
null!=y?y.zoomToScale(Y)||void 0:void 0;let V=void 0,ba=void 0,da=void 0;const z=X?.targetGeometry;"extent"===z?.type?V=z:"point"===z?.type&&(ba=z,da=X?.scale);H=H??V;F=F??ba??H?.center;Q=Q??X?.rotation;p=(J??Y??da??(H&&b.extentToScale(H,[p[0]-B.left-B.right,p[1]-B.top-B.bottom])))||void 0;return{center:F,rotation:Q,scale:p}}startup(p,B,y,F){const H=p.targetGeometry;try{this._project(p,y)}catch(J){t.getLogger(this).warn(new d("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",
{center:H.toJSON(),spatialReference:y,error:J})),p.targetGeometry=F||new e({x:0,y:0,spatialReference:y})}this.constraints?.fit(p);this._set("state",new A({padding:this.padding,size:B,viewpoint:p}));this._set("ready",!0)}teardown(){this._set("ready",!1);const {center:[p,B],spatialReference:y,rotation:F,scale:H}=this.state.paddedViewState,J=new e({x:p,y:B,spatialReference:y});this._set("viewpoint",null);this._set("extent",null);this._set("center",J);this._set("zoom",-1);this._set("rotation",F);this._set("scale",
H);this._set("state",null)}changeSpatialReference(p){const B=this.state.paddedViewState.clone();if(null==this._scaleBeforeChangingSpatialReference)this._scaleBeforeChangingSpatialReference=B.scale;else{var y=B.viewpoint.clone();y.scale=this._scaleBeforeChangingSpatialReference;B.viewpoint=y}y=B.clone();const [F,H]=B.center;var J=null;try{J=this._project(new e({x:F,y:H,spatialReference:B.spatialReference}),p)}catch(Q){n.isLoaded()||t.getLogger(this).warn(new d("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",
{center:J?.toJSON(),spatialReference:p,error:Q}))}J||=new e({x:0,y:0,spatialReference:p});J=b.centerAt(new f({targetGeometry:new e,scale:0,rotation:0}),B.viewpoint,J);y.viewpoint=J;try{const Q=[B.size[0]/2,B.size[1]/2],X=[Q[0]+20,Q[1]],Y=B.toMap([0,0],X),{x:V,y:ba}=this._project(new e({x:Y[0],y:Y[1],spatialReference:B.spatialReference}),p);Y[0]=V;Y[1]=ba;y.toScreen(Y,Y);const da=b.angleBetween(Q,Y,X),z=Math.hypot(Y[0]-Q[0],Y[1]-Q[1])/20;!Number.isFinite(z)||4<Math.abs(z)?(J.rotation=0,J.targetGeometry=
new e({x:0,y:0,spatialReference:p})):(J.scale*=z,J.scale>u("mapview-srswitch-adjust-rotation-scale-threshold")?J.rotation=0:J.rotation+=Number.isFinite(da)?da:0)}catch{}this._get("constraints")?.constrain(J,void 0);this._get("state").viewpoint=J}resize(p,B){if(this.ready){var y=this.state,F=this.state.paddedViewState.viewpoint,H=this.state.paddedViewState.size.concat();y.size=[p,B];b.resize(F,F,H,this.state.paddedViewState.size,this.resizeAlign);F=this.constraints?.constrain(F,void 0)??F;this.state.viewpoint=
F}}toMap(p){if(!this.ready)return null;const [B,y]=this.state.toMap([0,0],[p.x,p.y]);return new e({x:B,y,spatialReference:this.state.spatialReference})}toScreen(p,B){if(!this.ready)return null;p=this._project(p,this.state.spatialReference);p=[p.x,p.y];!1===B?.pickClosestTarget?this.state.toScreen(p,p):this.state.toScreenClosest(p,p);return a.createScreenPoint(p[0],p[1])}_project(p,B){const y=p?.targetGeometry||p;if(!B)return p;if(!y)return null;if(B.imageCoordinateSystem||y.spatialReference?.imageCoordinateSystem||
C.equals(B,y.spatialReference))return p;const F=r.project(y,B);if(!F)throw new k("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:y,spatialReference:B});return"esri.Viewpoint"===p?.declaredClass?(p.targetGeometry=F,p):F}};g.__decorate([h.property({type:e})],c.ViewStateManager.prototype,"center",null);g.__decorate([h.property()],c.ViewStateManager.prototype,"constraints",void 0);g.__decorate([h.property({type:w})],c.ViewStateManager.prototype,
"extent",null);g.__decorate([h.property({value:{top:0,right:0,bottom:0,left:0},cast:p=>({top:0,right:0,bottom:0,left:0,...p})})],c.ViewStateManager.prototype,"padding",null);g.__decorate([h.property()],c.ViewStateManager.prototype,"ready",void 0);g.__decorate([h.property()],c.ViewStateManager.prototype,"resizeAlign",void 0);g.__decorate([h.property({readOnly:!0})],c.ViewStateManager.prototype,"resolution",null);g.__decorate([h.property({type:Number})],c.ViewStateManager.prototype,"rotation",null);
g.__decorate([h.property({type:Number})],c.ViewStateManager.prototype,"scale",null);g.__decorate([h.property({readOnly:!0})],c.ViewStateManager.prototype,"state",void 0);g.__decorate([h.property({type:f})],c.ViewStateManager.prototype,"viewpoint",null);g.__decorate([h.property()],c.ViewStateManager.prototype,"zoom",null);c.ViewStateManager=g.__decorate([v.subclass("esri.views.2d.ViewStateManager")],c.ViewStateManager);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/PaddedViewState":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/libs/gl-matrix-2/math/vec2 ../../core/libs/gl-matrix-2/factories/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(c,g,l,f,x,k,u,t,m,a,d,h){var q,v;let n=q=class extends g{constructor(){super(...arguments);this.bottom=this.right=this.top=this.left=0}clone(){return new q({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};c.__decorate([f.property()],n.prototype,"left",void 0);c.__decorate([f.property()],n.prototype,"top",void 0);c.__decorate([f.property()],n.prototype,"right",void 0);c.__decorate([f.property()],n.prototype,"bottom",void 0);n=q=c.__decorate([t.subclass("esri.views.2d.PaddedViewState.Padding")],
n);g=v=class extends h{constructor(...e){super(...e);this.paddedViewState=new h;this._updateContent=(()=>{const r=a.create();return()=>{var C=this._get("size");const A=this._get("padding");if(C&&A){var b=this.paddedViewState;m.set(r,A.left+A.right,A.top+A.bottom);m.subtract(r,C,r);m.copy(b.size,r);if(C=b.viewpoint)this.viewpoint=C}}})();this.addHandles(l.watch(()=>[this.size,this.padding],()=>this._updateContent(),l.sync));this.padding=new n;this.size=[0,0]}set padding(e){this._set("padding",e||new n)}set viewpoint(e){if(e){const r=
e.clone();this.paddedViewState.viewpoint=e;d.addPadding(r,e,this._get("size"),this._get("padding"));e=this._viewpoint2D;const C=r.targetGeometry;e.center[0]=C.x;e.center[1]=C.y;e.rotation=r.rotation;e.scale=r.scale;e.spatialReference=C.spatialReference;this._update()}}clone(){return new v({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};c.__decorate([f.property()],g.prototype,"paddedViewState",void 0);c.__decorate([f.property({type:n})],
g.prototype,"padding",null);c.__decorate([f.property()],g.prototype,"viewpoint",null);return g=v=c.__decorate([t.subclass("esri.views.2d.PaddedViewState")],g)})},"esri/views/2d/ViewState":function(){define("../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/libs/gl-matrix-2/math/common ../../core/libs/gl-matrix-2/math/mat2d ../../core/libs/gl-matrix-2/factories/mat2df32 ../../core/libs/gl-matrix-2/factories/mat2df64 ../../core/libs/gl-matrix-2/math/mat3 ../../core/libs/gl-matrix-2/factories/mat3f32 ../../core/libs/gl-matrix-2/math/vec2 ../../core/libs/gl-matrix-2/factories/vec2f32 ../../core/libs/gl-matrix-2/factories/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ../../geometry/support/normalizeUtils ./viewpointUtils ../../geometry/Extent ../../geometry/Point".split(" "),
function(c,g,l,f,x,k,u,t,m,a,d,h,q,v,n,e,r,C,A,b,w,p,B){var y;const F=[0,0];g=y=class extends f.JSONSupport{constructor(H){super(H);this._viewpoint2D={center:C.create(),rotation:0,scale:0,spatialReference:void 0};this.center=[0,0];this.extent=new p;this.id=0;this.inverseTransform=q.create();this.scale=this.rotation=this.resolution=0;this.transform=q.create();this.transformNoRotation=q.create();this.displayMat3=n.create();this.displayViewMat3=n.create();this.viewMat3=n.create();this.viewMat2d=h.create();
this.worldScreenWidth=0;this.size=[0,0]}set pixelRatio(H){this._set("pixelRatio",H);this._update()}set size(H){this._set("size",H);this._update()}set viewpoint(H){if(H){const J=this._viewpoint2D,Q=H.targetGeometry;J.center[0]=Q.x;J.center[1]=Q.y;J.rotation=H.rotation;J.scale=H.scale;J.spatialReference=Q.spatialReference}this._update()}copy(H){const J=this.size,Q=this.viewpoint;Q&&J?(this.viewpoint=w.copy(Q,H.viewpoint),this._set("size",e.copy(J,H.size))):(this.viewpoint=H.viewpoint.clone(),this._set("size",
[H.size[0],H.size[1]]));this._set("pixelRatio",H.pixelRatio);return this}clone(){return new y({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(H,J,Q){if(A.isVec2(J))return e.transformMat2d(H,J,this.inverseTransform);F[0]=J;F[1]=Q;return e.transformMat2d(H,F,this.inverseTransform)}toScreen(H,J,Q){if(A.isVec2(J))return e.transformMat2d(H,J,this.transform);F[0]=J;F[1]=Q;return e.transformMat2d(H,F,this.transform)}toScreenNoRotation(H,J,Q){if(A.isVec2(J))return e.transformMat2d(H,
J,this.transformNoRotation);F[0]=J;F[1]=Q;return e.transformMat2d(H,F,this.transformNoRotation)}toScreenClosest(H,J,Q){A.isVec2(J)?(F[0]=J[0],F[1]=J[1]):(F[0]=J,F[1]=Q);[J]=F;const {center:X,extent:Y,spatialReference:V,transform:ba}=this;if(J<Y.xmin||J>Y.xmax)F[0]=b.getClosestDenormalizedXToReference(J,X[0],V);return e.transformMat2d(H,F,ba)}getScreenTransform(H,J){const {center:Q}=this._viewpoint2D,X=this._get("pixelRatio")||1,Y=this._get("size");w.getMatrix(H,Q,Y,J,0,X);return H}_update(){const {center:H,
spatialReference:J,scale:Q,rotation:X}=this._viewpoint2D,Y=this._get("pixelRatio")||1,V=this._get("size"),ba=new l({targetGeometry:new B(H[0],H[1],J),scale:Q,rotation:X});this._set("viewpoint",ba);if(V&&J&&Q){this.resolution=w.getResolution(ba);this.rotation=X;this.scale=Q;this.spatialReference=J;e.copy(this.center,H);v.set(this.displayMat3,0!==V[0]?2/V[0]:0,0,0,0,0!==V[1]?-2/V[1]:0,0,-1,1,1);var da=v.identity(this.viewMat3),z=r.fromValues(V[0]/2,V[1]/2),E=r.fromValues(-V[0]/2,-V[1]/2),L=a.toRadian(X);
v.translate(da,da,z);v.rotate(da,da,L);v.translate(da,da,E);v.multiply(this.displayViewMat3,this.displayMat3,da);da=d.fromTranslation(this.viewMat2d,z);d.rotate(da,da,L);d.translate(da,da,E);w.getExtent(this.extent,ba,V);w.getTransform(this.transform,ba,V,Y);d.invert(this.inverseTransform,this.transform);w.getTransformNoRotation(this.transformNoRotation,ba,V,Y);this.worldScreenWidth=w.getWorldScreenWidth(this.spatialReference,this.resolution);this._set("id",this.id+1);return this}}};c.__decorate([x.property({readOnly:!0})],
g.prototype,"id",void 0);c.__decorate([x.property({value:1,json:{write:!0}})],g.prototype,"pixelRatio",null);c.__decorate([x.property({json:{write:!0}})],g.prototype,"size",null);c.__decorate([x.property()],g.prototype,"spatialReference",void 0);c.__decorate([x.property({type:l,json:{write:!0}})],g.prototype,"viewpoint",null);return g=y=c.__decorate([m.subclass("esri.views.2d.ViewState")],g)})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["exports"],function(c){function g(){const m=
new Float32Array(6);m[0]=1;m[3]=1;return m}function l(m){const a=new Float32Array(6);a[0]=m[0];a[1]=m[1];a[2]=m[2];a[3]=m[3];a[4]=m[4];a[5]=m[5];return a}function f(m,a,d,h,q,v){const n=new Float32Array(6);n[0]=m;n[1]=a;n[2]=d;n[3]=h;n[4]=q;n[5]=v;return n}function x(m,a){return new Float32Array(m,a,6)}function k(m,a,d,h){const q=a[h];a=a[h+1];m[h]=d[0]*q+d[2]*a+d[4];m[h+1]=d[1]*q+d[3]*a+d[5]}function u(m,a,d,h=0,q=0,v=2){for(q=q||a.length/v;h<q;h++)k(m,a,d,h*v)}const t=Object.freeze(Object.defineProperty({__proto__:null,
clone:l,create:g,createView:x,fromValues:f,transform:k,transformMany:u},Symbol.toStringTag,{value:"Module"}));c.clone=l;c.create=g;c.createView=x;c.fromValues=f;c.mat2df32=t;c.transform=k;c.transformMany=u;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["exports","./common"],function(c,g){function l(z,E){z[0]=E[0];z[1]=E[1];z[2]=E[2];z[3]=E[4];z[4]=E[5];z[5]=E[6];z[6]=E[8];z[7]=E[9];z[8]=E[10];return z}function f(z,E){z[0]=
E[0];z[1]=E[1];z[2]=E[2];z[3]=E[3];z[4]=E[4];z[5]=E[5];z[6]=E[6];z[7]=E[7];z[8]=E[8];return z}function x(z,E,L,U,G,I,M,T,W,aa){z[0]=E;z[1]=L;z[2]=U;z[3]=G;z[4]=I;z[5]=M;z[6]=T;z[7]=W;z[8]=aa;return z}function k(z){z[0]=1;z[1]=0;z[2]=0;z[3]=0;z[4]=1;z[5]=0;z[6]=0;z[7]=0;z[8]=1;return z}function u(z,E){if(z===E){const L=E[1],U=E[2],G=E[5];z[1]=E[3];z[2]=E[6];z[3]=L;z[5]=E[7];z[6]=U;z[7]=G}else z[0]=E[0],z[1]=E[3],z[2]=E[6],z[3]=E[1],z[4]=E[4],z[5]=E[7],z[6]=E[2],z[7]=E[5],z[8]=E[8];return z}function t(z,
E){const L=E[0],U=E[1],G=E[2],I=E[3],M=E[4],T=E[5],W=E[6],aa=E[7];E=E[8];const ea=E*M-T*aa,D=-E*I+T*W,N=aa*I-M*W;let K=L*ea+U*D+G*N;if(!K)return null;K=1/K;z[0]=ea*K;z[1]=(-E*U+G*aa)*K;z[2]=(T*U-G*M)*K;z[3]=D*K;z[4]=(E*L-G*W)*K;z[5]=(-T*L+G*I)*K;z[6]=N*K;z[7]=(-aa*L+U*W)*K;z[8]=(M*L-U*I)*K;return z}function m(z,E){const L=E[0],U=E[1],G=E[2],I=E[3],M=E[4],T=E[5],W=E[6],aa=E[7];E=E[8];z[0]=M*E-T*aa;z[1]=G*aa-U*E;z[2]=U*T-G*M;z[3]=T*W-I*E;z[4]=L*E-G*W;z[5]=G*I-L*T;z[6]=I*aa-M*W;z[7]=U*W-L*aa;z[8]=L*
M-U*I;return z}function a(z){const E=z[3],L=z[4],U=z[5],G=z[6],I=z[7],M=z[8];return z[0]*(M*L-U*I)+z[1]*(-M*E+U*G)+z[2]*(I*E-L*G)}function d(z,E,L){const U=E[0],G=E[1],I=E[2],M=E[3],T=E[4],W=E[5],aa=E[6],ea=E[7];E=E[8];const D=L[0],N=L[1],K=L[2],P=L[3],R=L[4],Z=L[5],fa=L[6],ja=L[7];L=L[8];z[0]=D*U+N*M+K*aa;z[1]=D*G+N*T+K*ea;z[2]=D*I+N*W+K*E;z[3]=P*U+R*M+Z*aa;z[4]=P*G+R*T+Z*ea;z[5]=P*I+R*W+Z*E;z[6]=fa*U+ja*M+L*aa;z[7]=fa*G+ja*T+L*ea;z[8]=fa*I+ja*W+L*E;return z}function h(z,E,L){const U=E[0],G=E[1],
I=E[2],M=E[3],T=E[4],W=E[5],aa=E[6],ea=E[7];E=E[8];const D=L[0];L=L[1];z[0]=U;z[1]=G;z[2]=I;z[3]=M;z[4]=T;z[5]=W;z[6]=D*U+L*M+aa;z[7]=D*G+L*T+ea;z[8]=D*I+L*W+E;return z}function q(z,E,L){const U=E[0],G=E[1],I=E[2],M=E[3],T=E[4],W=E[5],aa=E[6],ea=E[7];E=E[8];const D=Math.sin(L);L=Math.cos(L);z[0]=L*U+D*M;z[1]=L*G+D*T;z[2]=L*I+D*W;z[3]=L*M-D*U;z[4]=L*T-D*G;z[5]=L*W-D*I;z[6]=aa;z[7]=ea;z[8]=E;return z}function v(z,E,L){const U=L[0],G=L[1];L=L[2];z[0]=U*E[0];z[1]=U*E[1];z[2]=U*E[2];z[3]=G*E[3];z[4]=G*
E[4];z[5]=G*E[5];z[6]=L*E[6];z[7]=L*E[7];z[8]=L*E[8];return z}function n(z,E,L){const U=L[0];L=L[1];z[0]=U*E[0];z[1]=U*E[1];z[2]=U*E[2];z[3]=L*E[3];z[4]=L*E[4];z[5]=L*E[5];return z}function e(z,E){z[0]=1;z[1]=0;z[2]=0;z[3]=0;z[4]=1;z[5]=0;z[6]=E[0];z[7]=E[1];z[8]=1;return z}function r(z,E){const L=Math.sin(E);E=Math.cos(E);z[0]=E;z[1]=L;z[2]=0;z[3]=-L;z[4]=E;z[5]=0;z[6]=0;z[7]=0;z[8]=1;return z}function C(z,E){z[0]=E[0];z[1]=0;z[2]=0;z[3]=0;z[4]=E[1];z[5]=0;z[6]=0;z[7]=0;z[8]=1;return z}function A(z,
E){z[0]=E[0];z[1]=E[1];z[2]=0;z[3]=E[2];z[4]=E[3];z[5]=0;z[6]=E[4];z[7]=E[5];z[8]=1;return z}function b(z,E){var L=E[0],U=E[1],G=E[2];E=E[3];var I=L+L,M=U+U;const T=G+G;L*=I;const W=U*I;U*=M;const aa=G*I,ea=G*M;G*=T;I*=E;M*=E;E*=T;z[0]=1-U-G;z[3]=W-E;z[6]=aa+M;z[1]=W+E;z[4]=1-L-G;z[7]=ea-I;z[2]=aa-M;z[5]=ea+I;z[8]=1-L-U;return z}function w(z,E){const L=E[0],U=E[1],G=E[2],I=E[4],M=E[5],T=E[6],W=E[8],aa=E[9];E=E[10];const ea=E*M-T*aa,D=-E*I+T*W,N=aa*I-M*W;var K=L*ea+U*D+G*N;if(!K)return null;K=1/K;
z[0]=ea*K;z[1]=(-E*U+G*aa)*K;z[2]=(T*U-G*M)*K;z[3]=D*K;z[4]=(E*L-G*W)*K;z[5]=(-T*L+G*I)*K;z[6]=N*K;z[7]=(-aa*L+U*W)*K;z[8]=(M*L-U*I)*K;return z}function p(z,E){const L=E[0],U=E[1],G=E[2],I=E[3],M=E[4],T=E[5],W=E[6],aa=E[7];var ea=E[8],D=E[9],N=E[10],K=E[11];const P=E[12],R=E[13],Z=E[14];E=E[15];const fa=L*T-U*M,ja=L*W-G*M,ia=L*aa-I*M,O=U*W-G*T,S=U*aa-I*T,ca=G*aa-I*W,ha=ea*R-D*P,ma=ea*Z-N*P;ea=ea*E-K*P;const ka=D*Z-N*R;D=D*E-K*R;N=N*E-K*Z;K=fa*N-ja*D+ia*ka+O*ea-S*ma+ca*ha;if(!K)return null;K=1/K;z[0]=
(T*N-W*D+aa*ka)*K;z[1]=(W*ea-M*N-aa*ma)*K;z[2]=(M*D-T*ea+aa*ha)*K;z[3]=(G*D-U*N-I*ka)*K;z[4]=(L*N-G*ea+I*ma)*K;z[5]=(U*ea-L*D-I*ha)*K;z[6]=(R*ca-Z*S+E*O)*K;z[7]=(Z*ia-P*ca-E*ja)*K;z[8]=(P*S-R*ia+E*fa)*K;return z}function B(z,E,L){z[0]=2/E;z[1]=0;z[2]=0;z[3]=0;z[4]=-2/L;z[5]=0;z[6]=-1;z[7]=1;z[8]=1;return z}function y(z){return"mat3("+z[0]+", "+z[1]+", "+z[2]+", "+z[3]+", "+z[4]+", "+z[5]+", "+z[6]+", "+z[7]+", "+z[8]+")"}function F(z){return Math.sqrt(z[0]**2+z[1]**2+z[2]**2+z[3]**2+z[4]**2+z[5]**
2+z[6]**2+z[7]**2+z[8]**2)}function H(z,E,L){z[0]=E[0]+L[0];z[1]=E[1]+L[1];z[2]=E[2]+L[2];z[3]=E[3]+L[3];z[4]=E[4]+L[4];z[5]=E[5]+L[5];z[6]=E[6]+L[6];z[7]=E[7]+L[7];z[8]=E[8]+L[8];return z}function J(z,E,L){z[0]=E[0]-L[0];z[1]=E[1]-L[1];z[2]=E[2]-L[2];z[3]=E[3]-L[3];z[4]=E[4]-L[4];z[5]=E[5]-L[5];z[6]=E[6]-L[6];z[7]=E[7]-L[7];z[8]=E[8]-L[8];return z}function Q(z,E,L){z[0]=E[0]*L;z[1]=E[1]*L;z[2]=E[2]*L;z[3]=E[3]*L;z[4]=E[4]*L;z[5]=E[5]*L;z[6]=E[6]*L;z[7]=E[7]*L;z[8]=E[8]*L;return z}function X(z,E,
L,U){z[0]=E[0]+L[0]*U;z[1]=E[1]+L[1]*U;z[2]=E[2]+L[2]*U;z[3]=E[3]+L[3]*U;z[4]=E[4]+L[4]*U;z[5]=E[5]+L[5]*U;z[6]=E[6]+L[6]*U;z[7]=E[7]+L[7]*U;z[8]=E[8]+L[8]*U;return z}function Y(z,E){return z[0]===E[0]&&z[1]===E[1]&&z[2]===E[2]&&z[3]===E[3]&&z[4]===E[4]&&z[5]===E[5]&&z[6]===E[6]&&z[7]===E[7]&&z[8]===E[8]}function V(z,E){const L=z[0],U=z[1],G=z[2],I=z[3],M=z[4],T=z[5],W=z[6],aa=z[7];z=z[8];const ea=E[0],D=E[1],N=E[2],K=E[3],P=E[4],R=E[5],Z=E[6],fa=E[7];E=E[8];const ja=g.getEpsilon();return Math.abs(L-
ea)<=ja*Math.max(1,Math.abs(L),Math.abs(ea))&&Math.abs(U-D)<=ja*Math.max(1,Math.abs(U),Math.abs(D))&&Math.abs(G-N)<=ja*Math.max(1,Math.abs(G),Math.abs(N))&&Math.abs(I-K)<=ja*Math.max(1,Math.abs(I),Math.abs(K))&&Math.abs(M-P)<=ja*Math.max(1,Math.abs(M),Math.abs(P))&&Math.abs(T-R)<=ja*Math.max(1,Math.abs(T),Math.abs(R))&&Math.abs(W-Z)<=ja*Math.max(1,Math.abs(W),Math.abs(Z))&&Math.abs(aa-fa)<=ja*Math.max(1,Math.abs(aa),Math.abs(fa))&&Math.abs(z-E)<=ja*Math.max(1,Math.abs(z),Math.abs(E))}function ba(z){const E=
g.getEpsilon(),L=z[0],U=z[1],G=z[2],I=z[3],M=z[4],T=z[5],W=z[6],aa=z[7];z=z[8];return Math.abs(1-(L*L+I*I+W*W))<=E&&Math.abs(1-(U*U+M*M+aa*aa))<=E&&Math.abs(1-(G*G+T*T+z*z))<=E}const da=Object.freeze(Object.defineProperty({__proto__:null,add:H,adjoint:m,copy:f,determinant:a,equals:V,exactEquals:Y,frob:F,fromMat2d:A,fromMat4:l,fromQuat:b,fromRotation:r,fromScaling:C,fromTranslation:e,identity:k,invert:t,isOrthoNormal:ba,mul:d,multiply:d,multiplyScalar:Q,multiplyScalarAndAdd:X,normalFromMat4:p,normalFromMat4Legacy:w,
projection:B,rotate:q,scale:v,scaleByVec2:n,set:x,str:y,sub:J,subtract:J,translate:h,transpose:u},Symbol.toStringTag,{value:"Module"}));c.add=H;c.adjoint=m;c.copy=f;c.determinant=a;c.equals=V;c.exactEquals=Y;c.frob=F;c.fromMat2d=A;c.fromMat4=l;c.fromQuat=b;c.fromRotation=r;c.fromScaling=C;c.fromTranslation=e;c.identity=k;c.invert=t;c.isOrthoNormal=ba;c.mat3=da;c.mul=d;c.multiply=d;c.multiplyScalar=Q;c.multiplyScalarAndAdd=X;c.normalFromMat4=p;c.normalFromMat4Legacy=w;c.projection=B;c.rotate=q;c.scale=
v;c.scaleByVec2=n;c.set=x;c.str=y;c.sub=J;c.subtract=J;c.translate=h;c.transpose=u;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["exports"],function(c){function g(){const u=new Float32Array(9);u[0]=1;u[4]=1;u[8]=1;return u}function l(u){const t=new Float32Array(9);t[0]=u[0];t[1]=u[1];t[2]=u[2];t[3]=u[3];t[4]=u[4];t[5]=u[5];t[6]=u[6];t[7]=u[7];t[8]=u[8];return t}function f(u,t,m,a,d,h,q,v,n){const e=new Float32Array(9);
e[0]=u;e[1]=t;e[2]=m;e[3]=a;e[4]=d;e[5]=h;e[6]=q;e[7]=v;e[8]=n;return e}function x(u,t){return new Float32Array(u,t,9)}const k=Object.freeze(Object.defineProperty({__proto__:null,clone:l,create:g,createView:x,fromValues:f},Symbol.toStringTag,{value:"Module"}));c.clone=l;c.create=g;c.createView=x;c.fromValues=f;c.mat3f32=k;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["exports"],function(c){function g(){return new Float32Array(2)}
function l(n){const e=new Float32Array(2);e[0]=n[0];e[1]=n[1];return e}function f(n,e){const r=new Float32Array(2);r[0]=n;r[1]=e;return r}function x(n,e){return new Float32Array(n,e,2)}function k(){return g()}function u(){return f(1,1)}function t(){return f(1,0)}function m(){return f(0,1)}const a=g(),d=u(),h=t(),q=m(),v=Object.freeze(Object.defineProperty({__proto__:null,ONES:d,UNIT_X:h,UNIT_Y:q,ZEROS:a,clone:l,create:g,createView:x,fromValues:f,ones:u,unitX:t,unitY:m,zeros:k},Symbol.toStringTag,
{value:"Module"}));c.ONES=d;c.UNIT_X=h;c.UNIT_Y=q;c.ZEROS=a;c.clone=l;c.create=g;c.createView=x;c.fromValues=f;c.ones=u;c.unitX=t;c.unitY=m;c.vec2f32=v;c.zeros=k;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["exports"],function(c){function g(f){return f instanceof Float32Array&&2<=f.length}function l(f){return Array.isArray(f)&&2<=f.length}c.isVec2=function(f){return g(f)||l(f)};c.isVec2f32=g;c.isVec2f64=l;Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/MapViewInputManager":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(c,g,l,f,x,k,u,t,m,a,d,h,q,v,n,e,r,C,A,b,w,p,B,y,F,H,J){var Q={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},X={zoomIn:["\x3d","+"],zoomOut:["-","_"]},Y={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};g=class extends g{initialize(){const V=()=>this.view?.ready;this.addHandles([f.when(()=>!V(),()=>this._disconnect()),f.when(V,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??
!1}isModifierKeyDown(V){return this._inputManager?.isModifierKeyDown(V)??!1}_disconnect(){this.view.viewEvents.disconnect();this._inputManager=l.destroyMaybe(this._inputManager)}_connect(){const V=new b.BrowserEventSource(this.view.surface,this.view.input);var ba=[new F.ImmediateDoubleClick,new H.PointerClickHoldAndDrag,new J.SingleAndDoubleClick,new y.Drag(this.view.navigation),new B.DoubleTapDrag];ba=new w.InputManager({eventSource:V,recognizers:ba});ba.installHandlers("prevent-context-menu",[new p.PreventContextMenu],
w.ViewEventPriorities.INTERNAL);ba.installHandlers("navigation",[new A.PinchRotateAndZoom(this.view),new v.GamepadNavigation(this.view),new C.MouseWheelZoom(this.view),new a.DoubleClickZoom(this.view),new a.DoubleClickZoom(this.view,["Ctrl"]),new h.DragPan(this.view,"primary"),new n.KeyPan(this.view,Q),new r.KeyZoom(this.view,X),new e.KeyRotate(this.view,Y),new q.DragRotate(this.view,"secondary"),new d.DoubleTapDragZoom(this.view,"touch")],w.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(ba);
this._source=V;this._inputManager=ba;f.watch(()=>this.view?.navigation?.browserTouchPanEnabled,da=>{this._source&&(this._source.browserTouchPanningEnabled=!da)},f.initial)}get test(){return{inputManager:this._inputManager}}};c.__decorate([x.property()],g.prototype,"view",void 0);c.__decorate([x.property()],g.prototype,"latestPointerType",null);c.__decorate([x.property()],g.prototype,"latestPointerLocation",null);c.__decorate([x.property()],g.prototype,"multiTouchActive",null);return g=c.__decorate([m.subclass("esri.views.2d.input.MapViewInputManager")],
g)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["exports","../../../input/InputHandler","../../../input/handlers/support"],function(c,g,l){class f extends g.InputHandler{constructor(x,k){super(!0);this._view=x;this.registerIncoming("double-click",k,u=>this._handleDoubleClick(u,k))}_handleDoubleClick(x,k){l.eventMatchesPointerAction(x.data,"primary")&&(x.stopPropagation(),k?this._view.mapViewNavigation.zoomOut([x.data.x,x.data.y]):this._view.mapViewNavigation.zoomIn([x.data.x,
x.data.y]))}}c.DoubleClickZoom=f;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/handlers/support":function(){define(["exports"],function(c){c.eventMatchesMousePointerAction=function(g,l){if("touch"===g.pointerType)return!1;switch(l){case "primary":return 0===g.button;case "secondary":return 2===g.button;case "tertiary":return 1===g.button}};c.eventMatchesPointerAction=function(g,l){switch(l){case "primary":return"touch"===g.pointerType||0===g.button;case "secondary":return"touch"!==
g.pointerType&&2===g.button;case "tertiary":return"touch"!==g.pointerType&&1===g.button}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["exports","../../../../core/has","../../../input/InputHandler"],function(c,g,l){class f extends l.InputHandler{constructor(x,k,u){super(!0);this.view=x;this.pointerType=k;this.registerIncoming("double-tap-drag",u,t=>this._handleDoubleTapDrag(t))}_handleDoubleTapDrag(x){var {data:k}=
x,{pointerType:u}=k;if(u===this.pointerType){x.stopPropagation();var {action:t,delta:m}=k;({view:k}=this);({mapViewNavigation:x}=k);switch(t){case "begin":({scale:k}=k);this._currentScale=this._startScale=k;this._previousDelta=m;x.begin();break;case "update":if(this._previousDelta.y===m.y)break;this._previousDelta=m;k=this._startScale*1.015**m.y;x.setViewpointImmediate(k/this._currentScale);this._currentScale=k;break;case "end":({constraints:u}=k);const {effectiveLODs:a,snapToZoom:d}=u;d&&a?(k=u.snapScale(this._currentScale),
k=(0<m.y?Math.max(k,u.snapToPreviousScale(this._startScale)):Math.min(k,u.snapToNextScale(this._startScale)))/this._currentScale,x.zoom(k)):x.end()}}}}c.DoubleTapDragZoom=f;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DragPan":function(){define(["exports","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(c,g,l,f){class x extends l.InputHandler{constructor(k,u,t){super(!0);this.view=k;this.pointerAction=
u;this.registerIncoming("drag",t,m=>this._handleDrag(m));this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(k){super.onInstall(k);this._dragEventSeparator=new g.DragEventSeparator({start:(u,t)=>{this.view.mapViewNavigation.pan.begin(this.view,t.data);t.stopPropagation()},update:(u,t)=>{this.view.mapViewNavigation.pan.update(this.view,t.data);t.stopPropagation()},end:(u,t)=>{this.view.mapViewNavigation.pan.end(this.view,t.data);t.stopPropagation()},condition:(u,t)=>1===
u&&f.eventMatchesPointerAction(t.data,this.pointerAction)})}_handleDrag(k){const u=this.view.mapViewNavigation;u.pinch.zoomMomentum||u.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(k)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}c.DragPan=x;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/DragEventSeparator":function(){define(["exports"],function(c){class g{constructor(l){this._callbacks=l;
this._currentCount=0;this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(l){const f=l.data,x=f.pointers.size;switch(f.action){case "start":this._currentCount=x;this._emitStart(l);break;case "added":this._emitEnd(this._previousEvent);this._currentCount=x;this._emitStart(l);break;case "update":this._emitUpdate(l);break;case "removed":this._startEvent&&this._emitEnd(this._previousEvent);this._currentCount=x;this._emitStart(l);break;case "end":this._emitEnd(l),this._currentCount=0}this._previousEvent=
l}_emitStart(l){this._startEvent=l;this._callbacks.condition?.(this._currentCount,l)&&this._callbacks.start(this._currentCount,l,this._startEvent)}_emitUpdate(l){this._callbacks.condition?.(this._currentCount,l)&&this._callbacks.update(this._currentCount,l,this._startEvent)}_emitEnd(l){this._callbacks.condition?.(this._currentCount,l)&&this._callbacks.end(this._currentCount,l,this._startEvent);this._startEvent=null}}c.DragEventSeparator=g;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/input/handlers/DragRotate":function(){define(["exports","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(c,g,l,f){class x extends l.InputHandler{constructor(k,u,t){super(!0);this._view=k;this.pointerAction=u;const m=this._view.mapViewNavigation;this._dragEventSeparator=new g.DragEventSeparator({start:(a,d)=>{m.rotate.begin(this._view,d.data);d.stopPropagation()},update:(a,d)=>{m.rotate.update(this._view,d.data);d.stopPropagation()},
end:(a,d)=>{m.rotate.end();d.stopPropagation()},condition:(a,d)=>1===a&&f.eventMatchesPointerAction(d.data,this.pointerAction)});this.registerIncoming("drag",t,a=>this._dragEventSeparator.handle(a))}}c.DragRotate=x;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("exports ../../../../core/Handles ../../../../core/reactiveUtils ../../../../core/scheduling ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),
function(c,g,l,f,x,k,u){class t extends k.InputHandler{constructor(m){super(!0);this._view=m;this._frameTask=null;this._watchHandles=new g;this._currentDevice=null;this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};this._handle=this.registerIncoming("gamepad",a=>this._handleGamePadEvent(a));this._handle.pause()}onInstall(m){super.onInstall(m);this._watchHandles.add([l.watch(()=>this._view.navigation.gamepad?.enabled,a=>{a?(this._handle.resume(),this._frameTask||(this._frameTask=f.addFrameTask({update:d=>
this._frameUpdate(d.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},l.initial)])}onUninstall(){this._watchHandles.removeAll();this._frameTask&&(this._frameTask.remove(),this._frameTask=null);super.onUninstall()}_handleGamePadEvent(m){const a=this._view.navigation.gamepad.device;a&&m.data.device!==a||this._currentDevice&&this._currentDevice!==m.data.device||("end"===m.data.action?(this._currentDevice=null,u.resetTransformation(this._transformation)):
(this._currentDevice=m.data.device,u.extractTransformation(m.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(m){const a=this._transformation;if(!u.isZeroTransformation(a)){var d=this._view.viewpoint.clone(),h=.7*this._view.navigation.gamepad.velocityFactor*m;x.translateBy(d,d,[a.translation[0]*h,-a.translation[1]*h]);h=this._view.size;x.scaleAndRotateBy(d,d,1+6E-4*a.translation[2]*m,this._view.constraints.rotationEnabled?.06*-a.heading*m:0,[h[0]/2,h[1]],h);m=this._view.constraints.constrain(d,
this._view.viewpoint);this._view.viewpoint=m}}}c.GamepadNavigation=t;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["exports","../../chunks/vec32"],function(c,g){function l(f){let x=f*f;0>f&&(x*=-1);return x}c.extractTransformation=function(f,x,k){const u=f.state;f=f.device;x="forward-down"===x.tiltDirection?1:-1;"standard"===f.deviceType?(k.translation[0]=l(u.axes[0]),k.translation[1]=l(u.axes[1]),k.translation[2]=
l(u.buttons[7])-l(u.buttons[6]),k.heading=l(u.axes[2]),k.tilt=l(u.axes[3])):"spacemouse"===f.deviceType&&(k.translation[0]=1.2*l(u.axes[0]),k.translation[1]=1.2*l(u.axes[1]),k.translation[2]=2*-l(u.axes[2]),k.heading=1.2*l(u.axes[5]),k.tilt=1.2*l(u.axes[3]));k.tilt*=x;g.scale(k.translation,k.translation,1);return k};c.extractTransformationKeyboard=function(f,x){x.translation[0]=f[1]-f[0];x.translation[1]=f[3]-f[2];x.translation[2]=f[4]-f[5];x.heading=f[7]-f[6];x.tilt=f[8]-f[9];x.zoom=f[10]-f[11];
return x};c.isZeroTransformation=function(f){return 0===f.translation[0]&&0===f.translation[1]&&0===f.translation[2]&&0===f.heading&&0===f.tilt&&0===f.zoom};c.resetTransformation=function(f){f.translation[0]=0;f.translation[1]=0;f.translation[2]=0;f.heading=0;f.tilt=0;return f};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyPan":function(){define(["exports","../../../input/InputHandler","../../../input/VisibilityChange"],function(c,g,l){class f extends g.InputHandler{constructor(x,
k,u){super(!0);this.view=x;this.keys=k;this._isSticky=!1;this._pressedKeys=new Set;this._currentDirection=this._timeout=void 0;this._stickyKeyDuration=200;this._handleKey=t=>{var m=this._keyMap[t.data.key];t.modifiers.has("Meta")||t.modifiers.has("Ctrl")?this._stopMovement():null!=m&&(t.stopPropagation(),t.preventDefault(),t="key-down"===t.type,this._pressedKeys[t?"add":"delete"](m),t?this._direction!==m&&(this._direction=m,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})):
(m=0<this._pressedKeys.size,void 0===this._timeout||m?this._handlePopKey():this._isSticky=!0))};this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop();null==this._direction&&this._stopMovement()};this._stopMovement=()=>{this._isSticky=!1;this._direction=void 0;this._pressedKeys.clear();this._setTimeout(void 0)};this._keyMap={[k.left]:"left",[k.right]:"right",[k.up]:"up",[k.down]:"down"};this.registerIncoming("key-down",u,this._handleKey);this.registerIncoming("key-up",u,this._handleKey);
this.registerIncoming("blur",u,this._stopMovement);this._visibilityHandle=l.onVisibilityChange(t=>t?null:this._stopMovement())}onUninstall(){this._stopMovement();this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(x){const k=null!=this._currentDirection;if(null!=x){if(k||this.view.mapViewNavigation.begin(),this._currentDirection!==x)switch(x){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();
break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}}else k&&this.view.mapViewNavigation.stop();this._currentDirection=x}_setTimeout(x){clearTimeout(this._timeout);this._timeout=void 0===x?void 0:setTimeout(()=>{this._timeout=void 0;x()},this._stickyKeyDuration)}}c.KeyPan=f;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/VisibilityChange":function(){define(["exports"],function(c){c.onVisibilityChange=
function(g){const l=()=>g("visible"===document.visibilityState);document.addEventListener("visibilitychange",l);return{remove:()=>document.addEventListener("visibilitychange",l)}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["exports","../../../input/InputHandler","../../../input/VisibilityChange"],function(c,g,l){class f extends g.InputHandler{constructor(x,k,u){super(!0);this.view=x;this.keys=k;this._pressed=!1;this._keyToDirection=
{[k.clockwiseOption1]:"clockwise",[k.clockwiseOption2]:"clockwise",[k.counterClockwiseOption1]:"counterClockwise",[k.counterClockwiseOption2]:"counterClockwise",[k.resetOption1]:"reset",[k.resetOption2]:"reset"};this.registerIncoming("key-down",u,t=>this._handleKeyDown(t));this.registerIncoming("key-up",u,t=>this._handleKeyUp(t));this.registerIncoming("blur",u,()=>this._handleStop());this._visibilityHandle=l.onVisibilityChange(t=>t?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove();
this._handleStop()}_handleKeyDown(x){x.data.repeat||this._handleKey(x,!0)}_handleKeyUp(x){this._handleKey(x,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(x,k){var u=x.modifiers;if(!(0<u.size&&!u.has("Shift")||!this.view.constraints.rotationEnabled)&&(u=this._keyToDirection[x.data.key],this._pressed=null!=u)){x.preventDefault();if(k)switch(this.view.mapViewNavigation.begin(),u){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();
break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();x.stopPropagation()}}}c.KeyRotate=f;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["exports","../../../../core/has","../../../input/InputHandler"],function(c,g,l){var f;(function(k){k[k.IN=0]="IN";k[k.OUT=1]="OUT"})(f||=
{});class x extends l.InputHandler{constructor(k,u,t){super(!0);this.view=k;this.keys=u;this._keysToZoomAction={};this.registerIncoming("key-down",t,m=>this._handleKeyDown(m));u.zoomIn.forEach(m=>this._keysToZoomAction[m]=f.IN);u.zoomOut.forEach(m=>this._keysToZoomAction[m]=f.OUT)}_handleKeyDown(k){this._handleKey(k)}_handleKey(k){var u=k.modifiers;if(!(0<u.size)||u.has("Shift"))if({key:u}=k.data,u in this._keysToZoomAction){u=this._keysToZoomAction[u];var {mapViewNavigation:t}=this.view,m=null;switch(u){case f.IN:m=
t.zoomIn();break;case f.OUT:m=t.zoomOut();break;default:return}t.begin();m.then(()=>t.end());k.stopPropagation()}}}c.KeyZoom=x;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["exports","../../../input/InputHandler"],function(c,g){class l extends g.InputHandler{constructor(f,x){super(!0);this._view=f;this._canZoom=!0;this.registerIncoming("mouse-wheel",x,k=>this._handleMouseWheel(k))}_handleMouseWheel(f){if(this._view.navigation.mouseWheelZoomEnabled&&
(f.preventDefault(),f.stopPropagation(),this._canZoom)){var x=this._view.mapViewNavigation,{x:k,y:u,deltaY:t}=f.data;if(f=x.zoom(1/.6**(1/60*t),[k,u]))this._canZoom=!1,f.catch(()=>{}).then(()=>{this._canZoom=!0;x.end()})}}}c.MouseWheelZoom=l;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/PinchAction":function(){define(["exports","../../../input/DragEventSeparator","../../../input/InputHandler"],function(c,g,l){class f extends l.InputHandler{constructor(x){super(!0);
this.view=x;this.registerIncoming("drag",u=>this._handleDrag(u));this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const k=this.view.mapViewNavigation;this._dragEventSeparator=new g.DragEventSeparator({start:(u,t)=>{k.pinch.begin(this.view,t.data);t.stopPropagation()},update:(u,t)=>{k.pinch.update(this.view,t.data);t.stopPropagation()},end:(u,t)=>{k.pinch.end(this.view);t.stopPropagation()},condition:u=>2<=u})}_handleDrag(x){this._dragEventSeparator.handle(x)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}
c.PinchRotateAndZoom=f;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/BrowserEventSource":function(){define(["exports","../../core/has","../../core/maybe","./gamepad/GamepadSource","../support/screenUtils"],function(c,g,l,f,x){const k=g("edge"),u=g("chrome"),t=g("ff"),m=g("safari");class a{constructor(h,q){this._input=q;this._active={};this._callback=()=>{};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=
!1;this._element=h;h.getAttribute("tabindex")||h.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();
this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new f.GamepadSource(h,this._input);this._gamepadSource.onEvent=v=>this._callback("gamepad",v)}destroy(){this._callback=()=>{};this.activeEvents=null;this._activePointerCaptures.forEach(h=>{this._releasePointerCaptureSafe(h)});this._gamepadSource=l.destroyMaybe(this._gamepadSource);this._activePointerCaptures=null;this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(h){this._browserTouchPanningEnabled=
h;this._updateTouchAction();this._updateTouchEventHandling()}set onEventReceived(h){this._callback=h}set activeEvents(h){for(const q in this._active)h&&h.has(q)||(this._element.removeEventListener(d[q],this._active[q]),delete this._active[q]);h&&h.forEach(q=>{if(!this._active[q]&&d[q]){const v=(this._eventHandlers[q]||this._handleDefault).bind(this,q);this._element.addEventListener(d[q],v);this._active[q]=v}});this._gamepadSource.hasEventListeners=h?.has("gamepad")??!1}setPointerCapture(h,q){q?this._setPointerCatpureSafe(h.pointerId):
(this._releasePointerCaptureSafe(h.pointerId),this._activePointerCaptures.delete(h.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):
this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(h){try{this._element.setPointerCapture(h),this._activePointerCaptures.add(h)}catch{}}_releasePointerCaptureSafe(h){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(h)||
this._element.releasePointerCapture(h)}catch(q){}}_updateNormalizedPointerLikeEvent(h,q){h=x.createScreenPointFromNativeEvent(this._element,h);a.test.disableSubpixelCoordinates&&(h.x=Math.round(h.x),h.y=Math.round(h.y));q.x=h.x;q.y=h.y;return q}_handleKey(h,q){const {key:v}=q;v&&"key-up"===h&&this._keyDownState.delete(v);q={native:q,key:v,repeat:!!v&&this._keyDownState.has(v)};v&&"key-down"===h&&this._keyDownState.add(q.key);this._callback(h,q)}_handlePointer(h,q){q=this._updateNormalizedPointerLikeEvent(q,
{native:q,x:0,y:0,pointerType:q.pointerType,button:q.button,buttons:q.buttons,eventId:this._eventId++});this._callback(h,q)}_handlePointerPreventDefault(h,q){const v=this._updateNormalizedPointerLikeEvent(q,{native:q,x:0,y:0,pointerType:q.pointerType,button:q.button,buttons:q.buttons,eventId:this._eventId++});q.preventDefault();this._callback(h,v)}_handleMouseWheel(h,q){let v=q.deltaY;switch(q.deltaMode){case 0:k&&(v=v/document.documentElement.clientHeight*600);break;case 1:v*=30;break;case 2:v*=
900}k?v*=.7:u||m?v*=.6:t&&(v*=1.375);const n=Math.abs(v);100<n&&(v=v/n*200/(1+Math.exp(-.02*(n-100))));q=this._updateNormalizedPointerLikeEvent(q,{native:q,x:0,y:0,deltaY:v});this._callback(h,q)}_handlePointerCaptureLost(h,q){this._activePointerCaptures.delete(q.pointerId);this._handleDefault(h,q)}_handleDefault(h,q){const v={native:q};q.preventDefault();this._callback(h,v)}_preventAltKeyDefault(h){"Alt"===h.key&&h.preventDefault()}_preventMultiTouchPanning(h){1<h.touches.length&&h.preventDefault()}}
a.test={disableSubpixelCoordinates:!1};const d={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};c.BrowserEventSource=a;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/views/input/gamepad/GamepadSource":function(){define(["exports","../../../core/scheduling","./GamepadInputDevice","./GamepadState"],function(c,g,l,f){class x{constructor(k,u){this._element=k;this._input=u;this._hasEventListeners=!1;this._onConnectGamepad=t=>{this._connectGamepad(t.gamepad)};this._onDisconnectGamepad=t=>{t=t.gamepad;const m=t.index,a=this._inputDevices[m];a&&(this._emitGamepadEvent(t,f.extractState(a),!1),this._inputDevices.splice(m,1),this._latestUpdate.splice(m,1),this._input.gamepad.devices.remove(a),
this.ensurePollingState())};this._frameTask=null;this._latestUpdate=[];this._inputDevices=[];this._callback=null;k=window.isSecureContext;if(this.supported="getGamepads"in window.navigator&&k)this._forEachGamepad(t=>this._connectGamepad(t)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState()}destroy(){this.hasEventListeners=!1;this.supported&&(window.removeEventListener("gamepadconnected",
this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(k){this._hasEventListeners!==k&&(this._hasEventListeners=k,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&0<this._inputDevices.length&&this._hasEventListeners}set onEvent(k){this._callback=k}_connectGamepad(k){const u=new l(k);"unknown"!==u.deviceType&&(this._inputDevices[k.index]=u,this._input.gamepad.devices.add(u));this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?
this._startPolling():this._stopPolling()}_startPolling(){null==this._frameTask&&(this._frameTask=g.addFrameTask({update:()=>this._readGamepadState()}))}_stopPolling(){null!=this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=[])}_readGamepadState(){const k=document.hasFocus(),u=this._element.contains(document.activeElement),t="document"===this._input.gamepad.enabledFocusMode&&!k||"view"===this._input.gamepad.enabledFocusMode&&!u;this._forEachGamepad(m=>{var a=this._inputDevices[m.index];
if(a){var d=this._latestUpdate[m.index];a=f.extractState(a);var h=t||f.stateIdle(a);d&&(d.timestamp===m.timestamp||!d.active&&h||f.stateEqual(d.state,a))||this._emitGamepadEvent(m,a,!h)}})}_forEachGamepad(k){const u=window.navigator.getGamepads();for(let t=0;t<u.length;t++){const m=u[t];this._validate(m)&&k(m)}}_emitGamepadEvent(k,u,t){var m=this._latestUpdate[k.index];if((m=m&&m.active)||t)this._latestUpdate[k.index]={timestamp:k.timestamp,state:u,active:t},this._callback&&this._callback({device:this._inputDevices[k.index],
state:u,action:!m&&t?"start":m&&t?"update":"end"})}_validate(k){if(!k||!k.connected)return!1;for(let u=0;u<k.axes.length;u++)if(isNaN(k.axes[u]))return!1;return!0}}c.GamepadSource=x;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/gamepad/GamepadState":function(){define(["exports"],function(c){c.extractState=function(g){const l=g.native;return l?{buttons:l.buttons.map(f=>f.pressed?f.value||1:0),axes:l.axes.map(f=>{{var x=g.axisThreshold;const k=Math.abs(f);f=k<x?0:
Math.sign(f)*(k-x)/(1-x)}return f})}:{buttons:[],axes:[]}};c.stateEqual=function(g,l){if(g.axes.length!==l.axes.length||g.buttons.length!==l.buttons.length)return!1;for(var f=0;f<g.axes.length;f++)if(g.axes[f]!==l.axes[f])return!1;for(f=0;f<g.buttons.length;f++)if(g.buttons[f]!==l.buttons[f])return!1;return!0};c.stateIdle=function(g){for(var l=0;l<g.axes.length;l++)if(0!==g.axes[l])return!1;for(l=0;l<g.buttons.length;l++)if(0!==g.buttons[l])return!1;return!0};Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/views/input/handlers/PreventContextMenu":function(){define(["exports","../InputHandler"],function(c,g){class l extends g.InputHandler{constructor(){super(!0);this.registerIncoming("context-menu",f=>{f.data.native.preventDefault()})}}c.PreventContextMenu=l;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("exports ../../../core/clock ../../../core/MapUtils ../../../core/maybe ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./support".split(" "),
function(c,g,l,f,x,k,u,t){class m extends u.InputHandler{constructor(a=t.DefaultParameters.maximumDoubleClickDelay,d=t.DefaultParameters.maximumDoubleClickDistance,h=t.DefaultParameters.maximumDoubleTouchDelay,q=t.DefaultParameters.maximumDoubleTouchDistance,v=g.clock){super(!1);this._maximumDoubleClickDelay=a;this._maximumDoubleClickDistance=d;this._maximumDoubleTouchDelay=h;this._maximumDoubleTouchDistance=q;this._clock=v;this._doubleTapDragActive=this._doubleTapDragReady=!1;this._dragStartCenter=
x.createScreenPoint(0,0);this._pointerState=new Map;this._doubleTapDrag=this.registerOutgoing("double-tap-drag");this._dragEventSeparator=new k.DragEventSeparator({start:(n,e)=>this._dragStart(n,e),update:(n,e)=>this._dragUpdate(e),end:(n,e)=>this._dragEnd(e)});this.registerIncoming("drag",n=>this._dragEventSeparator.handle(n));this.registerIncoming("pointer-down",n=>this._handlePointerDown(n));this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(a=>
{a.doubleTapTimeout=f.removeMaybe(a.doubleTapTimeout)})}get hasPendingInputs(){return l.someMap(this._pointerState,a=>null!=a.doubleTapTimeout)}_clearPointerDown(a){const d=this._pointerState.get(a);d&&(d.doubleTapTimeout=f.removeMaybe(d.doubleTapTimeout),this._pointerState.delete(a),this.refreshHasPendingInputs())}_createDoubleTapDragData(a,d,h){const {button:q,buttons:v,pointer:n,pointers:e,pointerType:r,timestamp:C}=h;return{action:a,delta:d,button:q,buttons:v,pointer:n,pointers:e,pointerType:r,
timestamp:C}}_dragStart(a,d){if(this._doubleTapDragReady&&1===a){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var {data:h,modifiers:q}=d;({center:a}=h);this._dragStartCenter=a;a=this._createDoubleTapDragData("begin",x.createScreenPoint(0,0),h);this._doubleTapDrag.emit(a,void 0,q);d.stopPropagation()}}_dragUpdate(a){if(this._doubleTapDragActive){var {data:d,modifiers:h}=a,{center:q}=d;q=x.createScreenPoint(q.x-this._dragStartCenter.x,q.y-this._dragStartCenter.y);q=this._createDoubleTapDragData("update",
q,d);this._doubleTapDrag.emit(q,void 0,h);a.stopPropagation()}}_dragEnd(a){if(this._doubleTapDragActive){var {data:d,modifiers:h}=a,{center:q}=d;q=x.createScreenPoint(q.x-this._dragStartCenter.x,q.y-this._dragStartCenter.y);q=this._createDoubleTapDragData("end",q,d);this._doubleTapDrag.emit(q,void 0,h);this._doubleTapDragActive=!1;a.stopPropagation()}}_handlePointerDown(a){const {data:d}=a,h=t.getPointerId(d),q=this._pointerState.get(h);var {pointerType:v}=d.native;q?(v="touch"===v?this._maximumDoubleTouchDistance:
this._maximumDoubleClickDistance,this._clearPointerDown(h),t.manhattanDistance(q.event.data,d)>v?this._storePointerDown(a):this._doubleTapDragReady=!0):this._storePointerDown(a)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(a){var {data:d}=a;const {pointerType:h}=d.native,q=t.getPointerId(d);d=this._clock.setTimeout(()=>this._clearPointerDown(q),"touch"===h?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay);this._pointerState.set(q,{event:a,doubleTapTimeout:d});this.refreshHasPendingInputs()}}
c.DoubleTapDrag=m;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/support":function(){define(["exports","../../../core/screenUtils"],function(c,g){c.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};c.euclideanDistance=function(l,f){const x=f.x-l.x;l=f.y-l.y;
return Math.sqrt(x*x+l*l)};c.fitCircleLSQ=function(l,f){f?(f.radius=0,f.center.x=0,f.center.y=0):f={radius:0,center:g.createScreenPoint()};if(0===l.length)return f;if(1===l.length)return f.center.x=l[0].x,f.center.y=l[0].y,f;if(2===l.length){const [e,r]=l,[C,A]=[r.x-e.x,r.y-e.y];f.radius=Math.sqrt(C*C+A*A)/2;f.center.x=(e.x+r.x)/2;f.center.y=(e.y+r.y)/2;return f}let x=0,k=0;for(f=0;f<l.length;f++)x+=l[f].x,k+=l[f].y;x/=l.length;k/=l.length;var u=l.map(e=>e.x-x),t=l.map(e=>e.y-k);let m=f=0;var a=0,
d=0,h=0,q=0,v=0;for(var n=0;n<u.length;n++){const e=u[n],r=t[n],C=e*e,A=r*r;f+=C;m+=A;a+=e*r;d+=C*e;h+=A*r;q+=e*A;v+=r*C}u=f;t=a;n=m;d=.5*(d+q);h=.5*(h+v);v=u*n-a*t;q=(d*n-h*t)/v;h=(u*h-a*d)/v;v=g.createScreenPoint(q+x,h+k);return{radius:Math.sqrt(q*q+h*h+(f+m)/l.length),center:v}};c.getPointerId=function(l){({native:l}=l);const {pointerId:f,button:x,pointerType:k}=l;return"mouse"===k?`${f}:${x}`:`${k}`};c.manhattanDistance=function(l,f){return Math.abs(f.x-l.x)+Math.abs(f.y-l.y)};Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/Drag":function(){define(["exports","../../../core/screenUtils","../../../core/time","../InputHandler","./support"],function(c,g,l,f,x){function k(d){const h=[];d.forEach(q=>{h.push(g.createScreenPoint(q.event.x,q.event.y))});return x.fitCircleLSQ(h)}function u(d){const h=k(d);let q=0;d.forEach(v=>{var n=m(v,h);for(n-=v.lastAngle;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;n=v.lastAngle+n;v.lastAngle=n;q+=n-v.initialAngle});
q/=d.size||1;return{angle:q,radius:h.radius,center:h.center}}function t(d){const h=new Map;d.forEach((q,v)=>h.set(v,q.event));return h}function m(d,h){d=d.event;return Math.atan2(d.y-h.center.y,d.x-h.center.x)}class a extends f.InputHandler{constructor(d){super(!1);this._navigationTouch=d;this._startStateModifiers=new Set;this._activePointerMap=new Map;this._isCurrentDragSuppressed=this._isDragging=!1;this._drag=this.registerOutgoing("drag");this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this));
this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this));this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this));this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(d,h,q,v){return{action:d,pointerType:this._pointerType,button:this._mouseButton,buttons:h.buttons,timestamp:v,pointers:t(this._activePointerMap),pointer:h,angle:q.angle,radius:q.radius,center:q.center}}_addPointer(d){var h=
d.native.pointerId;const q=u(this._activePointerMap).angle;d={event:d,initialAngle:0,lastAngle:0};this._activePointerMap.set(h,d);h=m(d,k(this._activePointerMap));d.initialAngle=h;d.lastAngle=h;this._updatePointerAngles(q)}_updatePointer(d){if(!d||null!=d.x||null!=d.y){var h=this._activePointerMap.get(d.native.pointerId);h?h.event=d:this._addPointer(d)}}_removePointer(d){const h=u(this._activePointerMap).angle;this._activePointerMap.delete(d);this._updatePointerAngles(h)}_updatePointerAngles(d){const h=
u(this._activePointerMap);this._activePointerMap.forEach(q=>{q.initialAngle=m(q,h)-d;q.lastAngle=m(q,h)-d})}_emitEvent(d,h,q){const v=u(this._activePointerMap);this._drag.emit(this._createPayload(d,h,v,q),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(d){const h=d.data.native.pointerId,q=l.Milliseconds(d.timestamp);this._activePointerMap.get(h)&&(1===this._activePointerMap.size?(this._updatePointer(d.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",d.data,q),this._isCurrentDragSuppressed=
this._isDragging=!1,this._removePointer(h)):(this._removePointer(h),this._emitEvent("removed",d.data,l.Milliseconds(d.timestamp))))}_handlePointerDrag(d){const h=d.data,q=h.currentEvent,v=l.Milliseconds(d.timestamp);switch(h.action){case "start":case "update":this._isDragging?this._activePointerMap.has(q.native.pointerId)?(this._updatePointer(q),!this._isCurrentDragSuppressed&&this._emitEvent("update",q,v)):(this._addPointer(q),this._emitEvent("added",q,v),this._isCurrentDragSuppressed=this._isSuppressed):
(this._updatePointer(q),this._pointerType=d.data.startEvent.pointerType,this._mouseButton=d.data.startEvent.button,this._startStateModifiers=d.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",q,v))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&"touch"===this._pointerType&&1===this._activePointerMap.size}}c.Button=void 0;(function(d){d[d.Left=0]="Left";d[d.Middle=
1]="Middle";d[d.Right=2]="Right";d[d.Back=3]="Back";d[d.Forward=4]="Forward";d[d.Undefined=-1]="Undefined"})(c.Button||(c.Button={}));c.Drag=a;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define(["exports","../../../core/clock","../InputHandler","./support"],function(c,g,l,f){class x extends l.InputHandler{constructor(k=f.DefaultParameters.maximumDoubleClickDelay,u=f.DefaultParameters.maximumDoubleClickDistance,t=f.DefaultParameters.maximumDoubleTouchDelay,
m=f.DefaultParameters.maximumDoubleTouchDistance,a=g.clock){super(!1);this._maximumDoubleClickDelay=k;this._maximumDoubleClickDistance=u;this._maximumDoubleTouchDelay=t;this._maximumDoubleTouchDistance=m;this._clock=a;this._pointerState=new Map;this._immediateDoubleClick=this.registerOutgoing("immediate-double-click");this.registerIncoming("pointer-down",this._handlePointerDown.bind(this));this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(k=>
{k.immediateDoubleClick&&k.immediateDoubleClick.timeoutHandle.remove()});super.onUninstall()}_handlePointerDown(k){k=k.data;const u=f.getPointerId(k);this._pointerState.has(u)||(this._pointerState.set(u,{downButton:k.native.button,x:k.x,y:k.y,immediateDoubleClick:null}),this.startCapturingPointer(k.native))}_handlePointerUp(k){const u=k.data;var t=f.getPointerId(u);if((t=this._pointerState.get(t))&&t.downButton===u.native.button){const m=t.immediateDoubleClick,a="touch"===k.data.native.pointerType?
this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;m?(m.timeoutHandle.remove(),f.manhattanDistance(m,k.data)>a?this._startImmediateDoubleClick(k,t):(this._immediateDoubleClick.emit(k.data,void 0,m.modifiers),this._removeState(u))):f.manhattanDistance(t,k.data)>a?this._removeState(u):this._startImmediateDoubleClick(k,t)}}_startImmediateDoubleClick(k,u){u.immediateDoubleClick={x:k.data.x,y:k.data.y,modifiers:k.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(k.data),
"touch"===k.data.native.pointerType?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay)}}_removeState(k){const u=f.getPointerId(k);this._pointerState.delete(u);this.stopCapturingPointer(k.native);this.refreshHasPendingInputs()}}c.ImmediateDoubleClick=x;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["exports","../../../core/clock","../../../core/maybe","../InputHandler","./support"],function(c,g,l,f,
x){class k extends f.InputHandler{constructor(u=x.DefaultParameters.maximumClickDelay,t=x.DefaultParameters.movementUntilMouseDrag,m=x.DefaultParameters.movementUntilPenDrag,a=x.DefaultParameters.movementUntilTouchDrag,d=x.DefaultParameters.holdDelay,h=g.clock){super(!1);this._maximumClickDelay=u;this._movementUntilMouseDrag=t;this._movementUntilPenDrag=m;this._movementUntilTouchDrag=a;this._holdDelay=d;this._clock=h;this._pointerState=new Map;this._pointerDrag=this.registerOutgoing("pointer-drag");
this._immediateClick=this.registerOutgoing("immediate-click");this._pointerHold=this.registerOutgoing("hold");this.registerIncoming("pointer-down",this._handlePointerDown.bind(this));this.registerIncoming("pointer-up",q=>{this._handlePointerLoss(q,"pointer-up")});this.registerIncoming("pointer-capture-lost",q=>{this._handlePointerLoss(q,"pointer-capture-lost")});this.registerIncoming("pointer-cancel",q=>{this._handlePointerLoss(q,"pointer-cancel")});this._moveHandle=this.registerIncoming("pointer-move",
this._handlePointerMove.bind(this));this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(u=>{u.holdTimeout=l.removeMaybe(u.holdTimeout)});super.onUninstall()}_handlePointerDown(u){const t=u.data,m=t.native.pointerId;var a=null;0===this._pointerState.size&&(a=this._clock.setTimeout(()=>{const d=this._pointerState.get(m);d&&(d.isDragging||(this._pointerHold.emit(d.previousEvent,void 0,u.modifiers),d.holdEmitted=!0),d.holdTimeout=null)},this._holdDelay));a={startEvent:t,previousEvent:t,
startTimestamp:u.timestamp,isDragging:!1,downButton:t.native.button,holdTimeout:a,modifiers:new Set};this._pointerState.set(m,a);this.startCapturingPointer(t.native);this._moveHandle.resume();1<this._pointerState.size&&this._startDragging(u)}_createPointerDragData(u,t,m){return{action:u,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:m}}_handlePointerMove(u){const t=u.data,m=this._pointerState.get(t.native.pointerId);if(m){if(m.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",
m,t),void 0,m.modifiers);else{const a=x.euclideanDistance(t,m.startEvent),d=this._getDragThreshold(t.native.pointerType);a>d&&this._startDragging(u)}m.previousEvent=t}}_getDragThreshold(u){switch(u){case "touch":return this._movementUntilTouchDrag;case "pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(u){const t=u.data,m=t.native.pointerId;this._pointerState.forEach(a=>{null!=a.holdTimeout&&(a.holdTimeout.remove(),a.holdTimeout=null);a.isDragging||
(a.modifiers=u.modifiers,a.isDragging=!0,m===a.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",a,t)):this._pointerDrag.emit(this._createPointerDragData("start",a,a.previousEvent),u.timestamp))})}_handlePointerLoss(u,t){const m=u.data,a=m.native.pointerId,d=this._pointerState.get(a);d&&(null!=d.holdTimeout&&(d.holdTimeout.remove(),d.holdTimeout=null),d.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",d,"pointer-up"===t?m:d.previousEvent),void 0,
d.modifiers):"pointer-up"===t&&d.downButton===m.native.button&&u.timestamp-d.startTimestamp<=this._maximumClickDelay&&!d.holdEmitted&&this._immediateClick.emit(m),this._pointerState.delete(a),this.stopCapturingPointer(m.native),0===this._pointerState.size&&this._moveHandle.pause())}}c.PointerClickHoldAndDrag=k;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("exports ../../../core/clock ../../../core/MapUtils ../../../core/maybe ../InputHandler ./support".split(" "),
function(c,g,l,f,x,k){class u extends x.InputHandler{constructor(t=k.DefaultParameters.maximumDoubleClickDelay,m=k.DefaultParameters.maximumDoubleClickDistance,a=k.DefaultParameters.maximumDoubleTouchDelay,d=k.DefaultParameters.maximumDoubleTouchDistance,h=g.clock){super(!1);this._maximumDoubleClickDelay=t;this._maximumDoubleClickDistance=m;this._maximumDoubleTouchDelay=a;this._maximumDoubleTouchDistance=d;this._clock=h;this._pointerState=new Map;this._click=this.registerOutgoing("click");this._doubleClick=
this.registerOutgoing("double-click");this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this));this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=f.removeMaybe(t.doubleClickTimer))}get hasPendingInputs(){return l.someMap(this._pointerState,t=>null!=t.doubleClickTimer)}_clearDoubleClickTimer(t,m){const a=this._pointerState.get(t);a&&(a.doubleClickTimer=f.removeMaybe(a.doubleClickTimer),m&&this._click.emit(a.event.data,
void 0,a.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const m=this._pointerState.get(t);1===m.pointerDownCount&&this._click.emit(m.event.data,void 0,m.event.modifiers);m.doubleClickTimer=null;this._pointerState.delete(t);this.refreshHasPendingInputs()}_getPointerId(t){const {pointerId:m,pointerType:a,button:d}=t.native;return"mouse"===a?`${m}:${d}`:`${a}`}_handleImmediateClick(t){const m=t.data;var {pointerType:a}=m.native;const d=this._getPointerId(m);
if(this._pointerState.has(d)){var h=this._pointerState.get(d),{data:q,modifiers:v}=h.event;a="touch"===a?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;k.manhattanDistance(q,m)>a?(this._clearDoubleClickTimer(d,!0),this._startClick(t)):(this._clearDoubleClickTimer(d,!1),2===h.pointerDownCount&&this._doubleClick.emit(q,void 0,v))}else this._startClick(t)}_handlePointerDown(t){t=k.getPointerId(t.data);if(t=this._pointerState.get(t))t.pointerDownCount+=1}_startClick(t){var {data:m}=
t;const {native:{pointerType:a}}=m,d=k.getPointerId(m);m=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(d),"touch"===a?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay);this._pointerState.set(d,{event:t,doubleClickTimer:m,pointerDownCount:1});this.refreshHasPendingInputs()}}c.SingleAndDoubleClick=u;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../core/Evented ../../../../../core/has ../../../../../chunks/rbush ../../../../../geometry/support/aaBoundingRect ../../../../../geometry/support/spatialReferenceUtils ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),
function(c,g,l,f,x,k,u,t){const m={added:[],removed:[]},a=new Set,d=new t(0,0,0,0);class h extends c{constructor(q){super();this._tiles=new Map;this._index=l.rbush(9,g("esri-csp-restrictions")?v=>({minX:v.bounds[0],minY:v.bounds[1],maxX:v.bounds[2],maxY:v.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);this.tiles=[];this.tileScheme=q}destroy(){this.clear()}clear(){this.tiles.length=0;this._tiles.clear();this._index.clear()}has(q){return this._tiles.has(q)}get(q){return this._tiles.get(q)}getIntersectingTiles(q){if(!q||
0===f.width(q)||0===f.height(q))return[];var v;if(v=x.getInfo(this.tileScheme.spatialReference)){var [n,e]=v.valid;v=q[2]>e?[f.create([q[0],q[1],e,q[3]]),f.create([n,q[1],n+q[2]-e,q[3]])]:q[0]<n?[f.create([n,q[1],q[2],q[3]]),f.create([e-(n-q[0]),q[1],e,q[3]])]:null}else v=null;return null!=v?[...(new Set([...this.boundsIntersections(v[0]),...this.boundsIntersections(v[1])]))]:this.boundsIntersections(q)}boundsIntersections(q){return this._index.search({minX:q[0],minY:q[1],maxX:q[2],maxY:q[3]})}updateTiles(q){const v=
{added:[],removed:[]};for(const n of q.added)if(!this.has(n)){const e=new k.Tile(this.tileScheme,n);this._tiles.set(n,e);this._index.insert(e);v.added.push(e)}for(const n of q.removed)this.has(n)&&(q=this.get(n),this._tiles.delete(n),this._index.remove(q),v.removed.push(q));this.tiles.length=0;this._tiles.forEach(n=>this.tiles.push(n));(v.added.length||v.removed.length)&&this.emit("update",v)}setViewState(q){if(q=this.tileScheme.getTileCoverage(q,0)){var {spans:v,lodInfo:n}=q,{level:e}=n;if(0<v.length)for(const {row:C,
colFrom:A,colTo:b}of v)for(var r=A;r<=b;r++){const w=d.set(e,C,n.normalizeCol(r),n.getWorldForColumn(r)).id;a.add(w);if(!this.has(w)){const p=new k.Tile(this.tileScheme,w);this._tiles.set(w,p);this._index.insert(p);this.tiles.push(p);m.added.push(p)}}for(e=this.tiles.length-1;0<=e;e--)r=this.tiles[e],a.has(r.id)||(this._tiles.delete(r.id),this.tiles.splice(e,1),this._index.remove(r),m.removed.push(r));(m.added.length||m.removed.length)&&this.emit("update",m);u.pool.release(q);a.clear();m.added.length=
0;m.removed.length=0}}}return h})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],function(c,g){function l(n,e){if(!(this instanceof l))return new l(n,e);this._maxEntries=Math.max(4,n||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));e&&("function"===typeof e?this.toBBox=e:this._initFormat(e));this.clear()}function f(n,e){x(n,0,n.children.length,e,n)}function x(n,e,r,C,A){A||=q(null);A.minX=Infinity;A.minY=Infinity;A.maxX=-Infinity;A.maxY=-Infinity;for(var b;e<r;e++)b=
n.children[e],k(A,n.leaf?C(b):b);return A}function k(n,e){n.minX=Math.min(n.minX,e.minX);n.minY=Math.min(n.minY,e.minY);n.maxX=Math.max(n.maxX,e.maxX);n.maxY=Math.max(n.maxY,e.maxY);return n}function u(n,e){return n.minX-e.minX}function t(n,e){return n.minY-e.minY}function m(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function a(n){return n.maxX-n.minX+(n.maxY-n.minY)}function d(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function h(n,e){return e.minX<=n.maxX&&e.minY<=
n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function q(n){return{children:n,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function v(n,e,r,C,A){for(var b=[e,r],w;b.length;)r=b.pop(),e=b.pop(),r-e<=C||(w=e+Math.ceil((r-e)/C/2)*C,g.quickselect(n,w,e,r,A),b.push(e,w,w,r))}l.prototype={all:function(){return this._all(this.data,[])},search:function(n){var e=this.data,r=[],C=this.toBBox;if(!h(n,e))return r;for(var A=[],b,w,p,B;e;){b=0;for(w=e.children.length;b<w;b++)p=e.children[b],
B=e.leaf?C(p):p,h(n,B)&&(e.leaf?r.push(p):d(n,B)?this._all(p,r):A.push(p));e=A.pop()}return r},collides:function(n){var e=this.data,r=this.toBBox;if(!h(n,e))return!1;for(var C=[],A,b,w,p;e;){A=0;for(b=e.children.length;A<b;A++)if(w=e.children[A],p=e.leaf?r(w):w,h(n,p)){if(e.leaf||d(n,p))return!0;C.push(w)}e=C.pop()}return!1},load:function(n){if(!n||!n.length)return this;if(n.length<this._minEntries){for(var e=0,r=n.length;e<r;e++)this.insert(n[e]);return this}n=this._build(n.slice(),0,n.length-1,
0);this.data.children.length?this.data.height===n.height?this._splitRoot(this.data,n):(this.data.height<n.height&&(e=this.data,this.data=n,n=e),this._insert(n,this.data.height-n.height-1,!0)):this.data=n;return this},insert:function(n){null!=n&&this._insert(n,this.data.height-1);return this},clear:function(){this.data=q([]);return this},remove:function(n,e){if(null==n)return this;for(var r=this.data,C=this.toBBox(n),A=[],b=[],w,p,B,y;r||A.length;){r||(r=A.pop(),p=A[A.length-1],w=b.pop(),y=!0);if(r.leaf){a:{B=
n;var F=r.children,H=e;if(H){for(var J=0;J<F.length;J++)if(H(B,F[J])){B=J;break a}B=-1}else B=F.indexOf(B)}if(-1!==B){r.children.splice(B,1);A.push(r);this._condense(A);break}}y||r.leaf||!d(r,C)?p?(w++,r=p.children[w],y=!1):r=null:(A.push(r),b.push(w),w=0,p=r,r=r.children[0])}return this},toBBox:function(n){return n},compareMinX:u,compareMinY:t,toJSON:function(){return this.data},fromJSON:function(n){this.data=n;return this},_all:function(n,e){for(var r=[];n;)n.leaf?e.push.apply(e,n.children):r.push.apply(r,
n.children),n=r.pop();return e},_build:function(n,e,r,C){var A=r-e+1,b=this._maxEntries;if(A<=b){var w=q(n.slice(e,r+1));f(w,this.toBBox);return w}C||(C=Math.ceil(Math.log(A)/Math.log(b)),b=Math.ceil(A/Math.pow(b,C-1)));w=q([]);w.leaf=!1;w.height=C;A=Math.ceil(A/b);b=A*Math.ceil(Math.sqrt(b));var p;for(v(n,e,r,b,this.compareMinX);e<=r;e+=b){var B=Math.min(e+b-1,r);v(n,e,B,A,this.compareMinY);for(p=e;p<=B;p+=A){var y=Math.min(p+A-1,B);w.children.push(this._build(n,p,y,C-1))}}f(w,this.toBBox);return w},
_chooseSubtree:function(n,e,r,C){for(var A,b,w,p,B,y,F,H;;){C.push(e);if(e.leaf||C.length-1===r)break;F=H=Infinity;A=0;for(b=e.children.length;A<b;A++)w=e.children[A],B=m(w),y=(Math.max(w.maxX,n.maxX)-Math.min(w.minX,n.minX))*(Math.max(w.maxY,n.maxY)-Math.min(w.minY,n.minY))-B,y<H?(H=y,F=B<F?B:F,p=w):y===H&&B<F&&(F=B,p=w);e=p||e.children[0]}return e},_insert:function(n,e,r){var C=this.toBBox;r=r?n:C(n);C=[];var A=this._chooseSubtree(r,this.data,e,C);A.children.push(n);for(k(A,r);0<=e;)if(C[e].children.length>
this._maxEntries)this._split(C,e),e--;else break;this._adjustParentBBoxes(r,C,e)},_split:function(n,e){var r=n[e],C=r.children.length,A=this._minEntries;this._chooseSplitAxis(r,A,C);C=this._chooseSplitIndex(r,A,C);C=q(r.children.splice(C,r.children.length-C));C.height=r.height;C.leaf=r.leaf;f(r,this.toBBox);f(C,this.toBBox);e?n[e-1].children.push(C):this._splitRoot(r,C)},_splitRoot:function(n,e){this.data=q([n,e]);this.data.height=n.height+1;this.data.leaf=!1;f(this.data,this.toBBox)},_chooseSplitIndex:function(n,
e,r){var C,A;var b=A=Infinity;for(C=e;C<=r-e;C++){var w=x(n,0,C,this.toBBox);var p=x(n,C,r,this.toBBox);var B=Math.max(0,Math.min(w.maxX,p.maxX)-Math.max(w.minX,p.minX))*Math.max(0,Math.min(w.maxY,p.maxY)-Math.max(w.minY,p.minY));w=m(w)+m(p);if(B<b){b=B;var y=C;A=w<A?w:A}else B===b&&w<A&&(A=w,y=C)}return y},_chooseSplitAxis:function(n,e,r){var C=n.leaf?this.compareMinX:u,A=n.leaf?this.compareMinY:t,b=this._allDistMargin(n,e,r,C);e=this._allDistMargin(n,e,r,A);b<e&&n.children.sort(C)},_allDistMargin:function(n,
e,r,C){n.children.sort(C);C=this.toBBox;var A=x(n,0,e,C),b=x(n,r-e,r,C),w=a(A)+a(b),p;for(p=e;p<r-e;p++){var B=n.children[p];k(A,n.leaf?C(B):B);w+=a(A)}for(p=r-e-1;p>=e;p--)B=n.children[p],k(b,n.leaf?C(B):B),w+=a(b);return w},_adjustParentBBoxes:function(n,e,r){for(;0<=r;r--)k(e[r],n)},_condense:function(n){for(var e=n.length-1,r;0<=e;e--)0===n[e].children.length?0<e?(r=n[e-1].children,r.splice(r.indexOf(n[e]),1)):this.clear():f(n[e],this.toBBox)},_initFormat:function(n){var e=["return a"," - b",
";"];this.compareMinX=new Function("a","b",e.join(n[0]));this.compareMinY=new Function("a","b",e.join(n[1]));this.toBBox=new Function("a","return {minX: a"+n[0]+", minY: a"+n[1]+", maxX: a"+n[2]+", maxY: a"+n[3]+"};")}};c.rbush=l})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(c,g){var l={exports:{}};(function(f){(function(x){x=x();void 0!==x&&(f.exports=x)})(function(){function x(t,m,a,d,h){for(;d>a;){if(600<d-a){var q=d-a+1,v=m-a+1,n=Math.log(q),e=.5*Math.exp(2*
n/3);n=.5*Math.sqrt(n*e*(q-e)/q)*(0>v-q/2?-1:1);x(t,m,Math.max(a,Math.floor(m-v*e/q+n)),Math.min(d,Math.floor(m+(q-v)*e/q+n)),h)}q=t[m];v=a;e=d;k(t,a,m);for(0<h(t[d],q)&&k(t,a,d);v<e;){k(t,v,e);v++;for(e--;0>h(t[v],q);)v++;for(;0<h(t[e],q);)e--}0===h(t[a],q)?k(t,a,e):(e++,k(t,e,d));e<=m&&(a=e+1);m<=e&&(d=e-1)}}function k(t,m,a){var d=t[m];t[m]=t[a];t[a]=d}function u(t,m){return t<m?-1:t>m?1:0}return function(t,m,a,d,h){x(t,m,a||0,d||t.length-1,h||u)}})})(l);g=g.getDefaultExportFromCjs(l.exports);
c.quickselect=g})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../rest/support/QuantizationParameters ../../../tiling/TileKey".split(" "),function(c,g,l,f,x,k){class u{constructor(t,m){this.key=new k(0,0,0,0);this.bounds=f.create();this.objectIds=new Set;this.key.set(m);m=t.getLODInfoAt(this.key);this.tileInfoView=t;this.tileInfoView.getTileBounds(this.bounds,
this.key,!0);this.resolution=m.resolution;this.scale=m.scale;this.level=m.level}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return l.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return{$view:{scale:this.scale,timeZone:t}}}createChildTiles(){const t=this.key.getChildKeys(),
m=g.acquire();for(let a=0;a<t.length;a++)m[a]=new u(this.tileInfoView,t[a]);return m}getQuantizationParameters(){return x.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}c.Tile=u;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/HighlightOptions":function(){define("../../../chunks/tslib.es6 ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,l,f,x,k,u,t){l=class extends l{constructor(){super(...arguments);this.color=new g([0,255,255]);this.haloOpacity=1;this.fillOpacity=.25;this.multiHighlightEnabled=!1}equals(m){return this.color.equals(m.color)&&(this.haloColor||this.color).equals(m.haloColor||m.color)&&this.haloOpacity===m.haloOpacity&&this.fillOpacity===m.fillOpacity&&this.multiHighlightEnabled===m.multiHighlightEnabled}};c.__decorate([f.property({type:g})],l.prototype,"color",void 0);c.__decorate([f.property({type:g})],
l.prototype,"haloColor",void 0);c.__decorate([f.property()],l.prototype,"haloOpacity",void 0);c.__decorate([f.property()],l.prototype,"fillOpacity",void 0);c.__decorate([f.property()],l.prototype,"multiHighlightEnabled",void 0);return l=c.__decorate([t.subclass("esri.views.2d.support.HighlightOptions")],l)})},"esri/views/2d/support/hitTestUtils":function(){define(["exports","../../../Graphic","../../../core/arrayUtils","../../../core/iteratorUtils","../../support/screenUtils"],function(c,g,l,f,x){function k(a,
d,h,q,v,n){return e=>{if(e instanceof g){if(e.layer===a)n?.();else{var r=a.allLayerViews.find(C=>C.layer===e.layer);r&&v?.(r)}q(t(e))}else"subtype-sublayer"===e.type?(r=a.allLayerViews.find(C=>C.layer===e.parent))&&h(e,r):(r=a.allLayerViews.find(C=>C.layer===e))&&d(r)}}function u(a,d){if(a)if(f.isIterable(a))for(const h of a)if(f.isIterable(h))for(const q of h)d(q);else d(h);else d(a)}function t(a){const d=a.getObjectId();return d?`${a.layer?.uid??a.sourceLayer?.uid??"MapView"}/${d}`:`"MapView/${a.uid}`}
function m({layer:a},d){"subtype-group"===a.type&&a.sublayers.forEach(h=>{d(h)})}c.hitTest=async function(a,d,h){const q=x.isSupportedScreenPointEvent(d)?x.createScreenPointFromSupportedEvent(a,d):d;if(!a.ready||isNaN(q.x)||isNaN(q.y))return{screenPoint:q,results:[]};let v=new Set;const n=new Set;let e=!1,r=null,C=null;h?.include?u(h.include,k(a,b=>{v.add(b);m(b,w=>n.add(w))},(b,w)=>{n.add(b);v.add(w)},b=>{r||=new Set;r.add(b)},b=>v.add(b),()=>e=!0)):(e=!0,v=new Set(a.allLayerViews),v.forEach(b=>
{m(b,w=>n.add(w))}));h?.exclude&&u(h.exclude,k(a,b=>{v.delete(b);m(b,w=>n.delete(w))},b=>n.delete(b),b=>{C||=new Set;C.add(b)}));d=a.allLayerViews.filter(b=>!b.suspended&&v.has(b)).reverse();const A=a.toMap(q);a=e?a.graphicsView.hitTest(A).map(b=>({type:"graphic",graphic:b,layer:null,mapPoint:A})):[];d=await Promise.all(d.map(b=>b.hitTest(A,q)).toArray());a=[...a,...d].filter(l.isSome).flat().filter(l.isSome);a=a.filter(b=>"graphic"===b.type&&"subtype-group"===b.layer?.type?n.has(b.graphic.layer):
!0);r&&(a=a.filter(b=>!("graphic"in b)||!b.graphic||r?.has(t(b.graphic))));C&&(a=a.filter(b=>!("graphic"in b)||!b.graphic||!C?.has(t(b.graphic))));return{screenPoint:q,results:a}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/screenshotUtils":function(){define(["exports","../../support/screenshotUtils"],function(c,g){function l(u,t){const m=x(t||{},Math.min(4,g.getMaximumResolutionScale(u.size,Math.min(4096,u.stage.context.parameters.maxTextureSize))),u.size,
u.padding),a=f(t,u.allLayerViews);return u.stage.takeScreenshot(m,a,u.backgroundColor,t?.rotation)}function f(u={},t){if(u.layers){var m=[];u.layers.forEach(a=>{const d=t.find(h=>h.layer.id===a.id);d?.container&&m.push(d.container)});return m}}function x(u,t,m,a){u.ignorePadding&&(a={left:0,right:0,top:0,bottom:0});var d=null;null!=u.width&&null!=u.height?d=[u.width,u.height]:null==u.width&&null!=u.height?d=[u.height,u.height]:null!=u.width&&null==u.height?d=[u.width,u.width]:null==u.width&&null==
u.height&&(d=null);var h=m[0]-(a.left+a.right);m=m[1]-(a.top+a.bottom);u=u.area||{x:0,y:0,width:h,height:m};if(d){const q=d[0]/d[1];q>h/m?(h=u.width/q,u={x:u.x,y:Math.round(u.y+(u.height-h)/2),width:u.width,height:Math.round(h)}):(h=u.height*q,u={x:Math.round(u.x+(u.width-h)/2),y:u.y,width:Math.round(h),height:u.height})}else d=[u.width,u.height];d[0]>u.width?(t=Math.min(d[0]/u.width,t),d=d[0]/u.width/t):(t=1,d=d[0]/u.width);return{cropArea:{x:Math.round((u.x+a.left)*t),y:Math.round((u.y+a.top)*t),
width:Math.round(u.width*t),height:Math.round(u.height*t)},outputScale:d,resolutionScale:t}}const k={flipY:!0,premultipliedAlpha:!0};c.createScreenshotRegion=x;c.takeRawScreenshot=async function(u,t){u=await l(u,t);return g.encodeData(u,k)};c.takeScreenshot=async function(u,t){u=await l(u,t);const {format:m,quality:a}=g.getFormatAndQuality(t?.format,t?.quality);return g.encode(u,{format:m,quality:a,rotation:0,disableDecorations:!1},k)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/views/support/screenshotUtils":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/imageUtils"],function(c,g,l,f){function x(e,r){const {format:C,quality:A,rotation:b,disableDecorations:w}=e||{};var p=a(e,r.padding);var B=r.width-p.left-p.right;r=r.height-p.top-p.bottom;p={x:0,y:0,width:B,height:r};if(e?.area){null!=e.area.x&&(p.x=Math.floor(e.area.x));null!=e.area.y&&(p.y=Math.floor(e.area.y));var y=null!=e.area.width?Math.floor(e.area.width):null,F=null!=e.area.height?
Math.floor(e.area.height):null;p.width=B-p.x;p.height=r-p.y;null!=y&&null!=F?(p.width=Math.min(p.width,y),p.height=Math.min(p.height,F)):null==y&&null!=F?(y=Math.min(p.width,y),p.height*=y/p.width,p.width=y):null!=y&&null==F&&(y=Math.min(p.height,F),p.width*=y/p.height,p.height=y)}p=m(p,e);y=Math.floor(Math.max(p.x,0));F=Math.floor(Math.max(p.y,0));B={x:y,y:F,width:Math.floor(Math.min(p.width,B-y)),height:Math.floor(Math.min(p.height,r-F))};r=B.width/B.height;p=p.width/p.height;p!==r&&(p>r?(r=Math.floor(B.width/
p),B={x:B.x,y:Math.floor(B.y+(B.height-r)/2),width:B.width,height:r}):(r=Math.floor(B.height*p),B={x:Math.floor(B.x+(B.width-r)/2),y:B.y,width:r,height:B.height}));const {width:H,height:J}=t(e,B);r=d(C);p=v[r];p=l.clamp(null!=A?A:p,0,100);return{format:r,quality:p,area:B,width:H,height:J,rotation:b,disableDecorations:!!w,ignoreBackground:!!e?.ignoreBackground,ignorePadding:!!e?.ignorePadding}}function k(e,r){null==h&&(h=document.createElement("canvas"));var C=h;if(r.premultipliedAlpha){var A=e.data;
const w=A.length;for(let p=0;p<w;p+=4){var b=A[p+3];255!==b&&0<b&&(b=255/b,A[p]*=b,A[p+1]*=b,A[p+2]*=b)}}C.width=e.width;C.height=e.height;A=C.getContext("2d",{willReadFrequently:!0});A.putImageData(e,0,0);r.flipY&&(A.save(),A.globalCompositeOperation="copy",A.scale(1,-1),A.translate(0,-A.canvas.height),A.drawImage(A.canvas,0,0),A.restore());return{ctx:A,canvas:C}}function u(e,r){return e.toDataURL(q[r.format],r.quality/100)}function t(e,r){if(!e)return r;const C=e.width;e=e.height;if(null!=C&&null!=
e)return{width:Math.floor(C),height:Math.floor(e)};if(null==C&&null==e)return r;r=r.width/r.height;return null==e?{width:Math.floor(C),height:Math.floor(C/r)}:{width:Math.floor(e*r),height:Math.floor(e)}}function m(e,r){if(null==r?.width||null==r.height)return e;r=r.width/r.height;const C=e.width/e.height;if(C===r)return e;if(C<r)return r=Math.floor(e.height*r),e.x-=(r-e.width)/2,e.width=r,e;r=Math.floor(e.width/r);e.y-=(r-e.height)/2;e.height=r;return e}function a(e,r){return!r||e&&e.ignorePadding?
n:r}function d(e){switch(e){case "png":case "jpg":case "jpeg":return e;case null:case void 0:return"png";default:return"png"}}let h=null;const q={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},v={png:100,jpg:98,jpeg:98},n={top:0,right:0,bottom:0,left:0};c.createEmptyImageData=f.createEmptyImageData;c.completeUserSettings=x;c.encode=function(e,r,C){const {ctx:A,canvas:b}=k(e,C);e=A.getImageData(0,0,e.width,e.height);r=u(b,r);b.width=0;b.height=0;return{dataUrl:r,data:e}};c.encodeData=function(e,
r){const {ctx:C,canvas:A}=k(e,r);e=C.getImageData(0,0,e.width,e.height);A.width=0;A.height=0;return e};c.getFormatAndQuality=function(e,r){e=d(e);const C=v[e];r=l.clamp(null!=r?r:C,0,100);return{format:e,quality:r}};c.getMaximumResolutionScale=function(e,r){return r/Math.max(e[0],e[1])};c.resampleHermite=function(e,r,C,A=0,b=0,w=e.width-A,p=e.height-b,B=!1){const {data:y}=e,{width:F,height:H,data:J}=r;w/=F;p/=H;const Q=Math.ceil(w/2),X=Math.ceil(p/2);e=e.width;for(let ba=0;ba<H;ba++)for(let da=0;da<
F;da++){const z=4*(da+(B?H-ba-1:ba)*F);let E=0,L=0,U=0,G=0,I=0,M=0;const T=(ba+.5)*p;for(let W=Math.floor(ba*p);W<(ba+1)*p;W++){var Y=Math.abs(T-(W+.5))/X;const aa=(da+.5)*w;Y*=Y;for(let ea=Math.floor(da*w);ea<(da+1)*w;ea++){var V=Math.abs(aa-(ea+.5))/Q;V=Math.sqrt(Y+V*V);if(1<=V)continue;V=2*V*V*V-3*V*V+1;const D=4*(A+ea+(b+W)*e);M+=V*y[D+3];L+=V;!C&&255>y[D+3]&&(V=V*y[D+3]/255);U+=V*y[D];G+=V*y[D+1];I+=V*y[D+2];E+=V}}J[z]=U/E;J[z+1]=G/E;J[z+2]=I/E;J[z+3]=M/L}return r};c.screenshotSuperSampleSettings=
function(e,r,C){if(!r)return e;const {framebufferWidth:A,framebufferHeight:b,pixelRatio:w,region:p}=e;r=a(e,C);C=r.left+r.right;const B=r.top+r.bottom,y=A-C,F=b-B,H=Math.min(8,Math.min((2048-C)/y,(2048-B)/F));return 1.5>H?e:{...e,framebufferWidth:Math.round(y*H)+C,framebufferHeight:Math.round(F*H)+B,pixelRatio:w*H,resample:{region:{x:Math.round((p.x-r.left)*H)+r.left,y:Math.round((p.y-r.top)*H)+r.top,width:Math.round(p.width*H),height:Math.round(p.height*H)},width:A,height:b}}};c.toDataUrl=u;c.toRenderSettings=
function(e,r){const C=x(e,r),A=C.area,b=C.width/A.width,w=a(C,r.padding),p=w.left+w.right,B=w.top+w.bottom;return{framebufferWidth:Math.floor((r.width-p)*b+p),framebufferHeight:Math.floor((r.height-B)*b+B),region:{x:Math.floor(A.x*b)+w.left,y:Math.floor(A.y*b)+w.top,width:C.width,height:C.height},format:C.format,quality:C.quality,rotation:C.rotation,pixelRatio:b,layers:e?.layers??[],disableDecorations:C.disableDecorations,ignoreBackground:C.ignoreBackground,ignorePadding:C.ignorePadding,objectAndLayerIdColor:!1}};
Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/imageUtils":function(){define("require exports ../request ./Error ./promiseUtils ./urlUtils ../support/base64Utils".split(" "),function(c,g,l,f,x,k,u){function t(q,v,n){n||(d||(d=document.createElement("canvas"),d.width=1,d.height=1),n=d);return n.getContext("2d").createImageData(q,v)}async function m(q,v){q=window.URL.createObjectURL(q);try{const {data:n}=await l(q,{...v,responseType:"image"});return n}catch(n){if(!x.isAbortError(n))throw new f("invalid-image",
`Could not fetch requested image at ${q}`);throw n;}finally{window.URL.revokeObjectURL(q)}}async function a(q,v){const n=k.dataComponents(q);if(n?.isBase64)return{arrayBuffer:u.base64ToArrayBuffer(n.data),mediaType:n.mediaType};v=await l(q,{responseType:"array-buffer",...v});q=v.data;v=v.getHeader?.("Content-Type")??"";return{arrayBuffer:q,mediaType:v}}let d=null,h=!0;g.createEmptyImageData=function(q,v,n){if(!q||!v)throw Error("Cannot construct image data without dimensions");if(h)try{return new ImageData(q,
v)}catch(e){h=!1}return t(q,v,n)};g.getImageData=async function(q,v){const {arrayBuffer:n,mediaType:e}=await a(q,v);q="image/png"===e;if("image/gif"===e){const {isAnimatedGIF:r,parseGif:C}=await new Promise((A,b)=>c(["./image/gif"],A,b));if(r(n))return C(n,v)}if(q){const {isAnimatedPNG:r,parseApng:C}=await new Promise((A,b)=>c(["./image/apng"],A,b));if(r(n))return C(n,v)}q=new Blob([n],{type:e});return m(q,v)};g.wrapImageData=function(q,v,n,e){if(!v||!n)throw Error("Cannot construct image data without dimensions");
if(h)try{return new ImageData(q,v,n)}catch(r){h=!1}v=t(v,n,e);v.data.set(q,0);return v};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/StationaryManager":function(){define("exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),function(c,g,l,f,x,k,u,t){c.StationaryManager=class extends l{constructor(){super(...arguments);
this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now();null==this._timer&&(this._timer=setInterval(()=>{160<=performance.now()-this._timestamp&&this.clear()},160))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};g.__decorate([f.property()],c.StationaryManager.prototype,"_timer",void 0);g.__decorate([f.property()],c.StationaryManager.prototype,"stationary",null);c.StationaryManager=g.__decorate([t.subclass("esri.views.2d.support.StationaryManager")],
c.StationaryManager);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/Timeline":function(){define(["exports"],function(c){class g{constructor(){this._names=new Map}begin(l){this._names.has(l)||(this._names.set(l,!1),l.includes("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${l}.Start`))}end(l){this._names.has(l)&&!this._names.get(l)&&(this._names.set(l,!0),performance.mark(`Esri.${l}.End`))}record(l){this._names.has(l)||(this._names.set(l,!0),
performance.mark(`Esri.${l}`))}}c.Timeline=g;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/WebGLRequirements":function(){define(["exports","../../core/Error","../webgl/capabilities"],function(c,g,l){c.check=function(f){const x=l.getWebGLCapabilities();return x.available?"3d"===f&&x.majorPerformanceCaveat?new g("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):
x.supportsHighPrecisionFragment?x.supportsVertexShaderSamplers?null:new g("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new g("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new g("webgl:required","WebGL2 is required but not supported.",Error().stack)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/capabilities":function(){define(["exports",
"./contextUtils"],function(c,g){function l(k){if("undefined"===typeof WebGL2RenderingContext)return null;var u=document.createElement("canvas");if(!u)return null;let t=g.createContext(u,{failIfMajorPerformanceCaveat:!0});null==t&&(t=g.createContext(u),null!=t&&(k.majorPerformanceCaveat=!0));if(null==t)return t;k.available=!0;k.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE);k.supportsVertexShaderSamplers=0<t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS);if(u=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,
t.HIGH_FLOAT))k.supportsHighPrecisionFragment=0<u.precision;return t}let f;class x{constructor(){this.majorPerformanceCaveat=this.available=!1;this.maxTextureSize=0;this.supportsColorBufferHalfFloat=this.supportsColorBufferFloatBlend=this.supportsColorBufferFloat=this.supportsHighPrecisionFragment=this.supportsVertexShaderSamplers=!1}}c.getWebGLCapabilities=function(){if(!f){{const k=new x,u=l(k);null!=u&&(k.supportsColorBufferFloat=null!==u.getExtension("EXT_color_buffer_float"),k.supportsColorBufferFloatBlend=
null!==u.getExtension("EXT_float_blend"),k.supportsColorBufferHalfFloat=k.supportsColorBufferFloat||null!==u.getExtension("EXT_color_buffer_half_float"));f=k}}return f};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/contextUtils":function(){define(["exports"],function(c){c.createContext=function(g,l={}){return(g=g.getContext("webgl2",l))?g:null};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/ui/DefaultUI":function(){define("../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(c,g,l,f,x,k,u,t,m,a,d,h,q){g=class extends m{constructor(v){super(v);this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"};this.components=[];this._updateViewAwareWidgets=n=>{this.components.forEach(e=>{e=this._find(e)?.widget;void 0!==e?.view&&(e.view=n)})};this._componentsWatcher=(n,e)=>{this._removeComponents(e);this._addComponents(n);this._adjustPadding(n)}}initialize(){this.addHandles([f.watch(()=>this.components,this._componentsWatcher,
f.initial),f.watch(()=>this.view,this._updateViewAwareWidgets,f.initial)])}_add(v,n,e,r,C){let A=v;if("string"===typeof v&&this._defaultPositionLookup[v]){if(this._find(v))return;A=this._createComponent(v)}super._add(A,n,e,r,C)}_removeComponents(v){v.forEach(n=>{if(n=this._find(n))this.remove(n),n.destroy()})}_adjustPadding(v){v.includes("attribution")||this._isOverridden("padding")||({top:v}=this.padding,this.padding=v)}_addComponents(v){this.constructed&&v.forEach(n=>this.add(this._createComponent(n),
this._defaultPositionLookup[n]))}_createComponent(v){const n=this._createWidget(v);return new t({id:v,node:n})}_createWidget(v){const {view:n}=this;switch(v){case "attribution":return new a({view:n});case "compass":return new d({view:n});case "navigation-toggle":return new h({view:n});case "zoom":return new q({view:n})}}};c.__decorate([x.property()],g.prototype,"components",void 0);return g=c.__decorate([u.subclass("esri.views.ui.DefaultUI")],g)})},"esri/views/ui/Component":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,l,f,x,k,u,t){g=class extends g{constructor(){super(...arguments);this.widget=null}destroy(){this.node=null;this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(m){this._set("id",m)}set node(m){const a=this._get("node");m!==a&&(m&&m.classList.add("esri-component"),a&&a.classList.remove("esri-component"),this._set("node",m))}castNode(m){this.widget?.destroy();if(!m)return this._set("widget",null),null;if("string"===typeof m||m&&"nodeType"in m)return this._set("widget",
null),l.byId(m);m&&"function"===typeof m.render&&!m.domNode&&(m.domNode=document.createElement("div"));this._set("widget",m);return m.domNode}};c.__decorate([f.property()],g.prototype,"id",null);c.__decorate([f.property()],g.prototype,"node",null);c.__decorate([x.cast("node")],g.prototype,"castNode",null);c.__decorate([f.property({readOnly:!0})],g.prototype,"widget",void 0);return g=c.__decorate([t.subclass("esri.views.ui.Component")],g)})},"esri/views/ui/UI":function(){define("../../chunks/tslib.es6 ../../intl ../../core/arrayUtils ../../core/domUtils ../../core/Evented ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/has ../../core/accessorSupport/decorators/subclass ../../support/themeUtils ./Component ../../widgets/support/widgetUtils ../../intl/locale".split(" "),
function(c,g,l,f,x,k,u,t,m,a,d,h,q,v){function n(b){return 0===b?"0":`${b}px`}function e(b){const w="object"===typeof b&&null!==b&&Object.getPrototypeOf(b);return null!==w&&w!==Object.prototype||!("component"in b||"index"in b||"position"in b)?null:b}function r(b,{top:w,bottom:p,left:B,right:y}){b.style.top=w;b.style.bottom=p;b.style.left=B;b.style.right=y}const C={left:0,top:0,bottom:0,right:0},A={bottom:30,top:15,right:15,left:15};g=class extends x.EventedAccessor{constructor(b){super(b);this._cornerNameToContainerLookup=
{};this._positionNameToContainerLookup={};this._components=[];this._componentMap=new Map;this._locale=v.getLocale();this.view=null;this._applyViewPadding=()=>{const w=this.container;w&&r(w,this._toPixelPosition(this._getViewPadding()))};this._applyUIPadding=()=>{const w=this._innerContainer;w&&r(w,this._toPixelPosition(this.padding))};this._initContainers()}initialize(){this.addHandles([k.watch(()=>[this.view?.padding,this.container],this._applyViewPadding,k.initial),k.watch(()=>this.padding,this._applyUIPadding,
k.initial),k.watch(()=>[this.container,this._locale],([b,w])=>{b&&b.setAttribute("lang",w)},k.initial),v.onLocaleChange(b=>{this._locale=b})])}destroy(){this.container=null;for(const b of this._components)b.destroy();this._components.length=0;this._componentMap.clear()}set container(b){const w=this._get("container");b!==w&&(b&&(b.classList.add("esri-ui"),d.setCalciteThemeClass(b),this._attachContainers(b)),w&&(w.classList.remove("esri-ui"),r(w,{top:"",bottom:"",left:"",right:""}),f.empty(w)),this._set("container",
b))}get height(){const b=this.view?.height??0;if(0===b)return b;const w=this._getViewPadding(),{top:p,bottom:B}=w;return Math.max(b-p-B,0)}get padding(){return this._get("padding")}set padding(b){this._overrideIfSome("padding",b)}castPadding(b){return"number"===typeof b?{bottom:b,top:b,right:b,left:b}:{...A,...b}}get width(){const b=this.view?.width??0;if(0===b)return b;const w=this._getViewPadding(),{left:p,right:B}=w;return Math.max(b-p-B,0)}add(b,w){let p,B,y;if(Array.isArray(b))b.forEach(H=>this.add(H,
w));else{var F=e(b);F&&({index:p,position:w,component:b,key:B}=F);w&&"object"===typeof w&&({index:p,key:B,position:w,internal:y}=w);!b||w&&!this._isValidPosition(w)||this._add(b,w,p,B,y)}}remove(b,w){if(b){if(Array.isArray(b))return b.map(B=>this.remove(B,w));if((b=this._find(b))&&(!this._componentMap.has(b)||this._componentMap.get(b)?.key===w)){var p=this._components.indexOf(b);b.node.parentNode?.removeChild(b.node);this._componentMap.delete(b);return this._components.splice(p,1)[0]}}}empty(b,w=
{removeInternal:!1}){if(Array.isArray(b))for(const p of b)this.empty(p,w);else{b=Array.prototype.slice.call(this._positionNameToContainerLookup[b??"manual"].children).map(p=>this._findByNode(p)).filter(p=>null==p?!1:!(this._componentMap.get(p)?.internal??!1)||w.removeInternal);for(const p of b)this.remove(p)}}move(b,w){Array.isArray(b)&&b.forEach(y=>this.move(y,w));if(b){var p=e(b)||e(w);if(p){var B=p.index;w=p.position;b=p.component||b}(!w||this._isValidPosition(w))&&(b=this.remove(b))&&this.add(b,
{position:w,index:B})}}find(b){return b?(b=this._findById(b))&&(b.widget||b.node):null}getComponents(b,w={includeInternal:!1}){return b?Array.isArray(b)?b.flatMap(p=>this._getComponentsAtPosition(p,w)):this._getComponentsAtPosition(b,w):this._components.filter(p=>w.includeInternal||!(this._componentMap.get(p)?.internal??!1)).map(({widget:p,node:B})=>p??B)}getPosition(b){for(const w in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[w].contains(b))return w;return null}_add(b,
w,p,B,y){b instanceof h||(b=new h({node:b}));this._place({component:b,position:w,index:p});this._components.push(b);this._componentMap.set(b,{key:B,internal:y})}_find(b){return b?b instanceof h?this._findByComponent(b):"string"===typeof b?this._findById(b):this._findByNode(b.domNode||b):null}_getViewPadding(){return this.view?.padding??C}_attachContainers(b){b.appendChild(this._innerContainer);b.appendChild(this._manualContainer)}_initContainers(){var b=document.createElement("div");b.classList.add("esri-ui-inner-container",
"esri-ui-corner-container");const w=document.createElement("div");w.classList.add("esri-ui-inner-container","esri-ui-manual-container");const p=document.createElement("div");p.classList.add("esri-ui-top-left","esri-ui-corner");b.appendChild(p);const B=document.createElement("div");B.classList.add("esri-ui-top-right","esri-ui-corner");b.appendChild(B);const y=document.createElement("div");y.classList.add("esri-ui-bottom-left","esri-ui-corner");b.appendChild(y);const F=document.createElement("div");
F.classList.add("esri-ui-bottom-right","esri-ui-corner");b.appendChild(F);this._innerContainer=b;this._manualContainer=w;b=q.isRTL();this._cornerNameToContainerLookup={"top-left":p,"top-right":B,"bottom-left":y,"bottom-right":F,"top-leading":b?B:p,"top-trailing":b?p:B,"bottom-leading":b?F:y,"bottom-trailing":b?y:F};this._positionNameToContainerLookup={manual:w,...this._cornerNameToContainerLookup}}_isValidPosition(b){return!!this._positionNameToContainerLookup[b]}_place(b){var w=b.position??"manual";
const {component:p,index:B}=b;b=this._positionNameToContainerLookup[w];w=null!=B&&-1<B;var y=p.widget;y&&!y._started&&"function"===typeof y.postMixInProperties&&"function"===typeof y.buildRendering&&"function"===typeof y.postCreate&&"function"===typeof y.startup&&p.widget.startup();w?(w=Array.from(b.children),0===B?b.firstChild?f.insertBefore(p.node,b.firstChild):b.appendChild(p.node):B>=w.length?b.appendChild(p.node):f.insertBefore(p.node,w[B])):b.appendChild(p.node)}_toPixelPosition(b){return{top:n(b.top),
left:n(b.left),right:n(b.right),bottom:n(b.bottom)}}_findByComponent(b){return this._components.find(w=>w===b)??null}_findById(b){return this._components.find(({id:w})=>w===b)??null}_findByNode(b){return this._components.find(({node:w})=>w===b)??null}_getComponentsAtPosition(b,w){return Array.prototype.slice.call(this._positionNameToContainerLookup[b].children).map(p=>this._findByNode(p)).filter(l.isSome).filter(p=>w.includeInternal||!(this._componentMap.get(p)?.internal??!1)).map(({widget:p,node:B})=>
p??B)}};c.__decorate([u.property()],g.prototype,"_locale",void 0);c.__decorate([u.property()],g.prototype,"container",null);c.__decorate([u.property()],g.prototype,"height",null);c.__decorate([u.property({value:A})],g.prototype,"padding",null);c.__decorate([t.cast("padding")],g.prototype,"castPadding",null);c.__decorate([u.property()],g.prototype,"view",void 0);c.__decorate([u.property()],g.prototype,"width",null);return g=c.__decorate([a.subclass("esri.views.ui.UI")],g)})},"esri/widgets/Attribution":function(){define("../chunks/tslib.es6 ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ./Attribution/AttributionViewModel ./support/globalCss ./support/legacyIcon ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(c,g,l,f,x,k,u,t,m,a,d,h,q,v,n){var e=d.legacyIcon.description;f=class extends t{constructor(r,C){super(r,C);this._attributionTextOverflowed=this._isOpen=!1;this._prevSourceNodeHeight=0;this._resizeObserver=new ResizeObserver(A=>A.forEach(({target:b})=>this._checkSourceTextOverflow(b)));this.iconClass=e;this.icon=null;this.itemDelimiter=" | ";this.messages=null;this.viewModel=new m}initialize(){this.addHandles(g.on(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||
this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((r,C)=>{r.includes(C.text)||r.push(C.text);return r},[]).join(this.itemDelimiter)}get label(){return this.messages?.widgetLabel??""}set label(r){this._overrideIfSome("label",r)}get view(){return this.viewModel.view}set view(r){this.viewModel.view=r}render(){return v.tsx("div",{bind:this,class:this.classes("esri-attribution",a.globalCss.widget,{["esri-attribution--open"]:this._isOpen}),dir:"ltr",onclick:this._toggleState,
onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return v.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",v.tsx("a",{class:"esri-attribution__link",href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const r=this._isOpen,C=this._isInteractive,A=C?0:void 0,{attributionText:b}=this;return v.tsx("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes("esri-attribution__sources",
{["esri-attribution__sources--open"]:r,[a.globalCss.interactive]:C}),innerHTML:b,tabIndex:A})}_afterSourcesNodeCreate(r){this._prevSourceNodeHeight=r.clientWidth;this._resizeObserver.observe(r)}_checkSourceTextOverflow(r){let C=!1;const {clientHeight:A,clientWidth:b,scrollWidth:w}=r;r=w>b;const p=this._attributionTextOverflowed!==r;this._attributionTextOverflowed=r;p&&(C=!0);this._isOpen&&(r=A<this._prevSourceNodeHeight,this._prevSourceNodeHeight=A,r&&(this._isOpen=!1,C=!0));C&&this.scheduleRender()}_toggleState(){this._isInteractive&&
(this._isOpen=!this._isOpen)}};c.__decorate([l.property()],f.prototype,"_isOpen",void 0);c.__decorate([l.property()],f.prototype,"_isInteractive",null);c.__decorate([l.property()],f.prototype,"_attributionTextOverflowed",void 0);c.__decorate([l.property()],f.prototype,"_prevSourceNodeHeight",void 0);c.__decorate([l.property({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],f.prototype,"attributionText",null);c.__decorate([l.property()],f.prototype,"iconClass",void 0);c.__decorate([l.property()],
f.prototype,"icon",void 0);c.__decorate([l.property()],f.prototype,"itemDelimiter",void 0);c.__decorate([l.property()],f.prototype,"label",null);c.__decorate([l.property(),q.messageBundle("esri/widgets/Attribution/t9n/Attribution")],f.prototype,"messages",void 0);c.__decorate([l.property()],f.prototype,"view",null);c.__decorate([l.property({type:m})],f.prototype,"viewModel",void 0);c.__decorate([h.accessibleHandler()],f.prototype,"_toggleState",null);return f=c.__decorate([u.subclass("esri.widgets.Attribution")],
f)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/asyncUtils ../../core/Collection ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ../../geometry/support/contains ../../geometry/support/webMercatorUtils ../../views/3d/layers/Lyr3DWasm".split(" "),
function(c,g,l,f,x,k,u,t,m,a,d,h,q,v,n){function e(b,w){return b&&"copyright"in b&&(!w||"function"===typeof b.originOf&&"user"===b.originOf("copyright"))}function r(b,w){return b.length!==w.length||b.some((p,B)=>p.text!==w[B].text)}function C(b,w,p){p&&w&&(b.find(B=>B.layerView===w&&B.text===p)||b.push({text:p,layerView:w}))}const A=[];g=class extends g{constructor(b){super(b);this._clear=()=>{this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.removeHandles("suspension");
this.notifyChange("state")};this._pendingAttributions=new Set;this._fetchedAttributionData=new Map;this.items=new f;this.view=null;this._allLayerViewsChange=w=>{this.removeHandles("suspension");this.removeHandles("visible-geometry-changed");const p=this.view?.allLayerViews;p&&(this.addHandles(p.map(B=>x.watch(()=>[B.suspended,B.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),p.forEach(B=>{"esri.views.3d.layers.Tiles3DLayerView3D"===B.declaredClass&&this.addHandles(B.on("visible-geometry-changed",
()=>this._updateAttributionItems()),"visible-geometry-changed")}));w?.removed&&w.removed.forEach(B=>{this._pendingAttributions.delete(B);this._fetchedAttributionData.delete(B)});this._updateAttributionItems()};this.addHandles([x.on(()=>this.view?.allLayerViews,"change",w=>this._allLayerViewsChange(w),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),x.when(()=>!0===this.view?.stationary,()=>this._updateAttributionItems())])}destroy(){this.view=null;this._fetchedAttributionData.clear();
this._pendingAttributions.clear();this.items.removeAll()}get state(){return this.view?.ready?0<this._pendingAttributions.size?"loading":"ready":"disabled"}_updateAttributionItems(){const b=this.view;var w=b?.allLayerViews;A.length=0;if(b&&w){w.forEach(B=>{if(!B.suspended&&B.layer?.attributionVisible){var y=B.layer;if(e(y,"user"))C(A,B,y.copyright);else if(y.hasAttributionData)if(this._fetchedAttributionData.has(B)){var F=this._fetchedAttributionData.get(B);F?C(A,B,this._getDynamicAttribution(F,b,
y)):e(y)&&C(A,B,y.copyright)}else this._fetchAttributionData(B);else(F="portalItem"in y?y.portalItem?.accessInformation:void 0)?C(A,B,F):C(A,B,y.copyright)}});w=w.find(B=>"integrated-mesh-3dtiles"===B.layer?.type);if(this.view&&w){var p=n.getLyr3DWasm(this.view);if(p){p=p.getAttributionText();for(let B=0;B<p.length;++B)C(A,w,p[B])}}r(this.items,A)&&(this.items.removeAll(),this.items.addMany(A));A.length=0;this.notifyChange("state")}else this._clear()}async _fetchAttributionData(b){if(!this._pendingAttributions.has(b)){this._pendingAttributions.add(b);
var w=await l.result(b.layer.fetchAttributionData());this._pendingAttributions.has(b)&&(w=w.ok?this._createContributionIndex(w.value,"bing-maps"===b.layer.type):null,this._pendingAttributions.delete(b),this._fetchedAttributionData.set(b,w));this._updateAttributionItems()}}_createContributionIndex(b,w){b=b.contributors;const p={};if(!b)return p;for(let H=0;H<b.length;H++){const J=b[H];var B=J.coverageAreas;if(!B)return;for(const Q of B){var y=Q.bbox,F=Q.zoomMin-(w&&Q.zoomMin?1:0);B=Q.zoomMax-(w&&Q.zoomMax?
1:0);y=new d({xmin:y[1],ymin:y[0],xmax:y[3],ymax:y[2],spatialReference:h.WGS84});for(y={extent:v.geographicToWebMercator(y),attribution:J.attribution||"",score:null!=Q.score?Q.score:100,id:H};F<=B;F++){let X,Y;(X=p)[Y=F]??(X[Y]=[]);p[F].push(y)}}}p.maxKey=Math.max.apply(null,Object.keys(p));return p}_getDynamicAttribution(b,w,p){const {extent:B,scale:y}=w;p=p.tileInfo?.scaleToZoom(y)??0;p=Math.min(b.maxKey??0,Math.round(p));if(!B||null==p||-1>=p)return"";b=b[p];const F=v.project(B.center.clone().normalize(),
w.spatialReference),H=new Set;return b?b.filter(J=>{const Q=J.id;(J=!H.has(Q)&&F&&J.extent&&q.extentContainsPoint(J.extent,F))&&H.add(Q);return J}).sort((J,Q)=>Q.score-J.score||J.objectId-Q.objectId).map(J=>J.attribution).join(", "):""}};c.__decorate([k.property({readOnly:!0,type:f})],g.prototype,"items",void 0);c.__decorate([k.property({readOnly:!0})],g.prototype,"state",null);c.__decorate([k.property()],g.prototype,"view",void 0);return g=c.__decorate([a.subclass("esri.widgets.Attribution.AttributionViewModel")],
g)})},"esri/views/3d/layers/Lyr3DWasm":function(){define(["require","exports"],function(c,g){let l,f=null;const x=new Map;g.addLayerViewToWasm=async function(k){null==f&&(null==l&&(l=new Promise((m,a)=>c(["../../../layers/Lyr3DWasmPerSceneView"],d=>m(Object.freeze(Object.defineProperty({__proto__:null,default:d},Symbol.toStringTag,{value:"Module"}))),a))),f=await l);const u=k.view;let t=x.get(u);t||(t=new f.default({view:u}),x.set(u,t));await t.initializeWasm();return t.add3DTilesLayerView(k)};g.getLyr3DWasm=
function(k){return x.get(k)};g.removeLayerViewFromWasm=function(k){const u=k.view,t=x.get(u);t&&1>t.remove3DTilesLayerView(k)&&(x.delete(u),0===x.size&&(f=l=null))};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/globalCss":function(){define(["exports"],function(c){c.globalCss={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",
buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",disabledElement:"esri-disabled-element",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",
menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",noBookmarksIcon:"esri-widget__no-bookmark-icon",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",
widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Compass":function(){define("require ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ./Compass/CompassViewModel ./Compass/css ../chunks/componentsUtils ./support/globalCss ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(c,g,l,f,x,k,u,t,m,a,d,h,q,v,n){f=class extends t{constructor(e,r){super(e,r);this.iconClass=a.css.widgetIcon;this.messages=this.icon=null;this.viewModel=new m;this._reset=()=>{this.viewModel.reset()};this._toRotationTransform=C=>({transform:`rotateZ(${C.z}deg)`})}loadDependencies(){return d.loadCalciteComponents({button:()=>new Promise((e,r)=>c(["../chunks/calcite-button"],e,r)),icon:()=>new Promise((e,r)=>c(["../chunks/calcite-icon"],e,r))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=
e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const {orientation:e,state:r}=this.viewModel,C=this.icon??("rotation"===r?"arrow-up":"compass-needle"),{messages:A}=this;return n.tsx("div",{class:this.classes(a.css.base,h.globalCss.widget)},n.tsx("calcite-button",{class:h.globalCss.widgetButton,disabled:"disabled"===r,kind:"neutral",
label:A.reset,onclick:this._reset,round:!0,scale:"s",title:A.reset},n.tsx("div",{"aria-hidden":"true",class:a.css.iconContainer,title:A.reset},n.tsx("calcite-icon",{icon:C,scale:"m",styles:this._toRotationTransform(e)}))))}};g.__decorate([l.property()],f.prototype,"goToOverride",null);g.__decorate([l.property()],f.prototype,"iconClass",void 0);g.__decorate([l.property()],f.prototype,"icon",void 0);g.__decorate([l.property()],f.prototype,"label",null);g.__decorate([l.property(),v.messageBundle("esri/widgets/Compass/t9n/Compass")],
f.prototype,"messages",void 0);g.__decorate([l.property()],f.prototype,"view",null);g.__decorate([l.property({type:m})],f.prototype,"viewModel",void 0);return f=g.__decorate([u.subclass("esri.widgets.Compass")],f)})},"esri/widgets/Compass/CompassViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./utils ../support/GoTo".split(" "),
function(c,g,l,f,x,k,u,t,m,a){g=class extends a.GoToMixin(g){constructor(d){super(d);this.orientation={x:0,y:0,z:0};this.view=null;this._updateForCamera=this._updateForCamera.bind(this);this._updateForRotation=this._updateForRotation.bind(this);this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(l.watch(()=>this.view,this._updateRotationWatcher,l.initial))}destroy(){this.view=null}get canShowNorth(){return m.canShowNorth(this.view)}get state(){return!this.view?.ready||
"2d"===this.view.type&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){if(this.view?.ready){var d={};"2d"===this.view?.type?d.rotation=0:d.heading=0;this.callGoTo({target:d})}}_updateForRotation(d){void 0!==d&&null!==d&&(this.orientation={z:d})}_updateForCamera(d){d&&(this.orientation={x:0,y:0,z:-d.heading})}_updateRotationWatcher(d){this.removeAllHandles();d&&this.addHandles("2d"===d.type?l.watch(()=>d?.rotation,this._updateForRotation,l.initial):
l.watch(()=>d?.camera,this._updateForCamera,l.initial))}};c.__decorate([f.property({readOnly:!0})],g.prototype,"canShowNorth",null);c.__decorate([f.property()],g.prototype,"orientation",void 0);c.__decorate([f.property({readOnly:!0})],g.prototype,"state",null);c.__decorate([f.property()],g.prototype,"view",void 0);return g=c.__decorate([t.subclass("esri.widgets.CompassViewModel")],g)})},"esri/widgets/Compass/utils":function(){define(["exports"],function(c){c.canShowNorth=function(g){return g?.spatialReference?.isWebMercator||
g?.spatialReference?.isGeographic||!1};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(c,g,l,f,x,k,u,t){c.GoToMixin=m=>{m=class extends m{constructor(...a){super(...a);this.view=this.goToOverride=null}callGoTo(a){const {view:d}=
this;l.assertIsSome(d);return this.goToOverride?this.goToOverride(d,a):d.goTo(a.target,a.options)}};g.__decorate([f.property()],m.prototype,"goToOverride",void 0);g.__decorate([f.property()],m.prototype,"view",void 0);return m=g.__decorate([t.subclass("esri.widgets.support.GoTo")],m)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Compass/css":function(){define(["exports","../support/legacyIcon"],function(c,g){c.css={base:"esri-compass",widgetIcon:g.legacyIcon.locateCircled,
iconContainer:"esri-compass__icon-container"};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/NavigationToggle":function(){define("require ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ./NavigationToggle/css ./NavigationToggle/NavigationToggleViewModel ../chunks/componentsUtils ./support/globalCss ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(c,g,l,f,x,k,u,t,m,a,d,h,q,v,n){f=class extends t{constructor(e,r){super(e,r);this.iconClass=m.css.widgetIcon;this.messages=this.icon=null;this.viewModel=new a;this.toggle=()=>this.viewModel.toggle();this._rotateButton=this._panButton=null;this._toggle=()=>{("pan"===this.viewModel?.navigationMode?this._rotateButton:this._panButton)?.setFocus();this.toggle()}}loadDependencies(){return d.loadCalciteComponents({button:()=>new Promise((e,r)=>c(["../chunks/calcite-button"],e,r))})}get label(){return this.messages?.widgetLabel??
""}set label(e){this._overrideIfSome("label",e)}set layout(e){"horizontal"!==e&&(e="vertical");this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e="disabled"===this.viewModel?.state,r="pan"===this.viewModel?.navigationMode,C=this.messages.toggle;return n.tsx("div",{class:this.classes(m.css.base,h.globalCss.widget,{[m.css.isLayoutHorizontal]:"horizontal"===this.layout})},n.tsx("calcite-button",{afterCreate:A=>{this._panButton=A},appearance:r?
"outline-fill":"solid",class:h.globalCss.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:C,onclick:this._toggle,tabIndex:r?void 0:-1,title:C}),n.tsx("calcite-button",{afterCreate:A=>{this._rotateButton=A},appearance:r?"solid":"outline-fill",class:h.globalCss.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:C,onclick:this._toggle,tabIndex:r?-1:void 0,title:C}))}};g.__decorate([l.property()],f.prototype,"iconClass",void 0);g.__decorate([l.property()],f.prototype,"icon",
void 0);g.__decorate([l.property()],f.prototype,"label",null);g.__decorate([l.property({value:"vertical"})],f.prototype,"layout",null);g.__decorate([l.property(),v.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],f.prototype,"messages",void 0);g.__decorate([l.property()],f.prototype,"view",null);g.__decorate([l.property({type:a})],f.prototype,"viewModel",void 0);return f=g.__decorate([u.subclass("esri.widgets.NavigationToggle")],f)})},"esri/widgets/NavigationToggle/css":function(){define(["exports",
"../support/legacyIcon"],function(c,g){c.css={base:"esri-navigation-toggle",widgetIcon:g.legacyIcon.pan2,isLayoutHorizontal:"esri-navigation-toggle--horizontal"};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,l,f,x,k,u,t){g=class extends g{constructor(m){super(m);this.navigationMode="pan";this.view=null}initialize(){this.addHandles(l.when(()=>this.view?.inputManager,()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.view?.ready&&"3d"===this.view?.type?"ready":"disabled"}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){const m=this.view?.inputManager;m&&(m.primaryDragAction=
"pan"===this.navigationMode?"pan":"rotate")}};c.__decorate([f.property({readOnly:!0})],g.prototype,"state",null);c.__decorate([f.property()],g.prototype,"navigationMode",void 0);c.__decorate([f.property()],g.prototype,"view",void 0);return g=c.__decorate([t.subclass("esri.widgets.NavigationToggleViewModel")],g)})},"esri/widgets/Zoom":function(){define("require ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ../chunks/componentsUtils ./support/globalCss ./support/legacyIcon ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ./Zoom/ZoomViewModel".split(" "),
function(c,g,l,f,x,k,u,t,m,a,d,h,q,v,n){var e=d.legacyIcon.zoomInMagnifyingGlass;f=class extends t{constructor(r,C){super(r,C);this.iconClass=e;this.messages=this.icon=null;this.viewModel=new n;this.zoomIn=()=>this.viewModel.zoomIn();this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return m.loadCalciteComponents({button:()=>new Promise((r,C)=>c(["../chunks/calcite-button"],r,C))})}get label(){return this.messages?.widgetLabel??""}set label(r){this._overrideIfSome("label",r)}set layout(r){"horizontal"!==
r&&(r="vertical");this._set("layout",r)}set view(r){this.viewModel.view=r}get view(){return this.viewModel.view}render(){const r={["esri-zoom--horizontal"]:"horizontal"===this.layout},{canZoomIn:C,canZoomOut:A}=this.viewModel,{zoomIn:b,zoomOut:w}=this.messages;return v.tsx("div",{class:this.classes("esri-zoom",a.globalCss.widget,r)},v.tsx("calcite-button",{class:a.globalCss.widgetButton,disabled:!C,iconStart:"plus",kind:"neutral",label:b,onclick:this.zoomIn,title:b}),v.tsx("calcite-button",{class:a.globalCss.widgetButton,
disabled:!A,iconStart:"minus",kind:"neutral",label:w,onclick:this.zoomOut,title:w}))}};g.__decorate([l.property()],f.prototype,"iconClass",void 0);g.__decorate([l.property()],f.prototype,"icon",void 0);g.__decorate([l.property()],f.prototype,"label",null);g.__decorate([l.property({value:"vertical"})],f.prototype,"layout",null);g.__decorate([l.property(),q.messageBundle("esri/widgets/Zoom/t9n/Zoom")],f.prototype,"messages",void 0);g.__decorate([l.property()],f.prototype,"view",null);g.__decorate([l.property({type:n})],
f.prototype,"viewModel",void 0);return f=g.__decorate([u.subclass("esri.widgets.Zoom")],f)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(c,g,l,f,x,k,u,t,m,a){g=class extends g{constructor(d){super(d)}destroy(){this.view=
null}get canZoomIn(){return null!=this._zoomConditions&&this._zoomConditions.canZoomIn}get canZoomOut(){return null!=this._zoomConditions&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(d){d?"2d"===d.type?this._zoomConditions=new m({view:d}):"3d"===d.type&&(this._zoomConditions=new a({view:d})):this._zoomConditions=null;this._set("view",d)}zoomIn(){if(this.canZoomIn){var d=this.view;"2d"===d.type?d.mapViewNavigation.zoomIn():l.ignoreAbortErrors(d.goTo({zoomFactor:2}))}}zoomOut(){if(this.canZoomOut){var d=
this.view;"2d"===d.type?d.mapViewNavigation.zoomOut():l.ignoreAbortErrors(d.goTo({zoomFactor:.5}))}}};c.__decorate([f.property()],g.prototype,"_zoomConditions",void 0);c.__decorate([f.property()],g.prototype,"canZoomIn",null);c.__decorate([f.property()],g.prototype,"canZoomOut",null);c.__decorate([f.property({readOnly:!0})],g.prototype,"state",null);c.__decorate([f.property()],g.prototype,"view",null);return g=c.__decorate([t.subclass("esri.widgets.Zoom.ZoomViewModel")],g)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,l,f,x,k,u){g=class extends g{get canZoomIn(){if(!this.view?.ready)return!1;const t=this.view?.constraints?.effectiveMaxScale;return 0===t||this._scale>t}get canZoomOut(){var {view:t}=this;if(!t?.ready)return!1;t=t.constraints?.effectiveMinScale;return 0===t||this._scale<t}get _scale(){const t=this.view?.animation?.target;return(t&&"then"in t?void 0:t?.scale)??this.view?.scale??0}};c.__decorate([l.property({readOnly:!0})],g.prototype,"canZoomIn",null);c.__decorate([l.property({readOnly:!0})],
g.prototype,"canZoomOut",null);c.__decorate([l.property()],g.prototype,"view",void 0);c.__decorate([l.property()],g.prototype,"_scale",null);return g=c.__decorate([u.subclass("esri.widgets.Zoom.ZoomConditions2D")],g)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(c,g,l,f,x,k,u){g=
class extends g{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};c.__decorate([l.property({readOnly:!0})],g.prototype,"canZoomIn",null);c.__decorate([l.property({readOnly:!0})],g.prototype,"canZoomOut",null);c.__decorate([l.property()],g.prototype,"view",void 0);return g=c.__decorate([u.subclass("esri.widgets.Zoom.ZoomConditions3D")],g)})},"esri/views/ui/2d/DefaultUI2D":function(){define("../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../DefaultUI".split(" "),
function(c,g,l,f,x,k,u){l=class extends u{constructor(t){super(t);this.components=["attribution","zoom"]}};c.__decorate([g.property()],l.prototype,"components",void 0);return l=c.__decorate([k.subclass("esri.views.ui.2d.DefaultUI2D")],l)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,l,f,x,k,u,t){var m;l=m=class extends l.JSONSupport{constructor(a){super(a);this.color=new g([0,0,0,1])}clone(){return new m(f.clone({color:this.color}))}};c.__decorate([x.property({type:g,json:{write:!0}})],l.prototype,"color",void 0);return l=m=c.__decorate([t.subclass("esri.webmap.background.ColorBackground")],l)})},"*noref":1}});
define("require ../chunks/tslib.es6 ../Viewpoint ../core/Collection ../core/CollectionFlattener ../core/Error ../core/has ../core/Logger ../core/maybe ../core/reactiveUtils ../core/workers/workers ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../core/accessorSupport/ensureType ../geometry/projection ../layers/support/TileInfo ./BreakpointsOwner ./DOMContainer ./PopupView ./View ./2d/AnimationManager ./2d/FrameTask ./2d/GoToManager ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/tiling/TileInfoView ./2d/tiling/TileKey ./2d/tiling/TileQueue ./2d/tiling/TileStrategy ./2d/viewpointUtils ./2d/ViewStateManager ./2d/input/MapViewInputManager ./2d/layers/features/support/TileStore ./2d/support/HighlightOptions ./2d/support/hitTestUtils ./2d/support/screenshotUtils ./2d/support/StationaryManager ./2d/support/Timeline ./support/screenUtils ./support/WebGLRequirements ./ui/DefaultUI ./ui/2d/DefaultUI2D ../webmap/utils ../webmap/background/ColorBackground".split(" "),function(c,
g,l,f,x,k,u,t,m,a,d,h,q,v,n,e,r,C,A,b,w,p,B,y,F,H,J,Q,X,Y,V,ba,da,z,E,L,U,G,I,M,T,W,aa,ea,D,N){async function K(){const [,{GraphicsView2D:O,GraphicContainer:S,LabelManager:ca,MapViewNavigation:ha,MagnifierView2D:ma,Stage:ka}]=await Promise.all([new Promise((na,la)=>c(["./2d/webglDeps"],na,la)),new Promise((na,la)=>c(["./2d/mapViewDeps"],na,la))]);R=O;Z=S;fa=ca;ja=ha;ia=ma;P=ka}let P,R,Z,fa,ja,ia;v=class extends A.BreakpointsOwner(w.PopupView(b.DOMContainer(p))){constructor(O){super(O);this.stage=
this._magnifierView=null;this._resolveWhenReady=[];this.rootLayerViews=new x({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null});this.featuresTilingScheme=null;this.fullOpacity=1;this.goToManager=new F.GoToManager({view:this});this.graphicsView=null;this.stateManager=new da.ViewStateManager({constraints:new J({view:this})});this.stationaryManager=new I.StationaryManager;this.mapViewNavigation=this.labelManager=
null;this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};this.supersampleScreenshotsEnabled=!0;this.supportsGround=!1;this.frameTask=new y(this);this.floors=new f;this.highlightOptions=new L;this.inputManager=new z({view:this});this.map=null;this.spatialReferenceLocked=!1;this.timeline=new M.Timeline;this.type="2d";this.ui=new ea;this.test={takeScreenshot:async S=>G.takeRawScreenshot(this._getScreenshotView(S),S)};this.padding={top:0,
right:0,bottom:0,left:0};this.addHandles([a.watch(()=>this.viewpoint,()=>this.stationaryManager.flip(),a.sync),this.on("resize",S=>this.stateManager.resize(S.width,S.height))]);d.initialize()}destroy(){this._set("preconditionsReady",!1);this.frameTask=m.destroyMaybe(this.frameTask);this.goToManager.destroy();this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)}get graphicsTileStore(){return new E(this.featuresTilingScheme)}get constraintsInfo(){const O=this.defaultsFromMap?.tileInfo,
S=this.spatialReference;return{lods:O?.spatialReference?.equals(S)?O.lods:null,spatialReference:S}}get state(){return this.stateManager.state}get initialExtentRequired(){if(!this.stateManager)return!1;const {scale:O,constraints:S,center:ca,viewpoint:ha,extent:ma}=this;let ka=this.zoom;if(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint||ma)return!1;S?.effectiveLODs||(ka=-1);return ca&&(0!==O||-1!==ka)||null!=ha?.targetGeometry&&("extent"===ha.targetGeometry.type||
ha.scale)?!1:!0}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get typeSpecificPreconditionsReady(){const O=this._getDefaultViewpoint();return O?r.isLoadedOrLoadFor(O.targetGeometry.spatialReference,this.spatialReference):!1}set animation(O){var S=this._get("animation");O!==S&&(S&&S.stop(),O!==this.animationManager.animation&&this.animationManager.stop(),!O||O.isFulfilled()?(this._set("animation",
null),this.frameTask.animationInProgress=!1):(this._set("animation",O),this.frameTask.animationInProgress=!0,S=()=>{this.destroyed||(O===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame()),this.frameTask.animationInProgress=!1)},O.when(S,S)))}get background(){return D.isWebMap(this.map)?this.map.initialViewProperties.background:null}set background(O){this._override("background",O)}get center(){return this.stateManager?.center??null}set center(O){this.stateManager.center=
O}get constraints(){return this.stateManager?.constraints}set constraints(O){O.view=this;const S=this.stateManager.constraints;this.stateManager.constraints=O;S?.destroy()}get extent(){return this.stateManager?.extent??null}set extent(O){this.stateManager.extent=O}get padding(){return this.stateManager?.padding}set padding(O){this.stateManager&&(this.stateManager.padding=O)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(O){this.stateManager.resizeAlign=
O}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(O){const {rotationEnabled:S}=this.constraints;this.constraints.rotationEnabled=!0;this.stateManager.rotation=O;this.constraints.rotationEnabled=S}get scale(){return this.stateManager?.scale??0}set scale(O){this.stateManager&&(this.stateManager.scale=O)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get updating(){const O=
!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||!0===this.graphicsView.updating||this.allLayerViews.some(S=>!S.destroyed&&!("layerViews"in S)&&!0===S.updating));if(u("esri-2d-log-updating")){const S=this.allLayerViews.reduce((ca,ha)=>({...ca,[`${ha.layer.id}(${ha.layer.type})`]:!ha.destroyed&&!("layerViews"in ha)&&ha.updating}),{});console.log(`Updating MapView: ${O}\n-> Null LayerViewManager: ${!this.layerViewManager}\n-> Null LabelManager: ${!this.labelManager}\n-> Null GraphicsView: ${!this.graphicsView}\n-> layerViewManager.updating: ${this.layerViewManager?.updating}\n-> labelManager.updating: ${this.labelManager?.updating}\n-> graphicsView.updating: ${this.graphicsView?.updating}\n-> allLayerViews: ${JSON.stringify(S)}\n`)}return O}get viewpoint(){return this.stateManager.viewpoint??
null}set viewpoint(O){this.stateManager.viewpoint=O;this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(O){this.stateManager.zoom=O}get navigating(){return this.mapViewNavigation?.interacting??!1}goTo(O,S){return this.goToManager.goTo(O,S)}async hitTest(O,S){return U.hitTest(this,O,S)}async takeScreenshot(O){return G.takeScreenshot(this._getScreenshotView(O),O)}toMap(O){if(!this.ready)return null;O=T.isSupportedScreenPointEvent(O)?T.createScreenPointFromSupportedEvent(this,
O):O;return this.stateManager.toMap(O)}toScreen(O,S){return this.stateManager.toScreen(O,S)}on(O,S,ca,ha){return(ca=this.inputManager&&this.viewEvents.on(O,S,ca,ha))?ca:super.on(O,S)}hasEventListener(O){return super.hasEventListener(O)||this.viewEvents.hasHandler(O)}whenLayerView(O){return super.whenLayerView(O)}graphicChanged(O){this.graphicsView&&this.graphicsView.graphicUpdateHandler(O)}whenReady(){return new Promise(O=>{this.ready?O(this):this._resolveWhenReady.push(O)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&
"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return D.isWebMap(this.map)?this.map.initialViewProperties.timeZone:null}hasLayerViewModule(O){return H.layerView2DImporter.hasLayerViewModule(O)}importLayerView(O){return H.layerView2DImporter.importLayerView(O)}pixelSizeAt(){return this.ready?this.resolution:(t.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),
null)}async popupHitTest(O){const S=this.toMap(O);O=await this.hitTest(O);const ca=this.allLayerViews.toArray().reverse(),ha=new globalThis.Map(ca.map(oa=>[oa.layer.uid,oa])),ma=[];let ka=0,na=0;for(;ka<O.results.length||na<ca.length;){var la=O.results.at(ka);if(la&&"graphic"!==la.type){++ka;continue}const oa=ha.get((la?.layer??la?.graphic.layer)?.uid);(!la||oa)&&na<ca.length&&ca.at(na)!==oa?(la=ca.at(na),"fetchPopupFeaturesAtLocation"in la&&ma.push({mapPoint:S,layerView:la}),++na):la&&(ma.push({graphic:la.graphic,
layerView:oa}),++ka)}return{hits:ma,location:S}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let O=W.check(this.type);u("safari")&&9>u("safari")&&(O=new k("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:u("safari")}));if(null!=O)throw t.getLogger(this).warn("#validate()",O.message),O;}loadAsyncDependencies(){return K()}_getDefaultViewpoint(){const {constraints:O,initialExtent:S,
map:ca,padding:ha,size:ma}=this;if(!O)return null;var ka=ca&&"initialViewProperties"in ca?ca.initialViewProperties:void 0;const na=this.stateManager.getUserStartupOptions(this.size);var la=ka?.viewpoint;const oa=la?.targetGeometry?.extent??S;var pa=oa?.center;ka=la?.rotation??0;la=la?.scale||oa&&ba.extentToScale(oa,[ma[0]-ha.left-ha.right,ma[1]-ha.top-ha.bottom]);pa=na.center??pa;la=na.scale??la;return pa&&la?new l({targetGeometry:pa,scale:la,rotation:na.rotation??ka}):null}_startup(){this.timeline.begin("MapView Startup");
var O=this._getDefaultViewpoint();this.stateManager.startup(O,this.size,this.spatialReference,this.defaultsFromMap.extent?.center);this.graphics.owner=this;const S=new P(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=S;this._magnifierView=new ia;this._magnifierView.magnifier=this.magnifier;O=new fa({view:this});this._set("labelManager",
O);O=new B({view:this});this._set("animationManager",O);O=new ja({view:this,animationManager:O});this._set("mapViewNavigation",O);this._setupSpatialReferenceDependentProperties();this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),S.on("webgl-error",ca=>this.fatalError=ca.error),a.watch(()=>this.stationary,ca=>S.stationary=ca,a.syncAndInitial),a.watch(()=>this.background,ca=>{S.backgroundColor=ca?.color;this._magnifierView.backgroundColor=ca?.color},a.syncAndInitial),
a.watch(()=>this.magnifier,ca=>this._magnifierView.magnifier=ca,a.syncAndInitial),a.watch(()=>this.renderingOptions,ca=>S.renderingOptions=ca,a.syncAndInitial),a.watch(()=>this.highlightOptions,ca=>S.highlightOptions=ca,a.syncAndInitial),a.watch(()=>this.state.id,()=>S.state=this.state,a.syncAndInitial)],"map-view");this._updateStageChildren();O=this._resolveWhenReady;this._resolveWhenReady=[];O.forEach(ca=>ca(this));this.timeline.end("MapView Startup");this.frameTask.start();this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties();
this.removeHandles("map-view");this.mapViewNavigation.destroy();this._set("mapViewNavigation",null);this.animation=null;this.animationManager.destroy();this._set("animationManager",null);this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this.stage.destroy();this.stage=null;this._set("graphicsView",null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;this.frameTask.stop();this.stationaryManager.clear();
this._set("ready",!1);this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren();this.rootLayerViews.forEach(O=>{this.stage.addChild(O.container)});this.stage.addChild(this.graphicsView.container);this.stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){var O=new Q(C.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",O);O=new R({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),
container:new Z(O)});this._set("graphicsView",O)}_destroySpatialReferenceDependentProperties(){const O=this.graphicsView;this._set("graphicsView",null);O.destroy();this._set("featuresTilingScheme",null)}_getScreenshotView(O){const {allLayerViews:S,padding:ca,size:ha,stage:ma}=this;return{allLayerViews:S,backgroundColor:O?.ignoreBackground?null:this.background?.color,padding:ca,size:ha,stage:ma}}_spatialReferenceChanged(O){if(this.ready){this.frameTask.stop();for(const S of this.allLayerViews)S.processDetach();
this._destroySpatialReferenceDependentProperties();this.stateManager.changeSpatialReference(O);this.stage.state=this.state;this._setupSpatialReferenceDependentProperties();for(const S of this.allLayerViews)S.processAttach();this.frameTask.requestFrame();this.frameTask.start();this._updateStageChildren()}}};v.type="2d";g.__decorate([h.property({readOnly:!0})],v.prototype,"animationManager",void 0);g.__decorate([h.property({constructOnly:!0})],v.prototype,"deactivatedWebGLExtensions",void 0);g.__decorate([h.property({constructOnly:!0})],
v.prototype,"debugWebGLExtensions",void 0);g.__decorate([h.property({readOnly:!0})],v.prototype,"featuresTilingScheme",void 0);g.__decorate([h.property({readOnly:!0})],v.prototype,"fullOpacity",void 0);g.__decorate([h.property()],v.prototype,"goToManager",void 0);g.__decorate([h.property({readOnly:!0})],v.prototype,"graphicsTileStore",null);g.__decorate([h.property()],v.prototype,"graphicsView",void 0);g.__decorate([h.property()],v.prototype,"stateManager",void 0);g.__decorate([h.property()],v.prototype,
"constraintsInfo",null);g.__decorate([h.property({readOnly:!0})],v.prototype,"state",null);g.__decorate([h.property()],v.prototype,"initialExtentRequired",null);g.__decorate([h.property()],v.prototype,"labelManager",void 0);g.__decorate([h.property({readOnly:!0})],v.prototype,"mapViewNavigation",void 0);g.__decorate([h.property({constructOnly:!0})],v.prototype,"renderCanvas",void 0);g.__decorate([h.property()],v.prototype,"renderingOptions",void 0);g.__decorate([h.property({constructOnly:!0})],v.prototype,
"supersampleScreenshotsEnabled",void 0);g.__decorate([h.property({readOnly:!0})],v.prototype,"supportsGround",void 0);g.__decorate([h.property()],v.prototype,"_defaultsFromMapSettings",null);g.__decorate([h.property({readOnly:!0})],v.prototype,"typeSpecificPreconditionsReady",null);g.__decorate([h.property()],v.prototype,"animation",null);g.__decorate([h.property({type:N})],v.prototype,"background",null);g.__decorate([h.property()],v.prototype,"center",null);g.__decorate([h.property({type:J})],v.prototype,
"constraints",null);g.__decorate([h.property()],v.prototype,"extent",null);g.__decorate([h.property()],v.prototype,"floors",void 0);g.__decorate([h.property({type:L})],v.prototype,"highlightOptions",void 0);g.__decorate([h.property({readOnly:!0})],v.prototype,"inputManager",void 0);g.__decorate([h.property()],v.prototype,"map",void 0);g.__decorate([h.property()],v.prototype,"padding",null);g.__decorate([h.property({readOnly:!0})],v.prototype,"rendering",null);g.__decorate([h.property()],v.prototype,
"resizeAlign",null);g.__decorate([h.property({readOnly:!0})],v.prototype,"resolution",null);g.__decorate([h.property()],v.prototype,"rotation",null);g.__decorate([h.property()],v.prototype,"scale",null);g.__decorate([h.property({constructOnly:!0})],v.prototype,"spatialReferenceLocked",void 0);g.__decorate([h.property()],v.prototype,"stationary",null);g.__decorate([h.property({type:M.Timeline,readOnly:!0})],v.prototype,"timeline",void 0);g.__decorate([h.property({readOnly:!0})],v.prototype,"type",
void 0);g.__decorate([h.property({readOnly:!0})],v.prototype,"updating",null);g.__decorate([h.property()],v.prototype,"viewpoint",null);g.__decorate([h.property()],v.prototype,"zoom",null);g.__decorate([h.property({readOnly:!0})],v.prototype,"navigating",null);g.__decorate([h.property(),q.cast(O=>O instanceof aa?O:e.ensureClass(ea,O))],v.prototype,"ui",void 0);return v=g.__decorate([n.subclass("esri.views.MapView")],v)});