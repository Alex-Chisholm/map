// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
require({cache:{"esri/chunks/arcade":function(){define("require exports ../arcade/arcadeCompiler ../arcade/ArcadeModuleResolver ../arcade/arcadeRuntime ../arcade/executionError ../arcade/parser ../arcade/treeAnalysis ../arcade/functions/geomsync ../core/has ../core/maybe".split(" "),function(u,M,C,b,a,c,m,k,g,p,F){function l(K,O){if(!0===O.useAsync||!0===K.isAsync)return D(K,O);if(p("esri-csp-restrictions"))return function(S){return a.executeScript(K,S)};try{return C.compileScript(K,O)}catch(S){if("esri.arcade.arcadeuncompilableerror"===
S.declaredRootClass)return function(fa){return a.executeScript(K,fa)};throw S;}}function D(K,O){if(null===P)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.AsyncNotEnabled,null);if(p("esri-csp-restrictions"))return function(S){return P.executeScript(K,S)};try{return C.compileScript(K,O,!0)}catch(S){if("esri.arcade.arcadeuncompilableerror"===S.declaredRootClass)return function(fa){return P.executeScript(K,fa)};throw S;}}function z(K){a.extend(K);C.extend(K,"sync");null===P?R.push(K):(C.extend(K,
"async"),P.extend(K))}function d(K,O=[]){return m.parseScript(K,O)}function f(K,O,S=[]){K=m.parseScript(K,S);return A(K,O)}function A(K,O){if(!0===O.useAsync||!0===K.isAsync){if(null===P)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.AsyncNotEnabled,null);return P.executeScript(K,O)}return a.executeScript(K,O)}function r(K,O){return k.referencesMember(K,O)}function w(K,O){return k.referencesFunction(K,O)}function e(K,O=!1){void 0===O&&(O=!1);return k.findFieldLiterals(K)}function E(K){return k.findExpectedFieldLiterals(K)}
function B(K,O=[]){void 0===K.usesGeometry&&k.findScriptDependencies(K,O);return!0===K.usesGeometry}function t(){return T?T:T=v()}async function v(){const K=await new Promise((O,S)=>u(["../geometry/geometryEngine"],O,S));H=!0;g.setGeometryEngine(K);return!0}function G(){return null!==ha?ha:ha=n()}async function n(){await C.enableAsyncSupport();P=await new Promise((K,O)=>u(["../arcade/arcadeAsyncRuntime"],K,O));for(const K of R)P.extend(K),C.extend(K,"async");R=null;return!0}function q(){return N}
function W(){return P?!0:!1}function ca(){return H}function qa(){return pa?pa:pa=ya()}async function ya(){await G();const [K,O,S,fa,ea,V]=await Promise.all([new Promise((ja,Y)=>u(["../arcade/featureSetUtils"],ja,Y)),new Promise((ja,Y)=>u(["../arcade/functions/featuresetbase"],ja,Y)),new Promise((ja,Y)=>u(["../arcade/functions/featuresetgeom"],ja,Y)),new Promise((ja,Y)=>u(["../arcade/functions/featuresetstats"],ja,Y)),new Promise((ja,Y)=>u(["../arcade/functions/featuresetstring"],ja,Y)),new Promise((ja,
Y)=>u(["../arcade/functions/knowledgegraph"],ja,Y))]);h=K;P.extend([O,S,fa,ea,V]);C.extend([O,S,fa,ea,V],"async");return N=!0}function oa(K,O=[]){void 0===K.usesFeatureSet&&k.findScriptDependencies(K,O);return!0===K.usesFeatureSet}function da(K,O=[]){void 0===K.isAsync&&k.findScriptDependencies(K,O);return!0===K.isAsync}async function U(K,O,S=[],fa=!1,ea=null){return ka(new Set,K,O,S,fa,ea)}async function ka(K,O,S,fa=[],ea=!1,V=null){O="string"===typeof O?d(O):O;const ja=[];if(O&&(!1===H&&(B(O)||
ea)&&ja.push(t()),!1===W()&&(!0===O.isAsync||S)&&ja.push(G()),!1===N)){var Y;if(!(Y=oa(O)))a:{if(fa)for(const ba of fa)if(r(O,ba)){Y=!0;break a}Y=!1}Y&&ja.push(qa())}ja.length&&await Promise.all(ja);await la(K,O,V,S,ea);return!0}function wa(K,O=[]){void 0===K.usesModules&&k.findScriptDependencies(K,O);return!0===K.usesModules}async function la(K,O,S=null,fa=!1,ea=!1){var V=k.findModuleImports(O);null===S&&0<V.length&&(S=b.ArcadeModuleResolver.getDefault());O.loadedModules={};for(const ja of V){F.assertIsSome(S);
V=S.normalizeModuleUri(ja.source);if(K.has(V.uri))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.CircularModules,null);K.add(V.uri);const Y=await S.fetchModule(V);await ka(K,Y,fa,[],ea,S);K.delete(V.uri);Y.isAsync&&(O.isAsync=!0);Y.usesFeatureSet&&(O.usesFeatureSet=!0);Y.usesGeometry&&(O.usesGeometry=!0);O.loadedModules[ja.libname]={uri:V.uri,script:Y}}}function xa(K){if(B(K))return!0;K=k.findFunctionCalls(K);let O=!1;for(let S=0;S<K.length;S++)if(I.has(K[S])){O=!0;break}return O}function J(){return h}
const I=new Set("feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" "));let N=!1,H=!1,P=null,R=[],T=null,ha=null,pa=null,h=null;const x=Object.freeze(Object.defineProperty({__proto__:null,_loadScriptDependenciesImpl:ka,compileScript:l,enableAsyncSupport:G,enableAsyncSupportImpl:n,enableFeatureSetSupport:qa,enableFeatureSetSupportImpl:ya,enableGeometrySupport:t,enableGeometrySupportImpl:v,executeScript:A,extend:z,extractExpectedFieldLiterals:E,
extractFieldLiterals:e,featureSetUtils:J,isAsyncEnabled:W,isFeatureSetSupportEnabled:q,isGeometryEnabled:ca,loadDependentModules:la,loadScriptDependencies:U,parseAndExecuteScript:f,parseScript:d,referencesFunction:w,referencesMember:r,scriptIsAsync:da,scriptTouchesGeometry:xa,scriptUsesFeatureSet:oa,scriptUsesGeometryEngine:B,scriptUsesModules:wa},Symbol.toStringTag,{value:"Module"}));M._loadScriptDependenciesImpl=ka;M.arcade=x;M.compileScript=l;M.enableAsyncSupport=G;M.enableAsyncSupportImpl=n;M.enableFeatureSetSupport=
qa;M.enableFeatureSetSupportImpl=ya;M.enableGeometrySupport=t;M.enableGeometrySupportImpl=v;M.executeScript=A;M.extend=z;M.extractExpectedFieldLiterals=E;M.extractFieldLiterals=e;M.featureSetUtils=J;M.isAsyncEnabled=W;M.isFeatureSetSupportEnabled=q;M.isGeometryEnabled=ca;M.loadDependentModules=la;M.loadScriptDependencies=U;M.parseAndExecuteScript=f;M.parseScript=d;M.referencesFunction=w;M.referencesMember=r;M.scriptIsAsync=da;M.scriptTouchesGeometry=xa;M.scriptUsesFeatureSet=oa;M.scriptUsesGeometryEngine=
B;M.scriptUsesModules=wa})},"esri/arcade/arcadeCompiler":function(){define("require exports ./ArcadeModule ./ArcadeModuleLoader ./Dictionary ./executionError ./Feature ./FunctionWrapper ../chunks/languageUtils ./treeAnalysis ../chunks/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../core/promiseUtils ../geometry/Geometry ../geometry/SpatialReference".split(" "),function(u,M,C,b,a,c,m,k,g,p,F,l,D,z,d,f,A,r,w,e){function E(h,
x,K){try{return K(h,null,x.arguments)}catch(O){throw O;}}function B(h,x){try{switch(x.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return ca(h,x);case "VariableDeclaration":var K=[];for(var O=0;O<x.declarations.length;O++)K.push(B(h,x.declarations[O]));return K.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":case "Program":return q(h,x);case "FunctionDeclaration":{const ia=x.id.name.toLowerCase();W(ia);var S="",fa=!1;void 0!==h.globalScope[ia]?
S=ia:void 0!==h.globalScope._SymbolsMap[ia]?S=h.globalScope._SymbolsMap[ia]:h.undeclaredGlobalsInFunctions.has(ia)?(S=h.undeclaredGlobalsInFunctions.get(ia).manglename,h.globalScope._SymbolsMap[ia]=S,h.mangleMap[ia]=S,h.undeclaredGlobalsInFunctions.delete(ia),fa=!0):(S=oa(h),h.globalScope._SymbolsMap[ia]=S,h.mangleMap[ia]=S);O={isAsync:h.isAsync,console:h.console,exports:h.exports,undeclaredGlobalsInFunctions:h.undeclaredGlobalsInFunctions,customfunctions:h.customfunctions,moduleFactory:h.moduleFactory,
moduleFactoryMap:h.moduleFactoryMap,libraryResolver:h.libraryResolver,lrucache:h.lrucache,interceptor:h.interceptor,services:h.services,symbols:h.symbols,mangleMap:h.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:h.depthCounter,globalScope:h.globalScope};var ea="new lang.UserDefinedCompiledFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";for(var V=0;V<x.params.length;V++){const Ea=
x.params[V].name.toLowerCase();W(Ea);const Da=oa(h);O.localScope._SymbolsMap[Ea]=Da;O.mangleMap[Ea]=Da;ea+="lscope['"+Da+"']\x3darguments["+V.toString()+"];\n"}!0===h.isAsync?(ea=ea+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(q(O,x.body)+"\n return lastStatement; "),ea=ea+"});  }, runtimeCtx),"+(x.params.length+")")):ea+=q(O,x.body)+"\n return lastStatement; }, runtimeCtx),"+x.params.length+")";ea+="\n lastStatement \x3d lc.voidOperation; \n";K=fa?"gscope[lang.setAssig('"+S+"', runtimeCtx)]\x3d"+
ea:"gscope['"+S+"']\x3d"+ea}return K;case "ImportDeclaration":{const ia=x.specifiers[0].local.name.toLowerCase();W(ia);const Ea=h.libraryResolver?.loadLibrary(ia),Da=oa(h);void 0===h.moduleFactory[Ea.uri]&&(h.moduleFactory[Ea.uri]=J(Ea.syntax,{interceptor:h.interceptor,services:h.services,moduleFactory:h.moduleFactory,lrucache:h.lrucache,timeZone:h.timeZone??null,libraryResolver:h.libraryResolver,customfunctions:h.customfunctions,vars:{}},h.isAsync));h.moduleFactoryMap[Da]=Ea.uri;x="";x=h.isAsync?
"(yield lang.loadModule('"+Da+"', runtimeCtx) ); ":"lang.loadModule('"+Da+"', runtimeCtx); ";void 0!==h.globalScope[ia]?S="gscope['"+ia+"']\x3d"+x:void 0!==h.globalScope._SymbolsMap[ia]?S="gscope['"+h.globalScope._SymbolsMap[ia]+"']\x3d"+x:(K="",h.undeclaredGlobalsInFunctions.has(ia)?(K=h.undeclaredGlobalsInFunctions.get(ia).manglename,h.undeclaredGlobalsInFunctions.delete(ia)):K=oa(h),h.globalScope._SymbolsMap[ia]=K,h.mangleMap[ia]=K,S="gscope[lang.setAssig('"+K+"', runtimeCtx)]\x3d"+x)}return S;
case "ExportNamedDeclaration":const ra=B(h,x.declaration);if("FunctionDeclaration"===x.declaration.type)h.exports[x.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===x.declaration.type)for(const ia of x.declaration.declarations)h.exports[ia.id.name.toLowerCase()]="variable";return ra;case "ReturnStatement":var ja=null===x.argument?"return lc.voidOperation":"return "+B(h,x.argument);return ja;case "IfStatement":return n(h,x);case "ExpressionStatement":var Y="AssignmentExpression"===
x.expression.type?"lastStatement \x3d lc.voidOperation; "+B(h,x.expression)+"; \n ":"lastStatement \x3d "+B(h,x.expression)+"; ";return Y;case "AssignmentExpression":return v(h,x);case "UpdateExpression":return t(h,x);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{K=[];O=0;for(const ia of x.quasis)K.push(ia.value?JSON.stringify(ia.value.cooked):JSON.stringify("")),!1===ia.tail&&(K.push(x.expressions[O]?"lang.castString(lang.aCheck("+B(h,x.expressions[O])+
", 'TemplateLiteral'))":""),O++);fa="(["+K.join(",")+"]).join('')"}catch(ia){throw ia;}return fa;case "TemplateElement":return JSON.stringify(x.value?x.value.cooked:"");case "ForStatement":K="lastStatement \x3d lc.voidOperation; \n";null!==x.init&&(K+=B(h,x.init)+"; ");const Ia=da(h),Ha=da(h);K+="var "+Ia+" \x3d true; \n do { ";null!==x.update&&(K+=" if ("+Ia+"\x3d\x3d\x3dfalse) {\n "+B(h,x.update)+"  \n}\n "+Ia+"\x3dfalse; \n");null!==x.test&&(K+="var "+Ha+" \x3d "+B(h,x.test)+"; ",K+="if ("+Ha+
"\x3d\x3d\x3dfalse) { break; } else if ("+Ha+"!\x3d\x3dtrue) { lang.error('"+c.ExecutionErrorCodes.BooleanConditionRequired+"');   }\n");K+=B(h,x.body);null!==x.update&&(K+="\n "+B(h,x.update));return K+("\n"+Ia+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":V=da(h);const Aa=da(h),X=da(h);let na="var "+V+" \x3d "+B(h,x.right)+";\n";"VariableDeclaration"===x.left.type&&(na+=B(h,x.left));let ta="VariableDeclaration"===x.left.type?x.left.declarations[0].id.name:
x.left.name;ta=ta.toLowerCase();W(ta);K="";null!==h.localScope&&(void 0!==h.localScope[ta]?K="lscope['"+ta+"']":void 0!==h.localScope._SymbolsMap[ta]&&(K="lscope['"+h.localScope._SymbolsMap[ta]+"']"));O="";if(""===K)if(void 0!==h.globalScope[ta])K="gscope['"+ta+"']";else if(void 0!==h.globalScope._SymbolsMap[ta])K="gscope['"+h.globalScope._SymbolsMap[ta]+"']";else if(null!==h.localScope)if(h.undeclaredGlobalsInFunctions.has(ta))K="gscope['"+h.undeclaredGlobalsInFunctions.get(ta).manglename+"']",O=
h.undeclaredGlobalsInFunctions.get(ta).manglename;else{const ia={manglename:oa(h),node:x.left};h.undeclaredGlobalsInFunctions.set(ta,ia);K="gscope['"+ia.manglename+"']";O=ia.manglename}O&&(na+="lang.chkAssig('"+O+"',runtimeCtx); \n");na=na+("if ("+V+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+(V+") || lc.isString("+V+")) {var ")+(Aa+"\x3d"+V+".length; \nfor(var ")+(X+"\x3d0; "+X+"\x3c"+Aa+"; "+X+"++) {\n");na+=K+"\x3d"+X+";\n";na+=B(h,x.body);na+="\n}\n";
na+=" lastStatement \x3d lc.voidOperation; \n";na+=" \n}\n";na+="else if (lc.isImmutableArray("+V+")) {";na=na+("var "+Aa+"\x3d"+V+".length(); \nfor(var ")+(X+"\x3d0; "+X+"\x3c"+Aa+"; "+X+"++) {\n");na+=K+"\x3d"+X+";\n";na+=B(h,x.body);na+="\n}\n";na+=" lastStatement \x3d lc.voidOperation; \n";na+=" \n}\n";na+="else if (( "+V+" instanceof lang.Dictionary) || ( "+V+" instanceof lang.Feature)) {";na=na+("var "+Aa+"\x3d"+V+".keys(); \nfor(var ")+(X+"\x3d0; "+X+"\x3c"+Aa+".length; "+X+"++) {\n");na+=
K+"\x3d"+Aa+"["+X+"];\n";na+=B(h,x.body);na+="\n}\n";na+=" lastStatement \x3d lc.voidOperation; \n";na+=" \n}\n";h.isAsync&&(na+="else if (lc.isFeatureSet("+V+")) {",na=na+("var "+Aa+"\x3d"+V+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(X+"\x3dlang. graphicToFeature( yield "+Aa+".next(),"+V+", runtimeCtx); "+X+"!\x3dnull; "+X+"\x3dlang. graphicToFeature( yield "+Aa+".next(),"+V+", runtimeCtx)) {\n")+(K+"\x3d"+X+";\n"),na+=B(h,x.body),na+="\n}\n",na+=" lastStatement \x3d lc.voidOperation; \n",
na+=" \n}\n");return na+"else { lastStatement \x3d lc.voidOperation; } \n";case "WhileStatement":K="lastStatement \x3d lc.voidOperation; \n";const Ja=da(h);return K+=`\n  var ${Ja} = true;\n    do {\n      ${Ja} = ${B(h,x.test)};\n      if (${Ja}==false) {\n        break;\n      }\n      if (${Ja}!==true) {\n        lang.error('${c.ExecutionErrorCodes.BooleanConditionRequired}');\n      }\n      ${B(h,x.body)}\n    }\n    while (${Ja} !== false);\n    lastStatement = lc.voidOperation;\n  `;case "Identifier":return qa(h,
x);case "MemberExpression":try{let ia;!0===x.computed?ia=B(h,x.property):(ia="'"+x.property.name+"'",W(x.property.name));var ba="lang.member("+B(h,x.object)+","+ia+")"}catch(ia){throw ia;}return ba;case "Literal":return null===x.value||void 0===x.value?"null":JSON.stringify(x.value);case "CallExpression":return ya(h,x);case "UnaryExpression":try{var ua="lang.unary("+B(h,x.argument)+",'"+x.operator+"')"}catch(ia){throw ia;}return ua;case "BinaryExpression":try{var Ba="lang.binary("+B(h,x.left)+","+
B(h,x.right)+",'"+x.operator+"')"}catch(ia){throw ia;}return Ba;case "LogicalExpression":try{if("AssignmentExpression"===x.left.type||"UpdateExpression"===x.left.type)throw new c.ArcadeCompilationError(h,c.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,x);if("AssignmentExpression"===x.right.type||"UpdateExpression"===x.right.type)throw new c.ArcadeCompilationError(h,c.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,x);if("\x26\x26"===x.operator||"||"===x.operator)var va="(lang.logicalCheck("+B(h,
x.left)+") "+x.operator+" lang.logicalCheck("+B(h,x.right)+"))";else throw new c.ArcadeCompilationError(null,c.ExecutionErrorCodes.LogicExpressionOrAnd,null);}catch(ia){throw ia;}return va;case "ArrayExpression":try{K=[];for(O=0;O<x.elements.length;O++)"Literal"===x.elements[O].type?K.push(B(h,x.elements[O])):K.push("lang.aCheck("+B(h,x.elements[O])+",'ArrayExpression')");ea="["+K.join(",")+"]"}catch(ia){throw ia;}return ea;case "ObjectExpression":K="lang.dictionary([";for(O=0;O<x.properties.length;O++){const ia=
x.properties[O];W(ia.key.name);const Ea="Identifier"===ia.key.type?"'"+ia.key.name+"'":B(h,ia.key),Da=B(h,ia.value);0<O&&(K+=",");K+="lang.strCheck("+Ea+",'ObjectExpression'),lang.aCheck("+Da+", 'ObjectExpression')"}return K+"])";case "Property":throw new c.ArcadeCompilationError(h,c.ExecutionErrorCodes.NeverReach,x);case "Array":throw new c.ArcadeCompilationError(h,c.ExecutionErrorCodes.NeverReach,x);default:throw new c.ArcadeCompilationError(h,c.ExecutionErrorCodes.Unrecognized,x);}}catch(ra){throw ra;
}}function t(h,x){let K=null;var O="";if("MemberExpression"===x.argument.type)return K=B(h,x.argument.object),!0===x.argument.computed?O=B(h,x.argument.property):(O="'"+x.argument.property.name+"'",W(x.argument.property.name)),"lang.memberupdate("+K+","+O+",'"+x.operator+"',"+x.prefix+")";K=x.argument.name.toLowerCase();W(K);if(null!==h.localScope){if(void 0!==h.localScope[K])return"lang.update(lscope, '"+K+"','"+x.operator+"',"+x.prefix+")";if(void 0!==h.localScope._SymbolsMap[K])return"lang.update(lscope, '"+
h.localScope._SymbolsMap[K]+"','"+x.operator+"',"+x.prefix+")"}if(void 0!==h.globalScope[K])return"lang.update(gscope, '"+K+"','"+x.operator+"',"+x.prefix+")";if(void 0!==h.globalScope._SymbolsMap[K])return"lang.update(gscope, '"+h.globalScope._SymbolsMap[K]+"','"+x.operator+"',"+x.prefix+")";if(null!==h.localScope){if(h.undeclaredGlobalsInFunctions.has(K))return"lang.update(gscope,lang.chkAssig( '"+h.undeclaredGlobalsInFunctions.get(K).manglename+"',runtimeCtx),'"+x.operator+"',"+x.prefix+")";O=
{manglename:oa(h),node:x.argument};h.undeclaredGlobalsInFunctions.set(K,O);return"lang.update(gscope, lang.chkAssig('"+O.manglename+"',runtimeCtx),'"+x.operator+"',"+x.prefix+")"}throw new c.ArcadeExecutionError(h,c.ExecutionErrorCodes.InvalidIdentifier,x);}function v(h,x){const K=B(h,x.right);let O=null;var S="";if("MemberExpression"===x.left.type)return O=B(h,x.left.object),!0===x.left.computed?S=B(h,x.left.property):(S="'"+x.left.property.name+"'",W(x.left.property.name)),"lang.assignmember("+
O+","+S+",'"+x.operator+"',"+K+")";O=x.left.name.toLowerCase();W(O);if(null!==h.localScope){if(void 0!==h.localScope[O])return"lscope['"+O+"']\x3dlang.assign("+K+",'"+x.operator+"', lscope['"+O+"'])";if(void 0!==h.localScope._SymbolsMap[O])return"lscope['"+h.localScope._SymbolsMap[O]+"']\x3dlang.assign("+K+",'"+x.operator+"', lscope['"+h.localScope._SymbolsMap[O]+"'])"}if(void 0!==h.globalScope[O])return"gscope['"+O+"']\x3dlang.assign("+K+",'"+x.operator+"', gscope['"+O+"'])";if(void 0!==h.globalScope._SymbolsMap[O])return"gscope['"+
h.globalScope._SymbolsMap[O]+"']\x3dlang.assign("+K+",'"+x.operator+"', gscope['"+h.globalScope._SymbolsMap[O]+"'])";if(null!==h.localScope){if(h.undeclaredGlobalsInFunctions.has(O))return"gscope[lang.chkAssig('"+h.undeclaredGlobalsInFunctions.get(O).manglename+"',runtimeCtx)]\x3dlang.assign("+K+",'"+x.operator+"', gscope['"+h.undeclaredGlobalsInFunctions.get(O).manglename+"'])";S={manglename:oa(h),node:x.argument};h.undeclaredGlobalsInFunctions.set(O,S);return"gscope[lang.chkAssig('"+S.manglename+
"',runtimeCtx)]\x3dlang.assign("+K+",'"+x.operator+"', gscope['"+S.manglename+"'])"}throw new c.ArcadeExecutionError(h,c.ExecutionErrorCodes.InvalidIdentifier,x);}function G(h,x){return"BlockStatement"===x.type?B(h,x):"ReturnStatement"===x.type||"BreakStatement"===x.type||"ContinueStatement"===x.type?B(h,x)+"; ":"UpdateExpression"===x.type?"lastStatement \x3d "+B(h,x)+"; ":"ExpressionStatement"===x.type?B(h,x):"ObjectExpression"===x.type?"lastStatement \x3d "+B(h,x)+"; ":B(h,x)+"; "}function n(h,
x){if("AssignmentExpression"===x.test.type||"UpdateExpression"===x.test.type)throw new c.ArcadeCompilationError(h,c.ExecutionErrorCodes.BooleanConditionRequired,x);return`if (lang.mustBoolean(${B(h,x.test)}, runtimeCtx) === true) {\n    ${G(h,x.consequent)}\n  } `+(null!==x.alternate?"IfStatement"===x.alternate.type?" else "+n(h,x.alternate):` else {\n      ${G(h,x.alternate)}\n    }\n`:" else {\n      lastStatement \x3d lc.voidOperation;\n    }\n")}function q(h,x){let K="";for(let O=0;O<x.body.length;O++)"EmptyStatement"!==
x.body[O].type&&(K="ReturnStatement"===x.body[O].type?K+(B(h,x.body[O])+"; \n"):"BreakStatement"===x.body[O].type?K+(B(h,x.body[O])+"; \n"):"ContinueStatement"===x.body[O].type?K+(B(h,x.body[O])+"; \n"):"UpdateExpression"===x.body[O].type?K+("lastStatement \x3d "+B(h,x.body[O])+"; \n"):"ObjectExpression"===x.body[O].type?K+("lastStatement \x3d "+B(h,x.body[O])+"; \n"):K+(B(h,x.body[O])+" \n"));return K}function W(h){if("iif"===h)throw new c.ArcadeUncompilableError;if("decode"===h)throw new c.ArcadeUncompilableError;
if("when"===h)throw new c.ArcadeUncompilableError;if("defaultvalue"===h)throw new c.ArcadeUncompilableError;}function ca(h,x){let K=null===x.init?null:B(h,x.init);K===g.voidOperation&&(K=null);x=x.id.name.toLowerCase();W(x);if(null!==h.localScope){if(void 0!==h.localScope[x])return"lscope['"+x+"']\x3d"+K+"; ";if(void 0!==h.localScope._SymbolsMap[x])return"lscope['"+h.localScope._SymbolsMap[x]+"']\x3d"+K+"; ";var O=oa(h);h.localScope._SymbolsMap[x]=O;h.mangleMap[x]=O;return"lscope['"+O+"']\x3d"+K+
"; "}if(void 0!==h.globalScope[x])return"gscope['"+x+"']\x3d"+K+"; ";if(void 0!==h.globalScope._SymbolsMap[x])return"gscope['"+h.globalScope._SymbolsMap[x]+"']\x3d"+K+"; ";if(h.undeclaredGlobalsInFunctions.has(x))return O=h.undeclaredGlobalsInFunctions.get(x).manglename,h.globalScope._SymbolsMap[x]=O,h.mangleMap[x]=O,h.undeclaredGlobalsInFunctions.delete(x),"gscope[lang.setAssig('"+O+"', runtimeCtx)]\x3d"+K+"; ";O=oa(h);h.globalScope._SymbolsMap[x]=O;h.mangleMap[x]=O;return"gscope['"+O+"']\x3d"+K+
"; "}function qa(h,x){try{const K=x.name.toLowerCase();W(K);if(null!==h.localScope){if(void 0!==h.localScope[K])return"lscope['"+K+"']";if(void 0!==h.localScope._SymbolsMap[K])return"lscope['"+h.localScope._SymbolsMap[K]+"']"}if(void 0!==h.globalScope[K])return"gscope['"+K+"']";if(void 0!==h.globalScope._SymbolsMap[K])return"gscope['"+h.globalScope._SymbolsMap[K]+"']";if(null!==h.localScope){if(h.undeclaredGlobalsInFunctions.has(K))return"gscope[lang.chkAssig('"+h.undeclaredGlobalsInFunctions.get(K).manglename+
"',runtimeCtx)]";const O={manglename:oa(h),node:x.argument};h.undeclaredGlobalsInFunctions.set(K,O);return"gscope[lang.chkAssig('"+O.manglename+"',runtimeCtx)]"}throw new c.ArcadeCompilationError(h,c.ExecutionErrorCodes.InvalidIdentifier,x);}catch(K){throw K;}}function ya(h,x){try{if("MemberExpression"===x.callee.type){if(!0===x.callee.computed)var K=B(h,x.callee.property);else K="'"+x.callee.property.name+"'",W(x.callee.property.name);var O="[";for(var S=0;S<x.arguments.length;S++)0<S&&(O+=", "),
O+=B(h,x.arguments[S]);O+="]";return h.isAsync?"(yield lang.callModuleFunction("+B(h,x.callee.object)+","+O+","+K+",runtimeCtx))":"lang.callModuleFunction("+B(h,x.callee.object)+","+O+","+K+",runtimeCtx)"}if("Identifier"!==x.callee.type)throw new c.ArcadeCompilationError(h,c.ExecutionErrorCodes.FunctionNotFound,x);const Y=x.callee.name.toLowerCase();if("iif"===Y){try{if(3!==x.arguments.length)throw new c.ArcadeCompilationError(h,c.ExecutionErrorCodes.WrongNumberOfParameters,x);const ba=da(h);var fa=
`${h.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${ba} = ${B(h,x.arguments[0])};\n\n        if (${ba} === true) {\n          return  ${B(h,x.arguments[1])};\n        }\n        else if (${ba} === false) {\n          return ${B(h,x.arguments[2])};\n        }\n        else {\n          lang.error('ExecutionErrorCodes.BooleanConditionRequired');\n        }\n      ${h.isAsync?"})}()))":"}()"}`}catch(ba){throw ba;}return fa}if("when"===
Y){try{if(3>x.arguments.length)throw new c.ArcadeCompilationError(h,c.ExecutionErrorCodes.WrongNumberOfParameters,x);if(0===x.arguments.length%2)throw new c.ArcadeCompilationError(h,c.ExecutionErrorCodes.WrongNumberOfParameters,x);const ba=da(h);S="var ";for(var ea=0;ea<x.arguments.length-1;ea+=2)S+=`${ba} = lang.mustBoolean(${B(h,x.arguments[ea])}, runtimeCtx);\n      if (${ba} === true ) {\n        return ${B(h,x.arguments[ea+1])}\n      }\n`;O=`${h.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":
"function() {"}\n        ${S}\n        return ${B(h,x.arguments[x.arguments.length-1])}\n        ${h.isAsync?"})}()))":"}()"}`}catch(ba){throw ba;}return O}if("defaultvalue"===Y){try{if(2>x.arguments.length||3<x.arguments.length)throw new c.ArcadeCompilationError(h,c.ExecutionErrorCodes.WrongNumberOfParameters,x);const ba=da(h),ua=da(h),Ba=da(h),va=da(h);var V=3===x.arguments.length?`${h.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n      var ${ba} = ${B(h,
x.arguments[0])};\n      var ${ua} = ${B(h,x.arguments[1])};\n      var ${Ba} = [];\n      if (lang.isImmutableArray(${ua})) {\n        ${Ba} = ${ua}.toArray();\n      } else if (lang.isArray(${ua})) {\n        ${Ba} = ${ua};\n      } else {\n        lang.error('${c.ExecutionErrorCodes.InvalidParameter}');\n      }\n      if (${ba} === null) {\n        return ${B(h,x.arguments[2])};\n      }\n      for (var ${va} of ${Ba}) {\n        if (lang.isFeature(${ba})) {\n          if (lang.isString(${va}) === false) {\n            return ${B(h,
x.arguments[2])};\n          }\n          if (!${ba}.hasField(${va})) {\n            return ${B(h,x.arguments[2])};\n          }\n          ${ba} = ${ba}.field(${va});\n        } else if (lang.isDictionary(${ba})) {\n          if (lang.isString(${va}) === false) {\n            return  ${B(h,x.arguments[2])};\n          }\n          if (!${ba}.hasField(${va})) {\n            return  ${B(h,x.arguments[2])};\n          }\n          ${ba} = ${ba}.field(${va});\n        } else if (lang.isGeometry(${ba})) {\n          if (lang.isString(${va}) === false) {\n            return ${B(h,
x.arguments[2])};\n          }\n          ${ba} = lang.geometryMember(${ba}, ${va}, null, null, 2);\n          if (${ba} === null) {\n            return  ${B(h,x.arguments[2])};\n          }\n          if (${ba} && ${ba}.keystate === "notfound") {\n            return  ${B(h,x.arguments[2])};\n          }\n        } else if (lang.isArray(${ba})) {\n          if (lang.isNumber(${va}) === false) {\n            return  ${B(h,x.arguments[2])};\n          }\n          ${ba} = ${ba}[${va}];\n          if (${ba} === null || ${ba} === undefined) {\n            return ${B(h,
x.arguments[2])};\n          }\n        } else if (lang.isImmutableArray(${ba})) {\n          if (lang.isNumber(${va}) === false) {\n            return  ${B(h,x.arguments[2])};\n          }\n          ${ba} = ${ba}.get(${va});\n          if (${ba} === null || ${ba} === undefined) {\n            return  ${B(h,x.arguments[2])};\n          }\n        } else {\n          return  ${B(h,x.arguments[2])};\n        }\n      }\n      return ${ba};\n      ${h.isAsync?"})}()))":"}()"}`:`${h.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":
"function() {"}\n        var ${ba} = ${B(h,x.arguments[0])};\n        if (${ba} === null) {\n          return  ${B(h,x.arguments[1])};\n        }\n        if (${ba} === "") {\n          return  ${B(h,x.arguments[1])};\n        }\n        if (${ba} === undefined) {\n          return  ${B(h,x.arguments[1])};\n        }\n        return ${ba};\n      ${h.isAsync?"})}()))":"}()"}`}catch(ba){throw ba;}return V}if("decode"===Y){try{if(2>x.arguments.length)throw new c.ArcadeCompilationError(h,c.ExecutionErrorCodes.WrongNumberOfParameters,
x);if(2===x.arguments.length)S=`(${B(h,x.arguments[1])})`;else{if(0===(x.arguments.length-1)%2)throw new c.ArcadeCompilationError(h,c.ExecutionErrorCodes.WrongNumberOfParameters,x);ea=da(h);var ja=da(h);O="var ";for(K=1;K<x.arguments.length-1;K+=2)O+=`${ja} = ${B(h,x.arguments[K])};\n      if (lang.binary(${ja}, ${ea}, "==") === true ) {\n        return ${B(h,x.arguments[K+1])}\n      }\n`;S=`${h.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${ea} = ${B(h,
x.arguments[0])};\n        ${O}\n        return ${B(h,x.arguments[x.arguments.length-1])}\n        ${h.isAsync?"})}()))":"}()"}`}}catch(ba){throw ba;}return S}O="";null!==h.localScope&&(void 0!==h.localScope[Y]?O="lscope['"+Y+"']":void 0!==h.localScope._SymbolsMap[Y]&&(O="lscope['"+h.localScope._SymbolsMap[Y]+"']"));if(""===O)if(void 0!==h.globalScope[Y])O="gscope['"+Y+"']";else if(void 0!==h.globalScope._SymbolsMap[Y])O="gscope['"+h.globalScope._SymbolsMap[Y]+"']";else if(null!==h.localScope)if(h.undeclaredGlobalsInFunctions.has(Y))O=
"gscope[lang.chkAssig('"+h.undeclaredGlobalsInFunctions.get(Y).manglename+"',runtimeCtx)]";else{const ba={manglename:oa(h),node:x.argument};h.undeclaredGlobalsInFunctions.set(Y,ba);O="gscope[lang.chkAssig('"+ba.manglename+"',runtimeCtx)]"}if(""!==O){S="[";for(ea=0;ea<x.arguments.length;ea++)0<ea&&(S+=", "),S+=B(h,x.arguments[ea]);S+="]";return h.isAsync?"(yield lang.callfunc("+O+","+S+",runtimeCtx) )":"lang.callfunc("+O+","+S+",runtimeCtx)"}throw new c.ArcadeCompilationError(h,c.ExecutionErrorCodes.FunctionNotFound,
x);}catch(Y){throw Y;}}function oa(h){h.symbols.symbolCounter++;return"_T"+h.symbols.symbolCounter.toString()}function da(h){h.symbols.symbolCounter++;return"_Tvar"+h.symbols.symbolCounter.toString()}function U(h,x,K){const O={};h||={};K||={};O._SymbolsMap={};O.textformatting=1;O.infinity=1;O.pi=1;for(const S in x)O[S]=1;for(const S in K)O[S]=1;for(const S in h)O[S]=1;return O}function ka(h,x,K,O){K=K?new R:new P;h||={};x||={};const S=new a({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",
backwardslash:"\\"});S.immutable=!1;K._SymbolsMap={textformatting:1,infinity:1,pi:1};K.textformatting=S;K.infinity=Number.POSITIVE_INFINITY;K.pi=Math.PI;for(const fa in x)K[fa]=x[fa],K._SymbolsMap[fa]=1;for(const fa in h)K._SymbolsMap[fa]=1,K[fa]=h[fa]&&"esri.Graphic"===h[fa].declaredClass?m.createFromGraphic(h[fa],O??null):h[fa];return K}function wa(h,x){const K={mode:x,compiled:!0,functions:{},signatures:[],standardFunction:E,standardFunctionAsync:E,evaluateIdentifier:la};for(let O=0;O<h.length;O++)h[O].registerFunctions(K);
if("sync"===x){for(const O in K.functions)N[O]=new k.NativeFunction(K.functions[O]),P.prototype[O]=N[O];for(h=0;h<K.signatures.length;h++)p.addFunctionDeclaration(K.signatures[h],"sync")}else{for(const O in K.functions)H[O]=new k.NativeFunction(K.functions[O]),R.prototype[O]=H[O];for(h=0;h<K.signatures.length;h++)p.addFunctionDeclaration(K.signatures[h],"async")}}function la(h,x){x=x.name;if("_SymbolsMap"===x)throw new c.ArcadeExecutionError(h,c.ExecutionErrorCodes.InvalidIdentifier,null);if(0<h.localStack.length){if("_t"!==
x.substr(0,2).toLowerCase()&&void 0!==h.localStack[h.localStack.length-1][x])return h.localStack[h.localStack.length-1][x];const K=h.mangleMap[x];if(void 0!==K&&void 0!==h.localStack[h.localStack.length-1][K])return h.localStack[h.localStack.length-1][K]}if("_t"!==x.substr(0,2).toLowerCase()&&void 0!==h.globalScope[x]||1===h.globalScope._SymbolsMap[x])return h.globalScope[x];x=h.mangleMap[x];if(void 0!==x)return h.globalScope[x]}function xa(h){console.log(h)}function J(h,x,K=!1){x={isAsync:K,moduleFactory:x.moduleFactory,
moduleFactoryMap:{},libraryResolver:new b.ArcadeModuleLoader(null,h.loadedModules),globalScope:U(x.vars,K?H:N,x.customfunctions),customfunctions:x.customfunctions,localScope:null,mangleMap:{},undeclaredGlobalsInFunctions:new Map,depthCounter:{depth:1},exports:{},console:xa,lrucache:x.lrucache,timeZone:x.timeZone??null,interceptor:x.interceptor,services:x.services,symbols:{symbolCounter:0}};h=B(x,h);""===h&&(h="lc.voidOperation; ");const O=x.moduleFactory,S=x.moduleFactoryMap,fa=x.exports,ea={};for(var V in fa)ea[V]=
void 0!==x.mangleMap[V]?x.mangleMap[V]:V;V={lc:g.lc,lang:ha,mangles:x.mangleMap,prepareModule(ja){return new pa(ja)},prepare(ja,Y){let ba=ja.spatialReference;if(null===ba||void 0===ba)ba=new e({wkid:102100});const ua=ka(ja.vars,ja.customfunctions,Y,ja.timeZone);return{localStack:[],isAsync:Y,exports:fa,exportmangle:ea,gdefs:{},moduleFactory:O,moduleFactoryMap:S,moduleSingletons:ja.moduleSingletons,mangleMap:this.mangles,spatialReference:ba,globalScope:ua,abortSignal:void 0===ja.abortSignal||null===
ja.abortSignal?{aborted:!1}:ja.abortSignal,localScope:null,services:ja.services,console:ja.console??xa,lrucache:ja.lrucache,timeZone:ja.timeZone??null,interceptor:ja.interceptor,symbols:{symbolCounter:0},depthCounter:ja.depthCounter}}};return(new Function("context","spatialReference",K?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
h+"\n return lastStatement; }); } \n yield mainBody(); \n return this.prepareModule(runtimeCtx); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+h+"\n return lastStatement; } \n mainBody(); \n return this.prepareModule(runtimeCtx); ")).bind(V)}class I extends k.ArcadeFunction{constructor(h,x){super();this.paramCount=x;this.fn=h}createFunction(h){return(...x)=>
{if(x.length!==this.paramCount)throw new c.ArcadeExecutionError(h,c.ExecutionErrorCodes.WrongNumberOfParameters,null);return this.fn(...x)}}call(h,x){return this.fn(...x.arguments)}marshalledCall(h,x,K,O){return O(h,x,(S,fa,ea)=>{ea=ea.map(V=>!g.isFunctionParameter(V)||V instanceof k.ScopeMarshalledFunction?V:k.wrapModuleScopedResponse(V,h,O));S=this.call(K,{arguments:ea});return r.isPromiseLike(S)?S.then(V=>k.wrapModuleScopedResponse(V,K,O)):S})}}const N={};l.registerFunctions(N,E);A.registerFunctions(N,
E);d.registerFunctions(N,E);D.registerFunctions(N,E);f.registerFunctions(N,E);N.iif=function(h,x){try{return E(h,x,(K,O,S)=>{throw new c.ArcadeExecutionError(h,c.ExecutionErrorCodes.Unrecognized,x);})}catch(K){throw K;}};N.decode=function(h,x){try{return E(h,x,(K,O,S)=>{throw new c.ArcadeExecutionError(h,c.ExecutionErrorCodes.Unrecognized,x);})}catch(K){throw K;}};N.when=function(h,x){try{return E(h,x,(K,O,S)=>{throw new c.ArcadeExecutionError(h,c.ExecutionErrorCodes.Unrecognized,x);})}catch(K){throw K;
}};N.defaultvalue=function(h,x){try{return E(h,x,(K,O,S)=>{throw new c.ArcadeExecutionError(h,c.ExecutionErrorCodes.Unrecognized,x);})}catch(K){throw K;}};const H={};for(const h in N)H[h]=new k.NativeFunction(N[h]);z.registerFunctions(N,E);for(const h in N)N[h]=new k.NativeFunction(N[h]);const P=function(){};P.prototype=N;const R=function(){};R.prototype=H;l={fixSpatialReference:g.fixSpatialReference,parseArguments:function(h,x){const K=[];for(let O=0;O<x.arguments.length;O++)K.push(B(h,x.arguments[O]));
return K},standardFunction:E};wa([F.ArrayFunctions],"sync");wa([F.ArrayFunctions],"async");let T=0;const ha={isNumber(h){return g.isNumber(h)},isArray(h){return g.isArray(h)},isImmutableArray(h){return g.isImmutableArray(h)},isFeature(h){return g.isFeature(h)},isString(h){return g.isString(h)},isDictionary(h){return g.isDictionary(h)},isGeometry(h){return g.isGeometry(h)},geometryMember(h,x,K,O,S=1){return D.geometryMember(h,x,K,O,S)},error(h){throw new c.ArcadeExecutionError(null,h,null);},__awaiter(h,
x,K,O){return new Promise((S,fa)=>{function ea(Y){try{ja(O.next(Y))}catch(ba){fa(ba)}}function V(Y){try{ja(O["throw"](Y))}catch(ba){fa(ba)}}function ja(Y){Y.done?S(Y.value):Y.value?.then?Y.value.then(ea,V):(T++,0===T%100?setTimeout(()=>{T=0;ea(Y.value)},0):ea(Y.value))}ja((O=O.apply(h,x||[])).next())})},functionDepthchecker(h,x){return function(){x.depthCounter.depth++;x.localStack.push([]);if(64<x.depthCounter.depth)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.MaximumCallDepth,null);
const K=h.apply(this,arguments);if(r.isPromiseLike(K))return K.then(O=>{x.depthCounter.depth--;--x.localStack.length;return O});x.depthCounter.depth--;--x.localStack.length;return K}},chkAssig(h,x){if(void 0===x.gdefs[h])throw new c.ArcadeExecutionError(x,c.ExecutionErrorCodes.InvalidIdentifier,null);return h},mustBoolean(h,x){if(!0===h||!1===h)return h;throw new c.ArcadeExecutionError(x,c.ExecutionErrorCodes.BooleanConditionRequired,null);},setAssig(h,x){x.gdefs[h]=1;return h},castString(h){return g.toString(h)},
aCheck(h,x){if(g.isFunctionParameter(h)){if("ArrayExpression"===x)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.NoFunctionInArray,null);if("ObjectExpression"===x)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.NoFunctionInDictionary,null);throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.NoFunctionInTemplateLiteral,null);}return h===g.voidOperation?null:h},Dictionary:a,Feature:m,UserDefinedCompiledFunction:I,dictionary(h){const x={},K=new Map;for(let O=0;O<h.length;O+=
2){if(g.isFunctionParameter(h[O+1]))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.NoFunctionInDictionary,null);if(!1===g.isString(h[O]))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.KeyMustBeString,null);let S=h[O].toString();const fa=S.toLowerCase();K.has(fa)?S=K.get(fa):K.set(fa,S);x[S]=h[O+1]===g.voidOperation?null:h[O+1]}h=new a(x);h.immutable=!1;return h},strCheck(h){if(!1===g.isString(h))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.KeyMustBeString,
null);return h},unary(h,x){if(g.isBoolean(h)){if("!"===x)return!h;if("-"===x)return-1*g.toNumber(h);if("+"===x)return 1*g.toNumber(h);if("~"===x)return~g.toNumber(h);throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.UnsupportedUnaryOperator,null);}if("-"===x)return-1*g.toNumber(h);if("+"===x)return 1*g.toNumber(h);if("~"===x)return~g.toNumber(h);throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.UnsupportedUnaryOperator,null);},logicalCheck(h){if(!1===g.isBoolean(h))throw new c.ArcadeExecutionError(null,
c.ExecutionErrorCodes.LogicExpressionOrAnd,null);return h},logical(h,x,K){if(g.isBoolean(h)&&g.isBoolean(x))switch(K){case "||":return h||x;case "\x26\x26":return h&&x}throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.LogicExpressionOrAnd,null);},binary(h,x,K){switch(K){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return g.binaryOperator(g.toNumber(h),g.toNumber(x),K);case "\x3d\x3d":return g.equalityTest(h,x);case "\x3d":return g.equalityTest(h,x);case "!\x3d":return!g.equalityTest(h,
x);case "\x3c":return g.greaterThanLessThan(h,x,K);case "\x3e":return g.greaterThanLessThan(h,x,K);case "\x3c\x3d":return g.greaterThanLessThan(h,x,K);case "\x3e\x3d":return g.greaterThanLessThan(h,x,K);case "+":return g.isString(h)||g.isString(x)?g.toString(h)+g.toString(x):g.toNumber(h)+g.toNumber(x);case "-":return g.toNumber(h)-g.toNumber(x);case "*":return g.toNumber(h)*g.toNumber(x);case "/":return g.toNumber(h)/g.toNumber(x);case "%":return g.toNumber(h)%g.toNumber(x);default:throw new c.ArcadeExecutionError(null,
c.ExecutionErrorCodes.UnsupportedOperator,null);}},assign(h,x,K){switch(x){case "\x3d":return h===g.voidOperation?null:h;case "/\x3d":return g.toNumber(K)/g.toNumber(h);case "*\x3d":return g.toNumber(K)*g.toNumber(h);case "-\x3d":return g.toNumber(K)-g.toNumber(h);case "+\x3d":return g.isString(K)||g.isString(h)?g.toString(K)+g.toString(h):g.toNumber(K)+g.toNumber(h);case "%\x3d":return g.toNumber(K)%g.toNumber(h);default:throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.UnsupportedOperator,
null);}},update(h,x,K,O){const S=g.toNumber(h[x]);h[x]="++"===K?S+1:S-1;return!1===O?S:"++"===K?S+1:S-1},graphicToFeature(h,x,K){return null===h?null:m.createFromGraphicLikeObject(h.geometry,h.attributes,x,K.timeZone)},memberupdate(h,x,K,O){let S;if(g.isArray(h))if(g.isNumber(x)){0>x&&(x=h.length+x);if(0>x||x>=h.length)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.OutOfBounds,null);S=g.toNumber(h[x]);h[x]="++"===K?S+1:S-1}else throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.ArrayAccessorMustBeNumber,
null);else if(h instanceof a){if(!1===g.isString(x))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===h.hasField(x))S=g.toNumber(h.field(x)),h.setField(x,"++"===K?S+1:S-1);else throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.FieldNotFound,null,{key:x});}else if(g.isFeature(h)){if(!1===g.isString(x))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===h.hasField(x))S=g.toNumber(h.field(x)),h.setField(x,
"++"===K?S+1:S-1);else throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.FieldNotFound,null);}else{if(g.isImmutableArray(h))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.Immutable,null);if(h instanceof pa){if(!1===g.isString(x))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(!0===h.hasGlobal(x))S=g.toNumber(h.global(x)),h.setGlobal(x,"++"===K?S+1:S-1);else throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.ModuleExportNotFound,
null);}else throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.InvalidIdentifier,null);}return!1===O?S:"++"===K?S+1:S-1},assignmember(h,x,K,O){if(g.isArray(h))if(g.isNumber(x)){0>x&&(x=h.length+x);if(0>x||x>h.length)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.OutOfBounds,null);if(x===h.length&&"\x3d"!==K)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.OutOfBounds,null);h[x]=this.assign(O,K,h[x])}else throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.ArrayAccessorMustBeNumber,
null);else if(h instanceof a){if(!1===g.isString(x))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===h.hasField(x))h.setField(x,this.assign(O,K,h.field(x)));else{if("\x3d"!==K)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.FieldNotFound,null);h.setField(x,this.assign(O,K,null))}}else if(g.isFeature(h)){if(!1===g.isString(x))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===h.hasField(x))h.setField(x,
this.assign(O,K,h.field(x)));else{if("\x3d"!==K)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.FieldNotFound,null);h.setField(x,this.assign(O,K,null))}}else{if(g.isImmutableArray(h))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.Immutable,null);if(h instanceof pa){if(!1===g.isString(x))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(h.hasGlobal(x))h.setGlobal(x,this.assign(O,K,h.global(x)));else throw new c.ArcadeExecutionError(null,
c.ExecutionErrorCodes.ModuleExportNotFound,null);}else throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.InvalidIdentifier,null);}},member(h,x){if(null===h)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.MemberOfNull,null);if(h instanceof a||g.isFeature(h)){if(g.isString(x))return h.field(x);throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(h instanceof w){if(g.isString(x))return D.geometryMember(h,x,null,null);throw new c.ArcadeExecutionError(null,
c.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(g.isArray(h)){if(g.isNumber(x)&&isFinite(x)&&Math.floor(x)===x){0>x&&(x=h.length+x);if(x>=h.length||0>x)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.OutOfBounds,null);return h[x]}throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(g.isString(h)){if(g.isNumber(x)&&isFinite(x)&&Math.floor(x)===x){0>x&&(x=h.length+x);if(x>=h.length||0>x)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.OutOfBounds,
null);return h[x]}throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(g.isImmutableArray(h)){if(g.isNumber(x)&&isFinite(x)&&Math.floor(x)===x){0>x&&(x=h.length()+x);if(x>=h.length()||0>x)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.OutOfBounds,null);return h.get(x)}throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(h instanceof pa&&g.isString(x))return h.global(x);throw new c.ArcadeExecutionError(null,
c.ExecutionErrorCodes.InvalidMemberAccessKey,null);},callfunc(h,x,K){return h.call(K,{arguments:x,preparsed:!0})},loadModule(h,x){h=x.moduleFactoryMap[h];if(x.moduleSingletons[h])return x.moduleSingletons[h];const K=x.moduleFactory[h]({vars:{},moduleSingletons:x.moduleSingletons,depthCounter:x.depthCounter,console:x.console,abortSignal:x.abortSignal,isAsync:x.isAsync,services:x.services,lrucache:x.lrucache,timeZone:x.timeZone??null,interceptor:x.interceptor},x.spatialReference);return x.moduleSingletons[h]=
K},callModuleFunction(h,x,K,O){if(!(h instanceof pa))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.FunctionNotFound,null);h=h.global(K);if(!1===g.isFunctionParameter(h))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.CallNonFunction,null);return h.call(O,{preparsed:!0,arguments:x})}};class pa extends C.ArcadeModule{constructor(h){super(null);this.moduleContext=h}hasGlobal(h){void 0===this.moduleContext.exports[h]&&(h=h.toLowerCase());return void 0!==this.moduleContext.exports[h]?
!0:!1}setGlobal(h,x){const K=this.moduleContext.globalScope;h=h.toLowerCase();if(g.isFunctionParameter(x))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.AssignModuleFunction,null);K[this.moduleContext.exportmangle[h]]=x}global(h){const x=this.moduleContext.globalScope;h=h.toLowerCase();const K=x[this.moduleContext.exportmangle[h]];if(void 0===K)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.InvalidIdentifier,null);if(g.isFunctionParameter(K)&&!(K instanceof k.ScopeMarshalledFunction)){const O=
new k.ScopeMarshalledFunction;O.fn=K;O.parameterEvaluator=E;O.context=this.moduleContext;return x[this.moduleContext.exportmangle[h]]=O}return K}}M.UserDefinedCompiledFunction=I;M.compileScript=function(h,x,K=!1){null===x&&(x={vars:{},customfunctions:{}});var O=null;h.usesModules&&(O=new b.ArcadeModuleLoader(null,h.loadedModules));O={isAsync:K,globalScope:U(x.vars,K?H:N,x.customfunctions),moduleFactory:{},moduleFactoryMap:{},undeclaredGlobalsInFunctions:new Map,customfunctions:x.customfunctions,libraryResolver:O,
localScope:null,mangleMap:{},depthCounter:{depth:1},exports:{},console:xa,lrucache:x.lrucache,timeZone:x.timeZone??null,interceptor:x.interceptor,services:x.services,symbols:{symbolCounter:0}};h=B(O,h);""===h&&(h="lc.voidOperation; ");0<O.undeclaredGlobalsInFunctions.size&&O.undeclaredGlobalsInFunctions.forEach(Y=>{throw new c.ArcadeCompilationError(x,c.ExecutionErrorCodes.InvalidIdentifier,Y.node);});const S=O.moduleFactory,fa=O.moduleFactoryMap,ea=O.exports,V={};for(var ja in ea)V[ja]=void 0!==
O.mangleMap[ja]?O.mangleMap[ja]:ja;ja={lc:g.lc,lang:ha,mangles:O.mangleMap,postProcess(Y){Y instanceof g.returnResult&&(Y=Y.value);Y instanceof g.implicitResult&&(Y=Y.value);Y===g.voidOperation&&(Y=null);if(Y===g.breakResult)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.IllegalResult,null);if(Y===g.continueResult)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.IllegalResult,null);if(g.isFunctionParameter(Y))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.IllegalResult,
null);return Y},prepare(Y,ba){let ua=Y.spatialReference;if(null===ua||void 0===ua)ua=e.WebMercator;const Ba=ka(Y.vars,Y.customfunctions,ba,Y.timeZone);return{localStack:[],isAsync:ba,moduleFactory:S,moduleFactoryMap:fa,mangleMap:this.mangles,moduleSingletons:{},exports:ea,gdefs:{},exportmangle:V,spatialReference:ua,globalScope:Ba,abortSignal:void 0===Y.abortSignal||null===Y.abortSignal?{aborted:!1}:Y.abortSignal,localScope:null,services:Y.services,console:Y.console??xa,lrucache:Y.lrucache,timeZone:Y.timeZone??
null,interceptor:Y.interceptor,symbols:{symbolCounter:0},depthCounter:{depth:1}}}};return(new Function("context","spatialReference",K?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+h+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":
"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+h+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(ja)};M.enableAsyncSupport=async function(){const h=await new Promise((x,K)=>u(["./functions/geomasync"],x,K));wa([h],"async");return!0};M.executeScript=function(h,x){return h(x)};M.extend=wa;M.functionHelper=l;Object.defineProperty(M,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModule":function(){define(["exports"],function(u){class M{constructor(C){this.source=C}}u.ArcadeModule=M;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModuleLoader":function(){define(["exports"],function(u){class M{constructor(C,b){this._moduleSingletons=C;this._syntaxModules=b}loadLibrary(C){return null==this._syntaxModules?null:(C=this._syntaxModules[C.toLowerCase()])?{syntax:C.script,uri:C.uri}:null}}
u.ArcadeModuleLoader=M;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/Dictionary":function(){define("./ArcadeDate ./deepClone ./executionError ./ImmutableArray ../chunks/languageUtils ../geometry/Geometry".split(" "),function(u,M,C,b,a,c){function m(g,p,F=!1,l=!1){if(null===g||void 0===g)return null;if(a.isNumber(g))return a.toNumber(g);if(a.isBoolean(g))return a.toBoolean(g);if(a.isString(g))return a.toString(g);if(a.isDate(g))return a.toDate(g,p);if(a.isDateOnly(g)||
a.isTime(g))return g;if(a.isArray(g)){var D=[];for(var z of g)D.push(m(z,p,F,l));return D}if(l&&a.isGeometry(g))return g;z=new k;z.immutable=!1;for(D of Object.keys(g)){const d=g[D];void 0!==d&&z.setField(D,m(d,p,F,l))}z.immutable=F;return z}class k{constructor(g){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=g instanceof k?g.attributes:void 0===g?{}:null===g?{}:g}field(g){const p=g.toLowerCase(),F=this.attributes[g];if(void 0!==F)return F;
for(const l in this.attributes)if(l.toLowerCase()===p)return this.attributes[l];throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.FieldNotFound,null,{key:g});}setField(g,p){if(this.immutable)throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.Immutable,null);if(a.isFunctionParameter(p))throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.NoFunctionInDictionary,null);const F=g.toLowerCase();p instanceof Date&&(p=u.ArcadeDate.dateJSToArcadeDate(p));if(void 0===this.attributes[g])for(const l in this.attributes)if(l.toLowerCase()===
F){this.attributes[l]=p;return}this.attributes[g]=p}hasField(g){const p=g.toLowerCase();if(void 0!==this.attributes[g])return!0;for(const F in this.attributes)if(F.toLowerCase()===p)return!0;return!1}keys(){let g=[];for(const p in this.attributes)g.push(p);return g=g.sort()}castToText(g=!1){let p="";for(const F in this.attributes){""!==p&&(p+=",");const l=this.attributes[F];null==l?p+=JSON.stringify(F)+":null":a.isBoolean(l)||a.isNumber(l)||a.isString(l)?p+=JSON.stringify(F)+":"+JSON.stringify(l):
l instanceof c?p+=JSON.stringify(F)+":"+a.toStringExplicit(l):l instanceof b?p+=JSON.stringify(F)+":"+a.toStringExplicit(l,null,g):l instanceof Array?p+=JSON.stringify(F)+":"+a.toStringExplicit(l,null,g):l instanceof u.ArcadeDate?p=g?p+(JSON.stringify(F)+":"+JSON.stringify(l.getTime())):p+(JSON.stringify(F)+":"+l.stringify()):null!==l&&"object"===typeof l&&void 0!==l.castToText&&(p+=JSON.stringify(F)+":"+l.castToText(g))}return"{"+p+"}"}static convertObjectToArcadeDictionary(g,p,F=!0,l=!1){const D=
new k;D.immutable=!1;for(const z in g){const d=g[z];void 0!==d&&D.setField(z.toString(),m(d,p,F,l))}D.immutable=F;return D}static convertJsonToArcade(g,p,F=!1,l=!1){return m(g,p,F,l)}castAsJson(g=null){const p={};for(let F in this.attributes){const l=this.attributes[F];void 0!==l&&(g?.keyTranslate&&(F=g.keyTranslate(F)),p[F]=a.castAsJson(l,g))}return p}async castDictionaryValueAsJsonAsync(g,p,F,l=null,D){F=await a.castAsJsonAsync(F,l,D);return g[p]=F}async castAsJsonAsync(g=null,p=null){const F={},
l=[];for(let D in this.attributes){const z=this.attributes[D];p?.keyTranslate&&(D=p.keyTranslate(D));void 0!==z&&(a.isSimpleType(z)||z instanceof c||z instanceof u.ArcadeDate?F[D]=a.castAsJson(z,p):l.push(this.castDictionaryValueAsJsonAsync(F,D,z,g,p)))}0<l.length&&await Promise.all(l);return F}deepClone(){const g=new k;g.immutable=!1;for(const p of this.keys())g.setField(p,M.deepClone(this.field(p)));return g}}return k})},"esri/arcade/ArcadeDate":function(){define(["exports","../core/string","../core/sql/UnknownTimeZone",
"../chunks/datetime"],function(u,M,C,b){function a(p,F,l){return p<F?p-F:p>l?p-l:0}function c(p,F=!0){if(p instanceof b.Zone)return p;if("system"===p.toLowerCase())return"system";if("utc"===p.toLowerCase())return"UTC";if("unknown"===p.toLowerCase())return C.UnknownTimeZone.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(p)){const l=b.FixedOffsetZone.parseSpecifier("UTC"+(p.startsWith("+")||p.startsWith("-")?"":"+")+p);if(l)return l}p=b.IANAZone.create(p);if(!p.isValid){if(F)throw new k(u.ArcadeDateErrorCodes.TimeZoneNotRecognized);
return null}return p}u.ArcadeDateErrorCodes=void 0;(u.ArcadeDateErrorCodes||(u.ArcadeDateErrorCodes={})).TimeZoneNotRecognized="TimeZoneNotRecognized";const m={[u.ArcadeDateErrorCodes.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};class k extends Error{constructor(p,F){super(M.replace(m[p],F));this.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(this,k)}}class g{constructor(p){this._date=p;this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(p=
0,F=1,l=1,D=0,z=0,d=0,f=0,A){if(isNaN(p)||isNaN(F)||isNaN(l)||isNaN(D)||isNaN(z)||isNaN(d)||isNaN(f))return null;const r=b.DateTime.local(p,F).daysInMonth;p=b.DateTime.fromObject({day:1>l?1:l>r?r:l,year:p,month:1>F?1:12<F?12:F,hour:0>D?0:23<D?23:D,minute:0>z?0:59<z?59:z,second:0>d?0:59<d?59:d,millisecond:0>f?0:999<f?999:f},{zone:c(A)});p=p.plus({months:a(F,1,12),days:a(l,1,r),hours:a(D,0,23),minutes:a(z,0,59),seconds:a(d,0,59),milliseconds:a(f,0,999)});return new g(p)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??
"system"}static arcadeDateAndZoneToArcadeDate(p,F){F=c(F);return p.isUnknownTimeZone||F===C.UnknownTimeZone.instance?g.fromParts(p.year,p.monthJS+1,p.day,p.hour,p.minute,p.second,p.millisecond,F):new g(p._date.setZone(F))}static dateJSToArcadeDate(p){return new g(b.DateTime.fromJSDate(p,{zone:"system"}))}static dateJSAndZoneToArcadeDate(p,F="system"){F=c(F);return new g(b.DateTime.fromJSDate(p,{zone:F}))}static unknownEpochToArcadeDate(p){return new g(b.DateTime.fromMillis(p,{zone:C.UnknownTimeZone.instance}))}static unknownDateJSToArcadeDate(p){return new g(b.DateTime.fromMillis(p.getTime(),
{zone:C.UnknownTimeZone.instance}))}static epochToArcadeDate(p,F="system"){F=c(F);return new g(b.DateTime.fromMillis(p,{zone:F}))}static dateTimeToArcadeDate(p){return new g(p)}clone(){return new g(this._date)}changeTimeZone(p){p=c(p);return g.dateTimeToArcadeDate(this._date.setZone(p))}static dateTimeAndZoneToArcadeDate(p,F){F=c(F);return p.zone===C.UnknownTimeZone.instance||F===C.UnknownTimeZone.instance?g.fromParts(p.year,p.month,p.day,p.hour,p.minute,p.second,p.millisecond,F):new g(p.setZone(F))}static nowToArcadeDate(p){p=
c(p);return new g(b.DateTime.fromJSDate(new Date,{zone:p}))}static nowUTCToArcadeDate(){return new g(b.DateTime.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===g.systemTimeZoneCanonicalName}equals(p){return this.isSystem&&p.isSystem?this.toNumber()===p.toNumber():this.isUnknownTimeZone!==p.isUnknownTimeZone?!1:this._date.equals(p._date)}get isUnknownTimeZone(){return this._date.zone===C.UnknownTimeZone.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let p=
this._date.weekday;6<p&&(p=0);return p}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";
const p=this.zone;return"fixed"===p.type?0===p.fixed?"UTC":p.formatOffset(0,"short"):p.name}stringify(){return JSON.stringify(this.toJSDate())}plus(p){return new g(this._date.plus(p))}diff(p,F="milliseconds"){return this._date.diff(p._date,F)[F]}toISODate(){return this._date.toISODate()}toISOString(p){return p?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(p,F){return this._date.toISOTime({suppressMilliseconds:p,
includeOffset:F&&!this.isUnknownTimeZone})}toFormat(p,F){this.isUnknownTimeZone&&(p=p.replaceAll("Z",""));return this._date.toFormat(p,F)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new g(this._date.toUTC())}toLocal(){return new g(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(p){if(!p)return null;
p=b.DateTime.fromISO(p,{setZone:!0});return new g(p)}}u.ArcadeDate=g;u.ArcadeDateError=k;u.arcadeDateErrorMessages=m;u.createDateTimeZone=c;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/deepClone":function(){define(["exports","./ArcadeModule","../chunks/languageUtils"],function(u,M,C){function b(c){if(null===c)return null;if(C.isDate(c))return c.clone();if(C.isSimpleType(c))return c;if(C.isGeometry(c))return c.clone();if(C.isImmutableArray(c))return c.toArray().map(m=>
b(m));if(C.isArray(c))return c.map(m=>b(m));if(C.isFeature(c))return a.createFromArcadeFeature(c);if(C.isFeatureSetCollection(c)||C.isFeatureSet(c))return c;if(C.isDictionary(c)||"esri.arcade.Attachment"===c?.declaredClass)return c.deepClone();if("esri.arcade.Portal"===c?.declaredClass||C.isKnowledgeGraph(c)||c instanceof M.ArcadeModule)return c;C.isFunctionParameter(c);return c}let a;u.configureDeepClone=function(c){a=c};u.deepClone=b;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},
"esri/chunks/languageUtils":function(){define("exports ../config ../kernel ../arcade/ArcadeDate ../arcade/ArcadeModule ../arcade/executionError ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../arcade/featureset/support/shared ../core/number ../core/sql/DateOnly ../core/sql/TimeOnly ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference ../geometry/support/coordsUtils ../geometry/support/jsonUtils ../intl/locale ./datetime".split(" "),
function(u,M,C,b,a,c,m,k,g,p,F,l,D,z,d,f,A,r,w,e,E,B,t,v,G){function n(y,L,Q){return""===L||null===L||void 0===L||L===Q||L===Q?y:y=y.split(L).join(Q)}function q(y){return y instanceof m.ArcadeFunction}function W(y){return y instanceof a.ArcadeModule}function ca(y){return oa(y)||U(y)||R(y)||T(y)||ha(y)||da(y)||null===y||y===za||"number"===typeof y?!0:!1}function qa(y,L){return void 0===y?L:y}function ya(y){return null==y?"":la(y)||P(y)?"Array":R(y)?"Date":ha(y)?"Time":T(y)?"DateOnly":oa(y)?"String":
da(y)?"Boolean":U(y)?"Number":"esri.arcade.Attachment"===y?.declaredClass?"Attachment":"esri.arcade.Portal"===y?.declaredClass?"Portal":"esri.arcade.Dictionary"===y?.declaredClass?"Dictionary":H(y)?"KnowledgeGraph":y instanceof a.ArcadeModule?"Module":xa(y)?"Feature":y instanceof r?"Point":y instanceof w?"Polygon":y instanceof e?"Polyline":y instanceof A?"Multipoint":y instanceof d?"Extent":q(y)?"Function":J(y)?"FeatureSet":N(y)?"FeatureSetCollection":y===za?"":"number"===typeof y&&isNaN(y)?"Number":
"Unrecognized Type"}function oa(y){return"string"===typeof y||y instanceof String}function da(y){return"boolean"===typeof y}function U(y){return"number"===typeof y}function ka(y){return"number"===typeof y&&isFinite(y)&&Math.floor(y)===y}function wa(y){return y instanceof f}function la(y){return y instanceof Array}function xa(y){return"esri.arcade.Feature"===y?.arcadeDeclaredClass?!0:!1}function J(y){return"esri.arcade.featureset.support.FeatureSet"===y?.declaredRootClass}function I(y){return"esri.arcade.Dictionary"===
y?.declaredClass}function N(y){return"esri.arcade.featureSetCollection"===y?.declaredRootClass}function H(y){return"esri.rest.knowledgeGraph.KnowledgeGraph"===y?.declaredClass}function P(y){return y instanceof k}function R(y){return y instanceof b.ArcadeDate}function T(y){return y instanceof D.DateOnly}function ha(y){return y instanceof z.TimeOnly}function pa(y){return null!=y&&"object"===typeof y}function h(y){return y instanceof Date}function x(y,L,Q,aa,Z){if(y.length<L||y.length>Q)throw new c.ArcadeExecutionError(aa,
c.ExecutionErrorCodes.WrongNumberOfParameters,Z);}function K(y){return 0>y?-Math.round(-y):Math.round(y)}function O(){let y=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replaceAll(/[xy]/g,L=>{const Q=(y+16*Math.random())%16|0;y=Math.floor(y/16);return("x"===L?Q:Q&3|8).toString(16)})}function S(y,L){if(!isNaN(y)){if(void 0===L||null===L||""===L)return y.toString();L=n(L,"\u2030","");L=n(L,"\u00a4","");return l.format(y,{pattern:L})}return y.toString()}function fa(y,L){return void 0===L||
null===L||""===L?y.toISOString(!0):y.toFormat(ea(L),{locale:v.getLocale(),numberingSystem:"latn"})}function ea(y,L=!1){y=y.replaceAll(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let Q="";const aa=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|Z{1,5}|.)/g;for(const Z of y.match(aa)||[])switch(Z){case "D":Q+="d";break;case "DD":Q+="dd";break;case "DDD":Q+="o";break;
case "d":Q+="c";break;case "ddd":Q+="ccc";break;case "dddd":Q+="cccc";break;case "M":Q+="L";break;case "MM":Q+="LL";break;case "MMM":Q+="LLL";break;case "MMMM":Q+="LLLL";break;case "YY":Q+="yy";break;case "Y":case "YYYY":Q+="yyyy";break;case "Q":Q+="q";break;case "Z":Q+="Z";break;case "ZZ":Q+="ZZ";break;case "ZZZ":Q+="ZZZ";break;case "ZZZZ":Q=L?Q+"[ZZZZ]":Q+"ZZZZ";break;case "ZZZZZ":Q=L?Q+"[ZZZZZ]":Q+"ZZZZZ";break;case "S":Q+="'S'";break;case "SS":Q+="'SS'";break;case "SSS":Q+="u";break;case "A":case "a":Q+=
"a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":Q+=Z;break;default:Q=2<=Z.length&&"["===Z.slice(0,1)&&"]"===Z.slice(-1)?Q+`'${Z.slice(1,-1)}'`:Q+`'${Z}'`}return Q}function V(y,L,Q){switch(Q){case "\x3e":return y>L;case "\x3c":return y<L;case "\x3e\x3d":return y>=L;case "\x3c\x3d":return y<=L}return!1}function ja(y,L,Q){if(null===y){if(null===L||L===za)return V(null,null,Q);if(U(L))return V(0,L,Q);if(oa(L)||da(L))return V(0,ra(L),Q);if(R(L))return V(0,
L.toNumber(),Q);if(ha(L)||T(L))return V(y,L.toNumber(),Q)}if(y===za){if(null===L||L===za)return V(null,null,Q);if(U(L))return V(0,L,Q);if(oa(L)||da(L))return V(0,ra(L),Q);if(R(L))return V(0,L.toNumber(),Q);if(ha(L)||T(L))return V(y,L.toNumber(),Q)}else if(U(y)){if(U(L))return V(y,L,Q);if(da(L))return V(y,ra(L),Q);if(null===L||L===za)return V(y,0,Q);if(oa(L))return V(y,ra(L),Q);if(R(L)||ha(L)||T(L))return V(y,L.toNumber(),Q)}else if(oa(y)){if(oa(L))return V(ba(y),ba(L),Q);if(R(L)||ha(L)||T(L))return V(ra(y),
L.toNumber(),Q);if(U(L))return V(ra(y),L,Q);if(null===L||L===za)return V(ra(y),0,Q);if(da(L))return V(ra(y),ra(L),Q)}else if(R(y)){if(R(L))return y.timeZone!==L.timeZone&&(y.isUnknownTimeZone?y=b.ArcadeDate.arcadeDateAndZoneToArcadeDate(y,L.timeZone):L.isUnknownTimeZone&&(L=b.ArcadeDate.arcadeDateAndZoneToArcadeDate(L,y.timeZone))),V(y.toNumber(),L.toNumber(),Q);if(null===L||L===za)return V(y.toNumber(),0,Q);if(U(L))return V(y.toNumber(),L,Q);if(da(L)||oa(L))return V(y.toNumber(),ra(L),Q);if(ha(L))throw new c.ArcadeExecutionError(null,
c.ExecutionErrorCodes.CannotCompareDateAndTime,null);if(T(L))return V(y.toNumber(),L.toNumber(),Q)}else if(da(y)){if(da(L))return V(y,L,Q);if(U(L))return V(ra(y),ra(L),Q);if(R(L)||ha(L)||T(L))return V(ra(y),L.toNumber(),Q);if(null===L||L===za)return V(ra(y),0,Q);if(oa(L))return V(ra(y),ra(L),Q)}else if(T(y)){if(R(L))return V(y.toNumber(),L.toNumber(),Q);if(null===L||L===za)return V(y.toNumber(),0,Q);if(U(L))return V(y.toNumber(),L,Q);if(da(L)||oa(L))return V(y.toNumber(),ra(L),Q);if(ha(L))throw new c.ArcadeExecutionError(null,
c.ExecutionErrorCodes.CannotCompareDateAndTime,null);if(T(L))return V(y.toNumber(),L.toNumber(),Q)}else if(ha(y)){if(R(L))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.CannotCompareDateAndTime,null);if(null===L||L===za)return V(y.toNumber(),0,Q);if(U(L))return V(y.toNumber(),L,Q);if(da(L)||oa(L))return V(y.toNumber(),ra(L),Q);if(ha(L))return V(y.toNumber(),L.toNumber(),Q);if(T(L))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.CannotCompareDateAndTime,null);}return!Y(y,L)||
"\x3c\x3d"!==Q&&"\x3e\x3d"!==Q?!1:!0}function Y(y,L){if(y===L||null===y&&L===za||null===L&&y===za)return!0;if(R(y)&&R(L)||ha(y)&&ha(L)||T(y)&&T(L))return y.equals(L);if(y instanceof g||y instanceof p)return y.equalityTest(L);if(y instanceof r&&L instanceof r){const Q=y.cache._arcadeCacheId,aa=L.cache._arcadeCacheId;if(void 0!==Q&&null!==Q)return Q===aa}return pa(y)&&pa(L)&&(y._arcadeCacheId===L._arcadeCacheId&&void 0!==y._arcadeCacheId&&null!==y._arcadeCacheId||y._underlyingGraphic===L._underlyingGraphic&&
void 0!==y._underlyingGraphic&&null!==y._underlyingGraphic)?!0:!1}function ba(y,L){if(oa(y))return y;if(null===y)return"";if(U(y))return S(y,L);if(da(y))return y.toString();if(R(y))return fa(y,L);if(ha(y)||T(y))return y.toFormat(L);if(y instanceof f)return JSON.stringify(y.toJSON());if(la(y)){L=[];for(var Q=0;Q<y.length;Q++)L[Q]=va(y[Q]);return"["+L.join(",")+"]"}if(y instanceof k){L=[];for(Q=0;Q<y.length();Q++)L[Q]=va(y.get(Q));return"["+L.join(",")+"]"}return null!==y&&"object"===typeof y&&void 0!==
y.castToText?y.castToText():q(y)?"object, Function":y===za?"":W(y)?"object, Module":""}function ua(y){const L=[];if(!la(y))return null;if(y instanceof k){for(var Q=0;Q<y.length();Q++)L[Q]=ra(y.get(Q));return L}for(Q=0;Q<y.length;Q++)L[Q]=ra(y[Q]);return L}function Ba(y,L,Q=!1){if(oa(y))return y;if(null===y)return"";if(U(y))return S(y,L);if(da(y))return y.toString();if(R(y))return fa(y,L);if(ha(y)||T(y))return y.toFormat(L);if(y instanceof f)return y instanceof d?'{"xmin":'+y.xmin.toString()+',"ymin":'+
y.ymin.toString()+","+(y.hasZ?'"zmin":'+y.zmin.toString()+",":"")+(y.hasM?'"mmin":'+y.mmin.toString()+",":"")+'"xmax":'+y.xmax.toString()+',"ymax":'+y.ymax.toString()+","+(y.hasZ?'"zmax":'+y.zmax.toString()+",":"")+(y.hasM?'"mmax":'+y.mmax.toString()+",":"")+'"spatialReference":'+Da(y.spatialReference)+"}":Da(y.toJSON(),(Z,ma)=>Z.key===ma.key?0:"spatialReference"===Z.key?1:"spatialReference"===ma.key||Z.key<ma.key?-1:Z.key>ma.key?1:0);if(la(y)){L=[];for(var aa=0;aa<y.length;aa++)L[aa]=va(y[aa],Q);
return"["+L.join(",")+"]"}if(y instanceof k){L=[];for(aa=0;aa<y.length();aa++)L[aa]=va(y.get(aa),Q);return"["+L.join(",")+"]"}return null!==y&&"object"===typeof y&&void 0!==y.castToText?y.castToText(Q):q(y)?"object, Function":y===za?"":W(y)?"object, Module":""}function va(y,L=!1){return null===y?"null":da(y)||U(y)||oa(y)?JSON.stringify(y):y instanceof f||y instanceof k||y instanceof Array?Ba(y,null,L):R(y)?L?JSON.stringify(y.getTime()):JSON.stringify(fa(y,"")):ha(y)||T(y)?JSON.stringify(y.toString()):
null!==y&&"object"===typeof y&&void 0!==y.castToText?y.castToText(L):"null"}function ra(y,L){return U(y)?y:null===y||""===y?0:R(y)||T(y)||ha(y)?NaN:da(y)?y?1:0:la(y)||""===y||void 0===y?NaN:void 0!==L&&oa(y)?(L=n(L,"\u2030",""),L=n(L,"\u00a4",""),l.parse(y,{pattern:L})):y===za?0:Number(y)}function Ia(y,L){if(R(y))return y;if(oa(y)){a:{const aa=/ (\d\d)/;var Q=b.createDateTimeZone(L);Q=G.DateTime.fromISO(y,{zone:Q});if(Q.isValid)L=Q;else{if(aa.test(y)&&(y=y.replace(aa,"T$1"),Q=G.DateTime.fromISO(y,
{zone:L}),Q.isValid)){L=Q;break a}L=null}}if(L)return b.ArcadeDate.dateTimeToArcadeDate(L)}return null}function Ha(y){return da(y)?y:oa(y)?(y=y.toLowerCase(),"true"===y?!0:!1):U(y)?0===y||isNaN(y)?!1:!0:!1}function Aa(y,L){(y=JSON.parse(y))&&!y.spatialReference&&(y.spatialReference=L);return t.fromJSON(y)}function X(y,L){if(null==y)return null;if(null===y.spatialReference||void 0===y.spatialReference)y.spatialReference=L;return y}function na(y){if(null===y)return null;if(y instanceof r)return"NaN"===
y.x||null===y.x||isNaN(y.x)?null:y;if(y instanceof w){if(0===y.rings.length)return null;for(const L of y.rings)if(0<L.length)return y;return null}if(y instanceof e){if(0===y.paths.length)return null;for(const L of y.paths)if(0<L.length)return y;return null}return y instanceof A?0===y.points.length?null:y:y instanceof d?"NaN"===y.xmin||null===y.xmin||isNaN(y.xmin)?null:y:null}function ta(y,L){if(!y||!y.domain)return L;let Q=null,aa=null;if(R(L))Q=L.toNumber();else if(T(L))Q=L.toString();else if(ha(L))Q=
L.toStorageString();else if("string"===y.field.type||"esriFieldTypeString"===y.field.type)Q=ba(L);else{if(null===L||void 0===L)return null;if(""===L)return L;Q=ra(L)}for(let Z=0;Z<y.domain.codedValues.length;Z++){const ma=y.domain.codedValues[Z];ma.code===Q&&(aa=ma)}return null===aa?ba(L):aa.name}function Ja(y,L){if(!y||!y.domain)return L;let Q=null;const aa=ba(L);for(let Z=0;Z<y.domain.codedValues.length;Z++){const ma=y.domain.codedValues[Z];ma.name===aa&&(Q=ma)}return null===Q?L:Q.code}function ia(y,
L,Q=null,aa=null){if(!L||!L.fields)return null;let Z=null;for(var ma=0;ma<L.fields.length;ma++){var sa=L.fields[ma];sa.name.toLowerCase()===y.toString().toLowerCase()&&(Z=sa)}if(null===Z)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.FieldNotFound,null,{key:y});let Ga,Ca;ma=L.typeIdField;let Fa="id";sa=L.types;L.subtypeField&&(ma=L.subtypeField,Fa="code",sa=L.subtypes??[]);if(null===aa&&Q&&ma)aa=Q.hasField(ma)?Q.field(ma):null;else if(ma&&null!==aa){let Ka=!1;for(const La of sa||[])if(aa===
La[Fa]){Ka=!0;break}if(!Ka)for(const La of sa||[])if(aa===La.name){aa=La[Fa];Ka=!0;break}Ka||(aa=null,Q&&ma&&(aa=Q.hasField(ma)?Q.field(ma):null))}null!==aa&&void 0!==aa&&sa.some(Ka=>Ka[Fa]===aa?((Ga=Ka.domains?.[Z.name])&&"inherited"===Ga.type&&(Ga=Ea(Z.name,L),Ca=!0),!0):!1);Ca||Ga||(Ga=Ea(y,L));return{field:Z,domain:Ga}}function Ea(y,L){let Q;L.fields.some(aa=>{aa.name.toLowerCase()===y.toLowerCase()&&(Q=aa.domain);return!!Q});return Q}function Da(y,L){L||={};"function"===typeof L&&(L={cmp:L});
const Q="boolean"===typeof L.cycles?L.cycles:!1,aa=L.cmp&&function(ma){return function(sa){return function(Ga,Ca){return ma({key:Ga,value:sa[Ga]},{key:Ca,value:sa[Ca]})}}}(L.cmp),Z=[];return function Ga(sa){sa?.toJSON&&"function"===typeof sa.toJSON&&(sa=sa.toJSON());if(void 0!==sa){if("number"===typeof sa)return isFinite(sa)?""+sa:"null";if("object"!==typeof sa)return JSON.stringify(sa);var Ca;if(Array.isArray(sa)){var Fa="[";for(Ca=0;Ca<sa.length;Ca++)Ca&&(Fa+=","),Fa+=Ga(sa[Ca])||"null";return Fa+
"]"}if(null===sa)return"null";if(Z.includes(sa)){if(Q)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var Ka=Z.push(sa)-1,La=Object.keys(sa).sort(aa?.(sa));Fa="";for(Ca=0;Ca<La.length;Ca++){const Ua=La[Ca],Va=Ga(sa[Ua]);Va&&(Fa&&(Fa+=","),Fa+=JSON.stringify(Ua)+":"+Va)}Z.splice(Ka,1);return"{"+Fa+"}"}}(y)}function Wa(y){if(null===y)return null;const L=[];for(const Q of y)Q?.arcadeDeclaredClass&&"esri.arcade.Feature"===Q.arcadeDeclaredClass?L.push(Q.geometry()):
L.push(Q);return L}function Ma(y,L){if(L instanceof r)y.push(L.hasZ?L.hasM?[L.x,L.y,L.z,L.m]:[L.x,L.y,L.z]:[L.x,L.y]);else throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.InvalidParameter,null);}function Xa(y,L){if(la(y)||P(y)){let Q=!1,aa=!1,Z=[];if(la(y)){for(const ma of y)Ma(Z,ma);0<Z.length&&(L=y[0].spatialReference,Q=y[0].hasZ,aa=y[0].hasM)}else if(y instanceof p)Z=y._elements,0<Z.length&&(Q=y._hasZ,aa=y._hasM,L=y.get(0).spatialReference);else if(P(y)){for(const ma of y.toArray())Ma(Z,
ma);0<Z.length&&(L=y.get(0).spatialReference,Q=!0===y.get(0).hasZ,aa=!0===y.get(0).hasM)}else throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.InvalidParameter,null);if(0===Z.length)return null;B.isClockwise(Z)||(Z=Z.slice(0).reverse());return new w({rings:[Z],spatialReference:L,hasZ:Q,hasM:aa})}return y}function Ya(y,L){if(la(y)||P(y)){let Q=!1,aa=!1,Z=[];if(la(y)){for(const ma of y)Ma(Z,ma);0<Z.length&&(L=y[0].spatialReference,Q=!0===y[0].hasZ,aa=!0===y[0].hasM)}else if(y instanceof p)Z=
y._elements,0<Z.length&&(Q=y._hasZ,aa=y._hasM,L=y.get(0).spatialReference);else if(P(y)){for(const ma of y.toArray())Ma(Z,ma);0<Z.length&&(L=y.get(0).spatialReference,Q=!0===y.get(0).hasZ,aa=!0===y.get(0).hasM)}return 0===Z.length?null:new e({paths:[Z],spatialReference:L,hasZ:Q,hasM:aa})}return y}function Za(y,L){if(la(y)||P(y)){let Q=!1,aa=!1,Z=[];if(la(y)){for(const ma of y)Ma(Z,ma);0<Z.length&&(L=y[0].spatialReference,Q=!0===y[0].hasZ,aa=!0===y[0].hasM)}else if(y instanceof p)Z=y._elements,0<Z.length&&
(Q=y._hasZ,aa=y._hasM,L=y.get(0).spatialReference);else if(P(y)){for(const ma of y.toArray())Ma(Z,ma);0<Z.length&&(L=y.get(0).spatialReference,Q=!0===y.get(0).hasZ,aa=!0===y.get(0).hasM)}return 0===Z.length?null:new A({points:Z,spatialReference:L,hasZ:Q,hasM:aa})}return y}function $a(y,L=!1){const Q=[];if(null===y)return Q;if(!0===la(y)){for(var aa=0;aa<y.length;aa++){var Z=ba(y[aa]);""===Z&&!0!==L||Q.push(Z)}return Q}if(y instanceof k){for(aa=0;aa<y.length();aa++)Z=ba(y.get(aa)),""===Z&&!0!==L||
Q.push(Z);return Q}return ca(y)?(y=ba(y),""===y&&!0!==L||Q.push(y),Q):[]}function ab(y){Pa++;return 0===Pa%100?(Pa=0,new Promise(L=>{setTimeout(()=>{L(y)},0)})):y}function bb(y,L,Q){switch(Q){case "\x26":return y&L;case "|":return y|L;case "^":return y^L;case "\x3c\x3c":return y<<L;case "\x3e\x3e":return y>>L;case "\x3e\x3e\x3e":return y>>>L}}function Na(y,L=null){if(null!=y){if(da(y)||U(y)||oa(y))return y;if(y instanceof f)return!0===L?.keepGeometryType?y:y.toJSON();if(y instanceof k)return y.toArray().map(Q=>
Na(Q,L));if(y instanceof Array)return y.map(Q=>Na(Q,L));if(h(y))return y;if(R(y))return y.toJSDate();if(ha(y))return y.toString();if(T(y))return y.toJSDate();if(null!==y&&"object"===typeof y&&void 0!==y.castAsJson)return y.castAsJson(L)}return null}async function ob(y,L,Q,aa,Z){y=await Qa(y,L,Q);Z[aa]=y}async function Qa(y,L=null,Q=null){y instanceof k&&(y=y.toArray());if(null!=y){if(ca(y)||y instanceof f||h(y)||R(y))return Na(y,Q);if(y instanceof Array){const aa=[],Z=[];for(const ma of y)null===
ma||ca(ma)||ma instanceof f||h(ma)||R(ma)?Z.push(Na(ma,Q)):(Z.push(null),aa.push(ob(ma,L,Q,Z.length-1,Z)));0<aa.length&&await Promise.all(aa);return Z}if(null!==y&&"object"===typeof y&&void 0!==y.castAsJsonAsync)return y.castAsJsonAsync(L,Q)}return null}function Oa(y){return Ra(y)?y.parent:y}function Ra(y){return y&&"declaredClass"in y&&"esri.layers.support.SubtypeSublayer"===y.declaredClass}function cb(y){return y&&"declaredClass"in y&&"esri.layers.SubtypeGroupLayer"===y.declaredClass}function db(y,
L,Q){const aa=Oa(y.fullSchema());return null!==aa&&aa.fields?ia(L,aa,y,Q):null}function eb(y){y=Oa(y.fullSchema());return null!==y&&y.fields?y.subtypeField?{subtypeField:y.subtypeField,subtypes:y.subtypes?y.subtypes.map(L=>({name:L.name,code:L.code})):[]}:y.typeIdField?{subtypeField:y.typeIdField,subtypes:y.types?y.types.map(L=>({name:L.name,code:L.id})):[]}:null:null}function fb(y,L,Q,aa){const Z=Oa(y.fullSchema());if(null===Z||!Z.fields)return null;aa=ia(L,Z,y,aa);if(void 0===Q)try{Q=y.field(L)}catch(ma){return null}return ta(aa,
Q)}function gb(y,L,Q,aa){const Z=Oa(y.fullSchema());if(null===Z||!Z.fields)return null;if(void 0===Q){try{Q=y.field(L)}catch(ma){return null}return Q}y=ia(L,Z,y,aa);return Ja(y,Q)}function hb(y){return y?.timeZone??"system"}function ib(y){y=Oa(y.fullSchema());if(null===y||!y.fields)return null;const L=[];for(const Q of y.fields)L.push(F.esriFieldToJson(Q));return{objectIdField:y.objectIdField,globalIdField:y.globalIdField??"",geometryType:void 0===F.layerGeometryEsriRestConstants[y.geometryType]?
"":F.layerGeometryEsriRestConstants[y.geometryType],fields:L}}function jb(y,L){"system"===y&&(y=b.ArcadeDate.systemTimeZoneCanonicalName);return{version:"1.24",engineVersion:C.version,timeZone:y,spatialReference:L instanceof E?L.toJSON():L,application:M.applicationName??"",engine:"web",locale:v.getLocale()}}class Sa{constructor(y){this.value=y}}class Ta{constructor(y){this.value=y}}const kb=Ta,lb=Sa,za={type:"VOID"},mb={type:"BREAK"},nb={type:"CONTINUE"};let Pa=0;const pb=Object.freeze(Object.defineProperty({__proto__:null,
ImplicitResultE:Ta,ReturnResultE:Sa,absRound:K,arcadeVersion:"1.24",autoCastArrayOfPointsToMultiPoint:Za,autoCastArrayOfPointsToPolygon:Xa,autoCastArrayOfPointsToPolyline:Ya,autoCastFeatureToGeometry:Wa,binaryOperator:bb,breakResult:mb,castAsJson:Na,castAsJsonAsync:Qa,continueResult:nb,defaultExecutingContext:jb,defaultTimeZone:hb,defaultUndefined:qa,equalityTest:Y,featureDomainCodeLookup:gb,featureDomainValueLookup:fb,featureFullDomain:db,featureSchema:ib,featureSubtypes:eb,fixNullGeometry:na,fixSpatialReference:X,
formatDate:fa,formatNumber:S,generateUUID:O,getDomain:ia,getDomainCode:Ja,getDomainValue:ta,getType:ya,greaterThanLessThan:ja,implicitResult:kb,isArray:la,isBoolean:da,isDate:R,isDateOnly:T,isDictionary:I,isFeature:xa,isFeatureSet:J,isFeatureSetCollection:N,isFunctionParameter:q,isGeometry:wa,isImmutableArray:P,isInteger:ka,isJsDate:h,isKnowledgeGraph:H,isModule:W,isNumber:U,isObject:pa,isSimpleType:ca,isString:oa,isSubtypeGrouplayer:cb,isSubtypeSublayer:Ra,isTime:ha,multiReplace:n,parseGeometryFromJson:Aa,
pcCheck:x,returnResult:lb,stableStringify:Da,standardiseDateFormat:ea,tick:ab,toBoolean:Ha,toDate:Ia,toNumber:ra,toNumberArray:ua,toString:ba,toStringArray:$a,toStringExplicit:Ba,voidOperation:za},Symbol.toStringTag,{value:"Module"}));u.ImplicitResultE=Ta;u.ReturnResultE=Sa;u.absRound=K;u.arcadeVersion="1.24";u.autoCastArrayOfPointsToMultiPoint=Za;u.autoCastArrayOfPointsToPolygon=Xa;u.autoCastArrayOfPointsToPolyline=Ya;u.autoCastFeatureToGeometry=Wa;u.binaryOperator=bb;u.breakResult=mb;u.castAsJson=
Na;u.castAsJsonAsync=Qa;u.continueResult=nb;u.defaultExecutingContext=jb;u.defaultTimeZone=hb;u.defaultUndefined=qa;u.equalityTest=Y;u.featureDomainCodeLookup=gb;u.featureDomainValueLookup=fb;u.featureFullDomain=db;u.featureSchema=ib;u.featureSubtypes=eb;u.fixNullGeometry=na;u.fixSpatialReference=X;u.formatDate=fa;u.formatNumber=S;u.generateUUID=O;u.getDomain=ia;u.getDomainCode=Ja;u.getDomainValue=ta;u.getType=ya;u.greaterThanLessThan=ja;u.implicitResult=kb;u.isArray=la;u.isBoolean=da;u.isDate=R;
u.isDateOnly=T;u.isDictionary=I;u.isFeature=xa;u.isFeatureSet=J;u.isFeatureSetCollection=N;u.isFunctionParameter=q;u.isGeometry=wa;u.isImmutableArray=P;u.isInteger=ka;u.isJsDate=h;u.isKnowledgeGraph=H;u.isModule=W;u.isNumber=U;u.isObject=pa;u.isSimpleType=ca;u.isString=oa;u.isSubtypeGrouplayer=cb;u.isSubtypeSublayer=Ra;u.isTime=ha;u.lc=pb;u.multiReplace=n;u.parseGeometryFromJson=Aa;u.pcCheck=x;u.returnResult=lb;u.stableStringify=Da;u.standardiseDateFormat=ea;u.tick=ab;u.toBoolean=Ha;u.toDate=Ia;u.toNumber=
ra;u.toNumberArray=ua;u.toString=ba;u.toStringArray=$a;u.toStringExplicit=Ba;u.voidOperation=za})},"esri/arcade/executionError":function(){define(["exports","../core/string"],function(u,M){function C(l){return l&&l.loc?`Line : ${l.loc.start?.line}, ${l.loc.start?.column}: `:""}u.ExecutionErrorCodes=void 0;(function(l){l.AsyncNotEnabled="AsyncNotEnabled";l.ModulesNotSupported="ModulesNotSupported";l.CircularModules="CircularModules";l.CannotCompareDateAndTime="CannotCompareDateAndTime";l.NeverReach=
"NeverReach";l.UnsupportedHashType="UnsupportedHashType";l.InvalidParameter="InvalidParameter";l.FeatureSetDoesNotHaveSubtypes="FeatureSetDoesNotHaveSubtypes";l.UnexpectedToken="UnexpectedToken";l.Unrecognized="Unrecognized";l.UnrecognizedType="UnrecognizedType";l.MaximumCallDepth="MaximumCallDepth";l.BooleanConditionRequired="BooleanConditionRequired";l.TypeNotAllowedInFeature="TypeNotAllowedInFeature";l.KeyMustBeString="KeyMustBeString";l.WrongNumberOfParameters="WrongNumberOfParameters";l.CallNonFunction=
"CallNonFunction";l.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";l.NoFunctionInDictionary="NoFunctionInDictionary";l.NoFunctionInArray="NoFunctionInArray";l.AssignModuleFunction="AssignModuleFunction";l.LogicExpressionOrAnd="LogicExpressionOrAnd";l.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";l.FunctionNotFound="FunctionNotFound";l.InvalidMemberAccessKey="InvalidMemberAccessKey";l.UnsupportedUnaryOperator="UnsupportUnaryOperator";l.InvalidIdentifier="InvalidIdentifier";
l.MemberOfNull="MemberOfNull";l.UnsupportedOperator="UnsupportedOperator";l.Cancelled="Cancelled";l.ModuleAccessorMustBeString="ModuleAccessorMustBeString";l.ModuleExportNotFound="ModuleExportNotFound";l.Immutable="Immutable";l.OutOfBounds="OutOfBounds";l.IllegalResult="IllegalResult";l.FieldNotFound="FieldNotFound";l.PortalRequired="PortalRequired";l.LogicError="LogicError";l.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";l.KeyAccessorMustBeString="KeyAccessorMustBeString";l.WrongSpatialReference=
"WrongSpatialReference";l.CannotChangeTimeZoneTime="CannotChangeTimeZoneTime";l.CannotChangeTimeZoneDateOnly="CannotChangeTimeZoneDateOnly"})(u.ExecutionErrorCodes||(u.ExecutionErrorCodes={}));const b={[u.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[u.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[u.ExecutionErrorCodes.CannotCompareDateAndTime]:"Cannot compare date or dateonly with timeonly types",[u.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",
[u.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[u.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[u.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[u.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[u.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[u.ExecutionErrorCodes.FunctionNotFound]:"Function not found",[u.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",
[u.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[u.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[u.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[u.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[u.ExecutionErrorCodes.PortalRequired]:"Portal is required",[u.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[u.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",
[u.ExecutionErrorCodes.Unrecognized]:"Unrecognized code structure",[u.ExecutionErrorCodes.UnrecognizedType]:"Unrecognized type",[u.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[u.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[u.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[u.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",
[u.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[u.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[u.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[u.ExecutionErrorCodes.Immutable]:"Object is immutable",[u.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",[u.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[u.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",
[u.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[u.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognized",[u.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[u.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[u.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",[u.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[u.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",
[u.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[u.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26",[u.ExecutionErrorCodes.CannotChangeTimeZoneTime]:"Cannot change the timezone of a Time",[u.ExecutionErrorCodes.CannotChangeTimeZoneDateOnly]:"Cannot change the timezone of a DateOnly",[u.ExecutionErrorCodes.FeatureSetDoesNotHaveSubtypes]:"FeatureSet does not have subtypes"};class a extends Error{constructor(...l){super(...l)}}
class c extends a{constructor(l,D){super(C(D)+l.message,{cause:l});this.loc=null;Error.captureStackTrace&&Error.captureStackTrace(this,c);D?.loc&&(this.loc=D.loc)}}class m extends Error{constructor(l,D,z,d){super("Execution error - "+C(z)+M.replace(b[D],d));this.loc=null;this.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(this,m);z?.loc&&(this.loc=z.loc)}}class k extends Error{constructor(l,D,z,d){super("Compilation error - "+C(z)+M.replace(b[D],
d));this.loc=null;this.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(this,k);z?.loc&&(this.loc=z.loc)}}class g extends Error{constructor(){super("Uncompilable code structures");this.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(this,g)}}u.ModuleErrorCodes=void 0;(function(l){l.UnrecognizedUri="UnrecognizedUri";l.UnsupportedUriProtocol="UnsupportedUriProtocol"})(u.ModuleErrorCodes||
(u.ModuleErrorCodes={}));const p={[u.ModuleErrorCodes.UnrecognizedUri]:"Unrecognized uri - {uri}",[u.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognized uri protocol"};class F extends Error{constructor(l,D){super(M.replace(p[l],D));this.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(this,F)}}u.ArcadeCompilationError=k;u.ArcadeExecutionError=m;u.ArcadeUncompilableError=g;u.ErrorWithCause=a;u.LocatableArcadeExecutionError=c;u.ModuleError=F;u.ensureArcadeExecutionError=
function(l,D,z){return"esri.arcade.arcadeexecutionerror"===z.declaredRootClass||"esri.arcade.arcadecompilationerror"===z.declaredRootClass?null===z.loc&&D?.loc?new c(z,{cause:z}):z:D?.loc?new c(z,{cause:z}):z};u.executionErrorMessages=b;u.moduleErrorMessages=p;u.parsingValidationMessage=function(l,D,z){return"Parsing error - "+C(l)+M.replace(b[D],z)};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/FunctionWrapper":function(){define(["exports","../core/promiseUtils"],function(u,
M){function C(m,k,g){if(m instanceof b&&!(m instanceof c)){const p=new c;p.fn=m;p.parameterEvaluator=g;p.context=k;return p}return m}class b{constructor(){}}class a extends b{constructor(m){super();this.fn=m}createFunction(m){return(...k)=>this.fn(m,{preparsed:!0,arguments:k})}call(m,k){return this.fn(m,k)}marshalledCall(m,k,g,p){return p(m,k,(F,l,D)=>{D=D.map(z=>z instanceof b&&!(z instanceof c)?C(z,m,p):z);F=this.call(g,{args:D});return M.isPromiseLike(F)?F.then(z=>C(z,g,p)):F})}}class c extends b{constructor(){super(...arguments);
this.context=this.fn=null}createFunction(m){return this.fn.createFunction(this.context)}call(m,k){return this.fn.marshalledCall(m,k,this.context,this.parameterEvaluator)}marshalledCall(m,k,g){return this.fn.marshalledCall(m,k,this.context,this.parameterEvaluator)}}u.ArcadeFunction=b;u.NativeFunction=a;u.ScopeMarshalledFunction=c;u.wrapModuleScopedResponse=C;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ImmutableArray":function(){define(function(){class u{constructor(M=
[]){this._elements=M}length(){return this._elements.length}get(M){return this._elements[M]}toArray(){const M=[];for(let C=0;C<this.length();C++)M.push(this.get(C));return M}}return u})},"esri/arcade/ImmutablePathArray":function(){define(["./ImmutableArray","./ImmutablePointArray"],function(u,M){class C extends u{constructor(b,a,c,m,k){super(b);this._lazyPath=[];this._hasM=this._hasZ=!1;this._hasZ=c;this._hasM=m;this._spRef=a;this._cacheId=k}get(b){if(void 0===this._lazyPath[b]){const a=this._elements[b];
if(void 0===a)return;this._lazyPath[b]=new M(a,this._spRef,this._hasZ,this._hasM,this._cacheId,b)}return this._lazyPath[b]}equalityTest(b){return b===this?!0:null===b||!1===b instanceof C?!1:b.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}return C})},"esri/arcade/ImmutablePointArray":function(){define(["./ImmutableArray","../geometry/Point"],function(u,M){class C extends u{constructor(b,a,c,m,k,g){super(b);this._lazyPt=[];this._hasM=this._hasZ=!1;this._spRef=
a;this._hasZ=c;this._hasM=m;this._cacheId=k;this._partId=g}get(b){if(void 0===this._lazyPt[b]){const a=this._elements[b];if(void 0===a)return;const c=this._hasZ,m=this._hasM;let k=null;k=c&&!m?new M(a[0],a[1],a[2],void 0,this._spRef):m&&!c?new M(a[0],a[1],void 0,a[2],this._spRef):c&&m?new M(a[0],a[1],a[2],a[3],this._spRef):new M(a[0],a[1],this._spRef);k.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+b.toString();this._lazyPt[b]=k}return this._lazyPt[b]}equalityTest(b){return b===
this?!0:null===b||!1===b instanceof C?!1:b.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}return C})},"esri/arcade/featureset/support/shared":function(){define("exports ../../ArcadeDate ../../../core/sql/DateOnly ../../../core/sql/TimeOnly ../../../geometry/Extent ../../../layers/support/Field ../../../chunks/datetime".split(" "),function(u,M,C,b,a,c,m){function k(p){return p instanceof Date}function g(p){return p instanceof M.ArcadeDate}
u.FeatureServiceDatabaseType=void 0;(function(p){p[p.Standardised=0]="Standardised";p[p.StandardisedNoInterval=1]="StandardisedNoInterval";p[p.SqlServer=2]="SqlServer";p[p.Oracle=3]="Oracle";p[p.Postgres=4]="Postgres";p[p.PGDB=5]="PGDB";p[p.FILEGDB=6]="FILEGDB";p[p.NotEvaluated=7]="NotEvaluated"})(u.FeatureServiceDatabaseType||(u.FeatureServiceDatabaseType={}));u.IdState=void 0;(function(p){p[p.InFeatureSet=0]="InFeatureSet";p[p.NotInFeatureSet=1]="NotInFeatureSet";p[p.Unknown=2]="Unknown"})(u.IdState||
(u.IdState={}));u.callback=function(p,F){return function(){try{p.apply(null,arguments)}catch(l){F.reject(l)}}};u.cloneAttributes=function(p){const F={};for(const l in p)F[l]=p[l];return F};u.cloneField=function(p){return c.fromJSON(p.toJSON())};u.convertLinearUnitsToCode=function(p){if(null==p)return null;if("number"===typeof p||"number"===typeof p)return p;switch(p.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9093;case "kilometers":case "kilometer":case "km":return 9036}return null};
u.convertSquareUnitsToCode=function(p){if(null==p)return null;if("number"===typeof p)return p;switch(p.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109439;case "kilometers":case "kilometer":case "km":return 109414}return null};u.defaultMaxRecords=1E3;u.equalityTest=function(p,F){return p===F?!0:(k(p)||g(p))&&(k(F)||g(F))?p.getTime()===F.getTime():!1};u.errback=function(p){return function(F){p.reject(F)}};u.esriFieldToJson=function(p){return p.toJSON?p.toJSON():
p};u.extractServiceUrl=function(p){if(void 0===p)return"";p=p.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");p=p.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return p=p.split("?")[0]};u.isArcadeDate=g;u.isArcadeDateOnly=function(p){return p instanceof C.DateOnly};u.isArcadeTime=function(p){return p instanceof b.TimeOnly};u.isArray=function(p){return p instanceof Array};u.isBoolean=function(p){return"boolean"===typeof p};u.isDate=k;u.isLuxonDate=function(p){return p instanceof m.DateTime};u.isNumber=
function(p){return"number"===typeof p};u.isString=function(p){return"string"===typeof p||p instanceof String};u.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",
blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",
esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};u.layerGeometryEsriConstants={point:"point",polygon:"polygon",
polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};u.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",
esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};u.sameGeomType=function(p,F){return p===F||"point"===p&&"esriGeometryPoint"===F||"polyline"===p&&"esriGeometryPolyline"===F||"polygon"===p&&"esriGeometryPolygon"===F||"extent"===p&&"esriGeometryEnvelope"===F||"multipoint"===p&&"esriGeometryMultipoint"===F||"point"===F&&"esriGeometryPoint"===p||"polyline"===F&&"esriGeometryPolyline"===
p||"polygon"===F&&"esriGeometryPolygon"===p||"extent"===F&&"esriGeometryEnvelope"===p||"multipoint"===F&&"esriGeometryMultipoint"===p?!0:!1};u.shapeExtent=function(p){if(null==p)return null;switch(p.type){case "polygon":case "multipoint":case "polyline":return p.extent;case "point":return new a({xmin:p.x,ymin:p.y,xmax:p.x,ymax:p.y,spatialReference:p.spatialReference});case "extent":return p}return null};u.stableStringify=function(p,F){F||={};"function"===typeof F&&(F={cmp:F});const l="boolean"===
typeof F.cycles?F.cycles:!1,D=F.cmp&&function(d){return function(f){return function(A,r){return d({key:A,value:f[A]},{key:r,value:f[r]})}}}(F.cmp),z=[];return function A(f){f?.toJSON&&"function"===typeof f.toJSON&&(f=f.toJSON());if(void 0!==f){if("number"===typeof f)return isFinite(f)?""+f:"null";if("object"!==typeof f)return JSON.stringify(f);var r;if(Array.isArray(f)){var w="[";for(r=0;r<f.length;r++)r&&(w+=","),w+=A(f[r])||"null";return w+"]"}if(null===f)return"null";if(z.includes(f)){if(l)return JSON.stringify("__cycle__");
throw new TypeError("Converting circular structure to JSON");}var e=z.push(f)-1,E=Object.keys(f).sort(D?.(f));w="";for(r=0;r<E.length;r++){const B=E[r],t=A(f[B]);t&&(w&&(w+=","),w+=JSON.stringify(B)+":"+t)}z.splice(e,1);return"{"+w+"}"}}(p)};u.toEsriGeometryType=function(p){switch(p){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};Object.defineProperty(u,
Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/DateOnly":function(){define(["exports","../../arcade/ArcadeDate","../../intl/locale","../../chunks/datetime"],function(u,M,C,b){function a(m){m=m.replaceAll(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let k="";const g=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const p of m.match(g)||[])switch(p){case "D":k+=
"d";break;case "DD":k+="dd";break;case "DDD":k+="o";break;case "d":k+="c";break;case "ddd":k+="ccc";break;case "dddd":k+="cccc";break;case "M":k+="L";break;case "MM":k+="LL";break;case "MMM":k+="LLL";break;case "MMMM":k+="LLLL";break;case "YY":k+="yy";break;case "Y":case "YYYY":k+="yyyy";break;case "Q":k+="q";break;case "X":case "x":k+=p;break;default:k=2<=p.length&&"["===p.slice(0,1)&&"]"===p.slice(-1)?k+`'${p.slice(1,-1)}'`:k+`'${p}'`}return k}class c{constructor(m,k,g){this._year=m;this._month=
k;this._day=g;this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(m){return m instanceof c&&m.day===this.day&&m.month===this.month&&m.year===this.year}clone(){return new c(this._year,this._month,this._day)}toDateTime(m){return b.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:M.createDateTimeZone(m)})}toDateTimeLuxon(m){return b.DateTime.fromObject({day:this.day,
month:this.month,year:this.year},{zone:M.createDateTimeZone(m)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(m=null,k=!0){if(null===m||""===m)return this.toString();k&&(m=a(m));if(!m)return"";k=this.toDateTime("unknown");return M.ArcadeDate.dateTimeToArcadeDate(k).toFormat(m,{locale:C.getLocale(),numberingSystem:"latn"})}toArcadeDate(){const m=this.toDateTime("unknown");return M.ArcadeDate.dateTimeToArcadeDate(m)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd",
!1)}toSQLValue(){return this.toFormat("yyyy-LL-dd",!1)}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd",!1)+"'"}plus(m,k){return c.fromDateTime(this.toUTCDateTime().plus({[m]:k}))}toUTCDateTime(){return b.DateTime.utc(this.year,this.month,this.day,0,0,0,0)}difference(m,k){switch(k.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(m.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(m.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===
k?this.toUTCDateTime().diff(m.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(m.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(m.toUTCDateTime(),"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(m.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(m.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(m.toUTCDateTime(),
"years").years;default:return this.toUTCDateTime().diff(m.toUTCDateTime(),"milliseconds").milliseconds}}static fromMilliseconds(m){m=b.DateTime.fromMillis(m,{zone:b.FixedOffsetZone.utcInstance});return m.isValid?c.fromParts(m.year,m.month,m.day):null}static fromSeconds(m){m=b.DateTime.fromSeconds(m,{zone:b.FixedOffsetZone.utcInstance});return m.isValid?c.fromParts(m.year,m.month,m.day):null}static fromReader(m){if(!m)return null;m=m.split("-");return 3!==m.length?null:new c(parseInt(m[0],10),parseInt(m[1],
10),parseInt(m[2],10))}static fromParts(m,k,g){m=new c(m,k,g);return!1===m.isValid?null:m}static fromDateJS(m){return c.fromParts(m.getFullYear(),m.getMonth()+1,m.getDay())}static fromDateTime(m){return c.fromParts(m.year,m.month,m.day)}static fromSqlTimeStampOffset(m){return this.fromDateTime(m.toDateTime())}static fromString(m,k=null){if(""===m||null===m)return null;var g=[];if(k)(k=a(k))&&g.push(k);else if(null===k||""===k)return m=b.DateTime.fromISO(m,{setZone:!0}),m.isValid?c.fromParts(m.year,
m.month,m.day):null;for(const p of g)if(g=b.DateTime.fromFormat(m,k??p),g.isValid)return new c(g.year,g.month,g.day);return null}static fromNow(m="system"){m=b.DateTime.fromJSDate(new Date).setZone(M.createDateTimeZone(m));return new c(m.year,m.month,m.day)}}u.DateOnly=c;u.standardizeDateOnlyFormat=a;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/TimeOnly":function(){define(["exports","../../arcade/kernel","../../intl/locale","../../chunks/datetime"],function(u,M,C,
b){function a(m){if(!m)return"";const k=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let g="";for(const p of m.match(k)||[])switch(p){case "SSS":g+=p;break;case "A":case "a":g+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":g+=p;break;default:g+=`'${p}'`}return g}class c{constructor(m,k,g,p){this._hour=m;this._minute=k;this._second=g;this._millisecond=p;this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(m){return m instanceof
c&&m.hour===this.hour&&m.minute===this.minute&&m.second===this.second&&m.millisecond===this.millisecond}clone(){return new c(this.hour,this.minute,this.second,this.millisecond)}isValid(){return M.isInteger(this.hour)&&M.isInteger(this.minute)&&M.isInteger(this.second)&&M.isInteger(this.millisecond)&&0<=this.hour&&24>this.hour&&0<=this.minute&&60>this.minute&&0<=this.second&&60>this.second&&0<=this.millisecond&&1E3>this.millisecond}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,
"0")}:${this.second.toString().padStart(2,"0")}`+(0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,
"0")}`}toFormat(m=null){return null===m||""===m?this.toString():(m=a(m))?b.DateTime.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(m,{locale:C.getLocale(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1E3*this.second+6E4*this.minute+36E5*this.hour}static fromParts(m,k,g,p){m=new c(m,k,g,p);return m.isValid()?m:null}static fromReader(m){if(!m)return null;m=m.split(":");return 3!==m.length?null:new c(parseInt(m[0],10),parseInt(m[1],10),parseInt(m[2],
10),0)}static fromMilliseconds(m){return 864E5<m||0>m?null:new c(Math.floor(m/36E5%24),Math.floor(m/6E4%60),Math.floor(m/1E3%60),Math.floor(m%1E3))}static fromDateJS(m){return new c(m.getHours(),m.getMinutes(),m.getSeconds(),m.getMilliseconds())}static fromDateTime(m){return new c(m.hour,m.minute,m.second,m.millisecond)}static fromSqlTimeStampOffset(m){return this.fromDateTime(m.toDateTime())}static fromString(m,k=null){if(""===m||null===m)return null;const g=[];if(k)(k=a(k))&&g.push(k);else if(null===
k||""===k)g.push("HH:mm:ss"),g.push("HH:mm:ss.SSS"),g.push("hh:mm:ss a"),g.push("hh:mm:ss.SSS a"),g.push("HH:mm"),g.push("hh:mm a"),g.push("H:mm"),g.push("h:mm a"),g.push("H:mm:ss"),g.push("h:mm:ss a"),g.push("H:mm:ss.SSS"),g.push("h:mm:ss.SSS a");for(const p of g)if(k=b.DateTime.fromFormat(m,p),k.isValid)return new c(k.hour,k.minute,k.second,k.millisecond);return null}plus(m,k){switch(m){case "days":case "years":case "months":return this.clone();case "hours":case "minutes":case "seconds":case "milliseconds":return c.fromDateTime(this.toUTCDateTime().plus({[m]:k}))}return null}toUTCDateTime(){return b.DateTime.utc(1970,
1,1,this.hour,this.minute,this.second,this.millisecond)}difference(m,k){switch(k.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(m.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(m.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===k?this.toUTCDateTime().diff(m.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(m.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(m.toUTCDateTime(),
"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(m.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(m.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(m.toUTCDateTime(),"years").years;default:return this.toUTCDateTime().diff(m.toUTCDateTime(),"milliseconds").milliseconds}}}u.TimeOnly=c;u.standardizeTimeFormat=a;Object.defineProperty(u,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],function(u,M){u.cloneGeometry=function(C){if(null==C)return null;const b=C.clone();void 0!==C.cache._geVersion&&(b.cache._geVersion=C.cache._geVersion);return b};u.convertLinearUnitsToCode=function(C){if(null==C)return null;if("number"===typeof C)return C;C=C.toLowerCase();C=C.replaceAll(/\s/g,"");C=C.replaceAll("-","");switch(C){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};u.convertSquareUnitsToCode=
function(C){if(null==C)return null;if("number"===typeof C)return C;C=C.toLowerCase();C=C.replaceAll(/\s/g,"");C=C.replaceAll("-","");switch(C){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};u.isInteger=function(C){return"number"===typeof C&&isFinite(C)&&Math.floor(C)===C};u.sameGeomType=function(C,b){return C===b||"point"===C&&"esriGeometryPoint"===b||"polyline"===C&&"esriGeometryPolyline"===
b||"polygon"===C&&"esriGeometryPolygon"===b||"extent"===C&&"esriGeometryEnvelope"===b||"multipoint"===C&&"esriGeometryMultipoint"===b||"point"===b&&"esriGeometryPoint"===C||"polyline"===b&&"esriGeometryPolyline"===C||"polygon"===b&&"esriGeometryPolygon"===C||"extent"===b&&"esriGeometryEnvelope"===C||"multipoint"===b&&"esriGeometryMultipoint"===C?!0:!1};u.shapeExtent=function(C){if(null==C)return null;switch(C.type){case "polygon":case "multipoint":case "polyline":return C.extent;case "point":return new M({xmin:C.x,
ymin:C.y,xmax:C.x,ymax:C.y,spatialReference:C.spatialReference});case "extent":return C}return null};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(u,M,C){function b(F=C.getLocale()){F=F.toLowerCase();let l=F in k;if(!l){const f=F.split("-");1<f.length&&f[0]in k&&(F=f[0],l=!0);l||(F="en")}const [D,z,d="#,##0.###"]=k[F];return{decimal:D,group:z,pattern:d}}function a(F){F=F||{};var l=b(F.locale);const D=
F.pattern||l.pattern,z=l.group,d=l.decimal;let f=1;if(D.includes("%"))f/=100;else if(D.includes("\u2030"))f/=1E3;else if(D.includes("\u00a4"))throw Error("currency notation not supported");l=D.split(";");1===l.length&&l.push("-"+l[0]);return{regexp:p(l,A=>{A="(?:"+M.escapeRegExpString(A,".")+")";return A.replace(g,r=>{const w={signed:!1,separator:F.strict?z:[z,""],fractional:F.fractional,decimal:d,exponent:!1};r=r.split(".");let e=F.places;1===r.length&&1!==f&&(r[1]="###");1===r.length||0===e?w.fractional=
!1:(void 0===e&&(e=F.pattern?r[1].lastIndexOf("0")+1:Infinity),e&&null==F.fractional&&(w.fractional=!0),!F.places&&+e<r[1].length&&(e+=","+r[1].length),w.places=e);r=r[0].split(",");1<r.length&&(w.groupSize=r.pop().length,1<r.length&&(w.groupSize2=r.pop().length));return"("+c(w)+")"})},!0).replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:z,decimal:d,factor:f}}function c(F){F=F||{};"places"in F||(F.places=Infinity);"string"!==typeof F.decimal&&(F.decimal=".");"fractional"in F&&!String(F.places).startsWith("0")||
(F.fractional=[!0,!1]);"exponent"in F||(F.exponent=[!0,!1]);"eSigned"in F||(F.eSigned=[!0,!1]);var l=m(F);const D=p(F.fractional,d=>{let f="";d&&0!==F.places&&(f="\\"+F.decimal,f=Infinity===F.places?"(?:"+f+"\\d+)?":f+("\\d{"+F.places+"}"));return f},!0),z=p(F.exponent,d=>d?"([eE]"+m({signed:F.eSigned})+")":"");l+=D;D&&(l="(?:(?:"+l+")|(?:"+D+"))");return l+z}function m(F){F=F||{};"signed"in F||(F.signed=[!0,!1]);"separator"in F?"groupSize"in F||(F.groupSize=3):F.separator="";const l=p(F.signed,z=>
z?"[-+]":"",!0),D=p(F.separator,z=>{if(!z)return"(?:\\d+)";z=M.escapeRegExpString(z);" "===z?z="\\s":"\u00a0"===z&&(z="\\s\\xa0");const d=F.groupSize,f=F.groupSize2;return f?(z="(?:0|[1-9]\\d{0,"+(f-1)+"}(?:["+z+"]\\d{"+f+"})*["+z+"]\\d{"+d+"})",0<d-f?"(?:"+z+"|(?:0|[1-9]\\d{0,"+(d-1)+"}))":z):"(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+z+"]\\d{"+d+"})*)"},!0);return l+D}const k={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",",
"."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",",
"\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},g=/[#0,]*[#0](?:\.0*#*)?/,p=(F,l,D)=>{if(!(F instanceof Array))return l(F);const z=[];for(let d=0;d<F.length;d++)z.push(l(F[d]));F=z.join("|");return"("+(D?"?:":"")+F+")"};u._parseInfo=a;u.format=function(F,l){l={...l};var D=b(l.locale);l.customs=D;D=l.pattern||D.pattern;if(isNaN(F)||Infinity===Math.abs(F))return null;var z=F;var d=l||{};var f=d.customs.group,A=d.customs.decimal;D=D.split(";");F=D[0];l=D[0>z?1:0]||"-"+
F;if(l.includes("%"))z*=100;else if(l.includes("\u2030"))z*=1E3;else{if(l.includes("\u00a4"))throw Error("currency notation not supported");if(l.includes("E"))throw Error("exponential notation not supported");}D=g;var r=F.match(D);if(!r)throw Error("unable to find a number expression in pattern: "+l);!1===d.fractional&&(d.places=0);F=l.replace;r=r[0];d=d={decimal:A,group:f,places:d.places,round:d.round};!0===d.places&&(d.places=0);Infinity===d.places&&(d.places=6);A=r.split(".");var w="string"===
typeof d.places&&d.places.indexOf(",");r=d.places;w?r=d.places.substring(w+1):0<=+r||(r=(A[1]||[]).length);0>d.round||(z=Number(z.toFixed(Number(r))));f=String(Math.abs(z)).split(".");z=f[1]||"";A[1]||d.places?(w&&(d.places=d.places.substring(0,w)),w=void 0!==d.places?d.places:A[1]&&A[1].lastIndexOf("0")+1,+w>z.length&&(f[1]=z.padEnd(Number(w),"0")),+r<z.length&&(f[1]=z.substr(0,Number(r)))):f[1]&&f.pop();z=A[0].replace(",","");r=z.indexOf("0");-1!==r&&(r=z.length-r,r>f[0].length&&(f[0]=f[0].padStart(r,
"0")),z.includes("#")||(f[0]=f[0].substr(f[0].length-r)));z=A[0].lastIndexOf(",");let e;if(-1!==z){var E=A[0].length-z-1;A=A[0].substr(0,z);z=A.lastIndexOf(",");-1!==z&&(e=A.length-z-1)}A=[];for(z=f[0];z;)r=z.length-E,A.push(0<r?z.substr(r):z),z=0<r?z.slice(0,r):"",e&&(E=e,e=void 0);f[0]=A.reverse().join(d.group||",");E=f.join(d.decimal||".");return F.call(l,D,E)};u.getCustoms=b;u.parse=function(F,l){l=a(l);F=(new RegExp("^"+l.regexp+"$")).exec(F);if(!F)return NaN;let D=F[1];if(!F[1]){if(!F[2])return NaN;
D=F[2];l.factor*=-1}D=D.replaceAll(new RegExp("["+l.group+"\\s\\xa0]","g"),"").replace(l.decimal,".");return Number(D)*l.factor};u.regexp=function(F){return a(F).regexp};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/Feature":function(){define("./ArcadeDate ./deepClone ./Dictionary ./executionError ./ImmutableArray ../chunks/languageUtils ../core/sql/DateOnly ../core/sql/TimeOnly ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils ../layers/graphics/featureConversionUtils ../layers/support/FieldsIndex".split(" "),
function(u,M,C,b,a,c,m,k,g,p,F,l,D){class z{constructor(){this.arcadeDeclaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._optimizedGeomDefinition=null;this._fieldTypesFixed=!0;this.contextTimeZone=this.fieldsIndex=null;this.immutable=!0;this._fieldsToFixDataTypes=null;this.immutable=!0}static createFromGraphic(d,f){const A=new z;A.contextTimeZone=f??null;A._geometry=null!=d.geometry?d.geometry:null;A.attributes=void 0===d.attributes?{}:null===d.attributes?{}:d.attributes;
d._sourceLayer?(A._layer=d._sourceLayer,A._fieldTypesFixed=!1):d._layer?(A._layer=d._layer,A._fieldTypesFixed=!1):d.layer&&"fields"in d.layer?(A._layer=d.layer,A._fieldTypesFixed=!1):d.sourceLayer&&"fields"in d.sourceLayer&&(A._layer=d.sourceLayer,A._fieldTypesFixed=!1);A._layer&&!A._fieldTypesFixed&&(A.fieldsIndex=this.hydrateFieldsIndex(A._layer));return A}static createFromArcadeFeature(d){if(d instanceof z){var f=new z;f._fieldTypesFixed=d._fieldTypesFixed;f.attributes=d.attributes;f._geometry=
d._geometry;f._optimizedGeomDefinition=d._optimizedGeomDefinition;d._layer&&(f._layer=d._layer);f.fieldsIndex=d.fieldsIndex;f.contextTimeZone=d.contextTimeZone;return f}f={};for(const A of d.keys())f[A]=d.field(A);return z.createFromGraphicLikeObject(d.geometry(),f,d.fullSchema(),d.contextTimeZone)}static createFromOptimisedFeature(d,f,A){const r=new z;r._geometry=d.geometry?{geometry:d.geometry}:null;r._optimizedGeomDefinition=A;r.attributes=d.attributes||{};r._layer=f;r._fieldTypesFixed=!1;return r}static createFromArcadeDictionary(d,
f){const A=new z;A.attributes=d.field("attributes");null!==A.attributes?A.attributes instanceof C?(A.attributes=A.attributes.attributes,null===A.attributes&&(A.attributes={})):A.attributes={}:A.attributes={};A._geometry=d.field("geometry");null!==A._geometry&&(A._geometry instanceof C?A._geometry=z.parseGeometryFromDictionary(A._geometry,f):A._geometry instanceof g||(A._geometry=null));return A}static createFromGraphicLikeObject(d,f,A=null,r){const w=new z;w.contextTimeZone=r??null;null===f&&(f={});
w.attributes=f;w._geometry=null!=d?d:null;w._layer=A;w._layer&&(w._fieldTypesFixed=!1,w.fieldsIndex=this.hydrateFieldsIndex(w._layer));return w}static hydrateFieldsIndex(d){return null===d?null:c.isFeatureSet(d)?d.getFieldsIndex():d.fieldsIndex?d.fieldsIndex:D.fromLayerJSON({datesInUnknownTimezone:d.datesInUnknownTimezone,fields:d.fields,timeInfo:d.timeInfo,editFieldsInfo:d.editFieldsInfo,dateFieldsTimeReference:d.dateFieldsTimeReference??{timeZone:"UTC",respectsDaylightSaving:!1}})}repurposeFromGraphicLikeObject(d,
f,A=null){null===f&&(f={});this.attributes=f;this._geometry=d??null;this._fieldTypesFixed=(this._layer=A)?!1:!0}castToText(d=!1){let f="";!1===this._fieldTypesFixed&&this._fixFieldTypes();for(const A in this.attributes){""!==f&&(f+=",");const r=this.attributes[A];null==r?f+=JSON.stringify(A)+":null":c.isBoolean(r)||c.isNumber(r)||c.isString(r)?f+=JSON.stringify(A)+":"+JSON.stringify(r):r instanceof g?f+=JSON.stringify(A)+":"+c.toStringExplicit(r):r instanceof k.TimeOnly||r instanceof m.DateOnly?f+=
`${JSON.stringify(A)}:${JSON.stringify(r.toString())}`:r instanceof a?f+=JSON.stringify(A)+":"+c.toStringExplicit(r,null,d):r instanceof Array?f+=JSON.stringify(A)+":"+c.toStringExplicit(r,null,d):r instanceof u.ArcadeDate?f=d?f+(JSON.stringify(A)+":"+JSON.stringify(r.getTime())):f+(JSON.stringify(A)+":"+r.stringify()):null!==r&&"object"===typeof r&&void 0!==r.castToText&&(f+=JSON.stringify(A)+":"+r.castToText(d))}return'{"geometry":'+(null===this.geometry()?"null":c.toStringExplicit(this.geometry()))+
',"attributes":{'+f+"}}"}_fixFieldTypes(){if(this._fieldsToFixDataTypes&&0<this._fieldsToFixDataTypes?.length)this._fixAllFields(this._fieldsToFixDataTypes);else{var d=[],f=this._layer.fields;for(let A=0;A<f.length;A++){const {name:r,type:w}=f[A];switch(w){case "date":case "esriFieldTypeDate":d.push({field:r,dataType:"date"});break;case "date-only":case "esriFieldTypeDateOnly":d.push({field:r,dataType:"date-only"});break;case "time-only":case "esriFieldTypeTimeOnly":d.push({field:r,dataType:"time-only"});
break;case "timestamp-offset":case "esriFieldTypeTimestampOffset":d.push({field:r,dataType:"timestamp-offset"})}}this._fieldsToFixDataTypes=d;0<d.length&&this._fixAllFields(d)}this._fieldTypesFixed=!0}isUnknownDateTimeField(d){return"unknown"===this.fieldsIndex?.getTimeZone(d)}_fixAllFields(d){this.attributes={...this.attributes};const f=this.contextTimeZone??"system";for(let w=0;w<d.length;w++){var A=d[w].field,r=d[w].dataType;let e=this.attributes[A];if(void 0===e)for(const E in this.attributes){if(E.toLowerCase()===
A.toLowerCase()){e=this.attributes[E];if(null!==e){if("time-only"===r){c.isTime(e)||(this.attributes[E]=k.TimeOnly.fromReader(e.toString()));break}if("date-only"===r){c.isDateOnly(e)||(this.attributes[E]=m.DateOnly.fromReader(e.toString()));break}if("timestamp-offset"===r){c.isDate(e)||(this.attributes[E]=u.ArcadeDate.fromReaderAsTimeStampOffset(e.toString()));break}A=this.isUnknownDateTimeField(E);e instanceof Date?this.attributes[E]=A?u.ArcadeDate.unknownDateJSToArcadeDate(e):u.ArcadeDate.dateJSAndZoneToArcadeDate(e,
f):c.isDate(e)||(this.attributes[E]=A?u.ArcadeDate.unknownEpochToArcadeDate(e):u.ArcadeDate.epochToArcadeDate(e,f))}break}}else null!==e&&("time-only"===r?c.isTime(e)?this.attributes[A]=e:this.attributes[A]=k.TimeOnly.fromReader(e.toString()):"date-only"===r?c.isDateOnly(e)?this.attributes[A]=e:this.attributes[A]=m.DateOnly.fromReader(e.toString()):"timestamp-offset"===r?c.isDate(e)?this.attributes[A]=e:this.attributes[A]=u.ArcadeDate.fromReaderAsTimeStampOffset(e.toString()):(r=this.isUnknownDateTimeField(A),
c.isDate(e)?this.attributes[A]=e:this.attributes[A]=e instanceof Date?r?u.ArcadeDate.unknownDateJSToArcadeDate(e):u.ArcadeDate.dateJSAndZoneToArcadeDate(e,f):r?u.ArcadeDate.unknownEpochToArcadeDate(e):u.ArcadeDate.epochToArcadeDate(e,f)))}}geometry(){if(null===this._geometry||this._geometry instanceof g)return this._geometry;this._optimizedGeomDefinition?(this._geometry=F.fromJSON(l.convertToGeometry(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM)),
this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=F.fromJSON(this._geometry);return this._geometry}field(d){this._fieldTypesFixed||this._fixFieldTypes();var f=this.attributes[d];if(void 0!==f)return f;f=d.toLowerCase();for(const A in this.attributes)if(A.toLowerCase()===f)return this.attributes[A];if(this._hasFieldDefinition(f))return null;throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.FieldNotFound,null,{key:d});}_hasFieldDefinition(d){if(null===
this._layer)return!1;for(let f=0;f<this._layer.fields.length;f++)if(this._layer.fields[f].name.toLowerCase()===d)return!0;return!1}setField(d,f){if(this.immutable)throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.Immutable,null);f instanceof Date&&(f=this.isUnknownDateTimeField(d)?u.ArcadeDate.unknownDateJSToArcadeDate(f):u.ArcadeDate.dateJSToArcadeDate(f));if(!1===c.isSimpleType(f))throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.TypeNotAllowedInFeature,null);const A=d.toLowerCase();
if(void 0===this.attributes[d])for(const r in this.attributes)if(r.toLowerCase()===A){this.attributes[r]=f;return}this.attributes[d]=f}hasField(d){const f=d.toLowerCase();if(void 0!==this.attributes[d])return!0;for(const A in this.attributes)if(A.toLowerCase()===f)return!0;return this._hasFieldDefinition(f)?!0:!1}keys(){let d=[];const f={};for(var A in this.attributes)d.push(A),f[A.toLowerCase()]=1;if(null!==this._layer)for(A=0;A<this._layer.fields.length;A++){const r=this._layer.fields[A];1!==f[r.name.toLowerCase()]&&
d.push(r.name)}return d=d.sort()}static parseGeometryFromDictionary(d,f){d=z._convertDictionaryToJson(d,!0);void 0!==d.hasm&&(d.hasM=d.hasm,delete d.hasm);void 0!==d.hasz&&(d.hasZ=d.hasz,delete d.hasz);void 0!==d.spatialreference&&(d.spatialReference=d.spatialreference,delete d.spatialreference);d.spatialReference||(d.spatialReference=f);void 0!==d.rings&&(d.rings=this._fixPathArrays(d.rings,!0===d.hasZ,!0===d.hasZ));void 0!==d.paths&&(d.paths=this._fixPathArrays(d.paths,!0===d.hasZ,!0===d.hasM));
void 0!==d.points&&(d.points=this._fixPointArrays(d.points,!0===d.hasZ,!0===d.hasM));return F.fromJSON(d)}static _fixPathArrays(d,f,A){const r=[];if(d instanceof Array)for(var w=0;w<d.length;w++)r.push(this._fixPointArrays(d[w],f,A));else if(d instanceof a)for(w=0;w<d.length();w++)r.push(this._fixPointArrays(d.get(w),f,A));return r}static _fixPointArrays(d,f,A){const r=[];if(d instanceof Array)for(var w=0;w<d.length;w++){var e=d[w];e instanceof p?f&&A?r.push([e.x,e.y,e.z,e.m]):f?r.push([e.x,e.y,e.z]):
A?r.push([e.x,e.y,e.m]):r.push([e.x,e.y]):e instanceof a?r.push(e.toArray()):r.push(e)}else if(d instanceof a)for(w=0;w<d.length();w++)e=d.get(w),e instanceof p?f&&A?r.push([e.x,e.y,e.z,e.m]):f?r.push([e.x,e.y,e.z]):A?r.push([e.x,e.y,e.m]):r.push([e.x,e.y]):e instanceof a?r.push(e.toArray()):r.push(e);return r}static _convertDictionaryToJson(d,f=!1){const A={};for(const r in d.attributes){let w=d.attributes[r];w instanceof C&&(w=z._convertDictionaryToJson(w));f?A[r.toLowerCase()]=w:A[r]=w}return A}static parseAttributesFromDictionary(d){const f=
{};for(const A in d.attributes){const r=d.attributes[A];if(c.isSimpleType(r))f[A]=r;else throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.InvalidParameter,null);}return f}static fromJson(d,f){let A=null;null!==d.geometry&&void 0!==d.geometry&&(A=F.fromJSON(d.geometry));const r={};if(null!==d.attributes&&void 0!==d.attributes)for(const w in d.attributes){const e=d.attributes[w];if(null===e)r[w]=e;else if(c.isString(e)||c.isNumber(e)||c.isBoolean(e)||c.isDate(e)||c.isTime(e)||c.isDateOnly(e))r[w]=
e;else throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.InvalidParameter,null);}return z.createFromGraphicLikeObject(A,r,null,f??null)}fullSchema(){return this._layer}gdbVersion(){if(null===this._layer)return"";const d=this._layer.gdbVersion;return void 0===d?"":""===d&&this._layer.capabilities?.isVersioned?"SDE.DEFAULT":d}castAsJson(d){const f={attributes:{},geometry:!0===d?.keepGeometryType?this.geometry():this.geometry()?.toJSON()??null};for(const A in this.attributes){const r=this.attributes[A];
void 0!==r&&(f.attributes[A]=c.castAsJson(r,d))}return f}async castAsJsonAsync(d,f){return this.castAsJson(f)}}M.configureDeepClone(z);return z})},"esri/arcade/treeAnalysis":function(){define(["exports"],function(u){function M(z){return"string"===typeof z||z instanceof String}function C(z,d){if(z)for(const f of z)b(f,d)}function b(z,d){if(z&&!1!==d(z))switch(z.type){case "ImportDeclaration":C(z.specifiers,d);b(z.source,d);break;case "ExportNamedDeclaration":b(z.declaration,d);break;case "ArrayExpression":C(z.elements,
d);break;case "AssignmentExpression":case "BinaryExpression":b(z.left,d);b(z.right,d);break;case "BlockStatement":C(z.body,d);break;case "Program":C(z.body,d);break;case "CallExpression":b(z.callee,d);C(z.arguments,d);break;case "ExpressionStatement":b(z.expression,d);break;case "ForInStatement":b(z.left,d);b(z.right,d);b(z.body,d);break;case "ForStatement":b(z.init,d);b(z.test,d);b(z.update,d);b(z.body,d);break;case "WhileStatement":b(z.test,d);b(z.body,d);break;case "FunctionDeclaration":b(z.id,
d);C(z.params,d);b(z.body,d);break;case "IfStatement":b(z.test,d);b(z.consequent,d);b(z.alternate,d);break;case "LogicalExpression":b(z.left,d);b(z.right,d);break;case "MemberExpression":b(z.object,d);b(z.property,d);break;case "ObjectExpression":C(z.properties,d);break;case "Property":b(z.key,d);b(z.value,d);break;case "ReturnStatement":b(z.argument,d);break;case "UnaryExpression":b(z.argument,d);break;case "UpdateExpression":b(z.argument,d);break;case "VariableDeclaration":C(z.declarations,d);break;
case "VariableDeclarator":b(z.id,d);b(z.init,d);break;case "TemplateLiteral":C(z.expressions,d),C(z.quasis,d)}}function a(z,d){let f=!1;const A=d.toLowerCase();b(z,r=>{if(f)return!1;"Identifier"===r.type&&r.name&&r.name.toLowerCase()===A&&(f=!0);return!0});return f}function c(z){const d=[];b(z,f=>{"ImportDeclaration"===f.type&&f.source&&f.source.value&&d.push({libname:f.specifiers[0].local.name.toLowerCase(),source:f.source.value});return!0});return d}function m(z){const d=[];b(z,f=>{"CallExpression"===
f.type&&"Identifier"===f.callee.type&&d.push(f.callee.name.toLowerCase());return!0});return d}const k={all:{min:2,max:2},time:{min:0,max:4},dateonly:{min:0,max:3},getenvironment:{min:0,max:0},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,
max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:0,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,
max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,
max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:3},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,
max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},
distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,
max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,
max:1},nearestcoordinate:{min:2,max:2},nearestvertex:{min:2,max:2},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1},measuretocoordinate:{min:2,max:2},distancetocoordinate:{min:2,max:2},pointtocoordinate:{min:2,max:2}},g={functionDefinitions:new Map,
constantDefinitions:new Map},p={functionDefinitions:new Map,constantDefinitions:new Map};for(var F of["pi","infinity"])p.constantDefinitions.set(F,{type:"constant"}),g.constantDefinitions.set(F,{type:"constant"});p.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]});
g.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(const z in k)F=k[z],p.functionDefinitions.set(z,{overloads:[{type:"function",parametersInfo:{min:F.min,max:F.max}}]}),g.functionDefinitions.set(z,{overloads:[{type:"function",parametersInfo:{min:F.min,
max:F.max}}]});const l=new Set("featureset featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset getuser attachments featuresetbyportalitem getfeaturesetinfo filterbysubtypecode knowledgegraphbyportalitem querygraph".split(" ")),D=new Set("disjoint intersects touches crosses within contains overlaps equals relate intersection nearestvertex nearestcoordinate union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple convexhull simplify multiparttosinglepart pointtocoordinate distancetocoordinate measuretocoordinate".split(" "));
u.addFunctionDeclaration=function(z,d){d="sync"===d?g:p;d.functionDefinitions.has(z.name.toLowerCase())?d.functionDefinitions.get(z.name.toLowerCase())?.overloads.push({type:"function",parametersInfo:{min:z.min,max:z.max}}):d.functionDefinitions.set(z.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:z.min,max:z.max}}]})};u.extractFunctionDeclaration=function(z,d){const f=[];if(void 0!==d.params&&null!==d.params)for(let A=0;A<d.params.length;A++)f.push("any");return{name:z,return:"any",
params:f}};u.findExpectedFieldLiterals=function(z){const d=[];b(z,f=>{if("CallExpression"===f.type){if("Identifier"===f.callee.type&&"expects"===f.callee.name.toLowerCase()){var A="";for(let r=0;r<(f.arguments||[]).length;r++)0===r?"Identifier"===f.arguments[r].type&&(A=f.arguments[r].name.toLowerCase()):A&&"Literal"===f.arguments[r].type&&M(f.arguments[r].value)&&d.push(A+"."+f.arguments[r].value.toLowerCase());return!1}if("Identifier"===f.callee.type&&["domainname","domaincode","domain","haskey"].includes(f.callee.name.toLowerCase())&&
2<=f.arguments.length)return A="","Identifier"===f.arguments[0].type&&(A=f.arguments[0].name.toLowerCase()),A&&"Literal"===f.arguments[1].type&&M(f.arguments[1].value)&&d.push(A+"."+f.arguments[1].value.toLowerCase()),!1}if("MemberExpression"!==f.type||"Identifier"!==f.object.type)return!0;!1===f.computed&&f.object&&f.object.name&&f.property&&"Identifier"===f.property.type&&f.property.name?d.push(f.object.name.toLowerCase()+"."+f.property.name.toLowerCase()):f.object&&f.object.name&&f.property&&"Literal"===
f.property.type&&"string"===typeof f.property.value&&d.push(f.object.name.toLowerCase()+"."+f.property.value?.toString().toLowerCase());return!1});return d};u.findFieldLiterals=function(z){const d=[];b(z,f=>{if("MemberExpression"!==f.type||"Identifier"!==f.object.type)return!0;!1===f.computed&&f.object&&f.object.name&&f.property&&"Identifier"===f.property.type&&f.property.name?d.push(f.object.name.toLowerCase()+"."+f.property.name.toLowerCase()):f.object&&f.object.name&&f.property&&"Literal"===f.property.type&&
"string"===typeof f.property.value&&d.push(f.object.name.toLowerCase()+"."+f.property.value?.toString().toLowerCase());return!1});return d};u.findFunctionCalls=m;u.findModuleImports=c;u.findScriptDependencies=function(z,d=[]){let f=null;if(void 0===z.usesFeatureSet){null===f&&(f=m(z));z.usesFeatureSet=!1;for(let A=0;A<f.length;A++)l.has(f[A])&&(z.usesFeatureSet=!0,z.isAsync=!0);if(!1===z.usesFeatureSet&&d&&0<d.length)for(const A of d)if(a(z,A)){z.usesFeatureSet=!0;z.isAsync=!0;break}}void 0===z.usesModules&&
(z.usesModules=!1,0<c(z).length&&(z.usesModules=!0));if(void 0===z.usesGeometry)for(z.usesGeometry=!1,null===f&&(f=m(z)),d=0;d<f.length;d++)D.has(f[d])&&(z.usesGeometry=!0)};u.fullArcadeApiAsync=p;u.fullArcadeApiSync=g;u.referencesFunction=function(z,d){let f=!1;const A=d.toLowerCase();b(z,r=>f?!1:"CallExpression"===r.type&&"Identifier"===r.callee.type&&r.callee.name&&r.callee.name.toLowerCase()===A?(f=!0,!1):!0);return f};u.referencesMember=a;u.scriptUsesFeatureSet=function(z){z=m(z);for(let d=0;d<
z.length;d++)if(l.has(z[d]))return!0;return!1};u.walk=b;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/array":function(){define("exports ../arcade/deepClone ../arcade/executionError ../arcade/ImmutableArray ./languageUtils ../core/promiseUtils".split(" "),function(u,M,C,b,a,c){function m(g){function p(d,f,A){if(d instanceof b)return d.toArray();if(a.isArray(d))return d;throw new C.ArcadeExecutionError(f,C.ExecutionErrorCodes.InvalidParameter,A);}function F(d,f){var A=
d.length,r=Math.floor(A/2);if(0===A)return[];if(1===A)return[d[0]];var w=F(d.slice(0,r),f);d=F(d.slice(r,A),f);for(A=[];0<w.length||0<d.length;)0<w.length&&0<d.length?(r=f(w[0],d[0]),isNaN(r)&&(r=0),0>=r?(A.push(w[0]),w=w.slice(1)):(A.push(d[0]),d=d.slice(1))):0<w.length?(A.push(w[0]),w=w.slice(1)):0<d.length&&(A.push(d[0]),d=d.slice(1));return A}async function l(d,f){const A=d.length,r=Math.floor(A/2);if(0===A)return[];if(1===A)return[d[0]];d=[await l(d.slice(0,r),f),await l(d.slice(r,A),f)];return D(d[0],
d[1],f,[])}async function D(d,f,A,r){if(0<d.length||0<f.length){if(0<d.length&&0<f.length){let w=await A(d[0],f[0]);isNaN(w)&&(w=1);0>=w?(r.push(d[0]),d=d.slice(1)):(r.push(f[0]),f=f.slice(1));return D(d,f,A,r)}if(0<d.length)return r.push(d[0]),d=d.slice(1),D(d,f,A,r);if(0<f.length)return r.push(f[0]),f=f.slice(1),D(d,f,A,r)}else return r}function z(d,f,A,r){a.pcCheck(A,1,2,d,f);let w=A[0];a.isImmutableArray(w)&&(w=w.toArray());if(!1===a.isArray(w))throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,
f);if(1<A.length){if(!1===a.isFunctionParameter(A[1]))throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,f);var e=w;const E=A[1].createFunction(d);return r?l(e,E):e=F(e,(B,t)=>E(B,t))}d=w;if(0===d.length)return[];A={};for(r=0;r<d.length;r++)f=a.getType(d[r]),""!==f&&(A[f]=!0);if(!0===A.Array||!0===A.Dictionary||!0===A.Feature||!0===A.Point||!0===A.Polygon||!0===A.Polyline||!0===A.Multipoint||!0===A.Extent||!0===A.Function)return d.slice(0);r=0;f="";for(e in A)r++,f=e;return d=
1<r||"String"===f?F(d,(E,B)=>{if(null===E||void 0===E||E===a.voidOperation)return null===B||void 0===B||B===a.voidOperation?0:1;if(null===B||void 0===B||B===a.voidOperation)return-1;E=a.toString(E);B=a.toString(B);return E<B?-1:E===B?0:1}):"Number"===f?F(d,(E,B)=>E-B):"Boolean"===f?F(d,(E,B)=>E===B?0:B?-1:1):"Date"===f?F(d,(E,B)=>B-E):d.slice(0)}g.functions.array=function(d,f){return g.standardFunction(d,f,(A,r,w)=>{a.pcCheck(w,0,2,d,f);if(0===w.length||1===w.length&&null===w[0])return[];if(a.isArray(w[0])){if(2===
w.length&&!1===a.isBoolean(w[1]))throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,f);return!0===a.defaultUndefined(w[1],!1)?M.deepClone(w[0]):w[0].slice(0)}if(a.isImmutableArray(w[0])){if(2===w.length&&!1===a.isBoolean(w[1]))throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,f);return!0===a.defaultUndefined(w[1],!1)?M.deepClone(w[0]):w[0].toArray().slice(0)}A=a.toNumber(w[0]);if(isNaN(A)||!1===a.isInteger(A))throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,
f);w=a.defaultUndefined(w[1],null);A=Array(A);A.fill(w);return A})};g.functions.front=function(d,f){return g.standardFunction(d,f,(A,r,w)=>{a.pcCheck(w,1,1,d,f);if(a.isImmutableArray(w[0])){if(0>=w[0].length())throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.OutOfBounds,f);return w[0].get(0)}if(a.isArray(w[0])){if(0>=w[0].length)throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.OutOfBounds,f);return w[0][0]}throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,f);
})};g.functions.back=function(d,f){return g.standardFunction(d,f,(A,r,w)=>{a.pcCheck(w,1,1,d,f);if(a.isImmutableArray(w[0])){if(0>=w[0].length())throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.OutOfBounds,f);return w[0].get(w[0].length()-1)}if(a.isArray(w[0])){if(0>=w[0].length)throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.OutOfBounds,f);return w[0][w[0].length-1]}throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,f);})};g.functions.push=function(d,f){return g.standardFunction(d,
f,(A,r,w)=>{a.pcCheck(w,1,2,d,f);if(a.isArray(w[0]))return w[0][w[0].length]=w[1],w[0].length;throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,f);})};g.functions.pop=function(d,f){return g.standardFunction(d,f,(A,r,w)=>{a.pcCheck(w,1,1,d,f);if(a.isArray(w[0])){if(0>=w[0].length)throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.OutOfBounds,f);A=w[0][w[0].length-1];--w[0].length;return A}throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,f);})};
g.functions.erase=function(d,f){return g.standardFunction(d,f,(A,r,w)=>{a.pcCheck(w,2,2,d,f);if(a.isArray(w[0])){A=a.toNumber(w[1]);if(isNaN(A)||!1===a.isInteger(A))throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,f);w=w[0];if(0>=w.length)throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.OutOfBounds,f);0>A&&(A=w.length+A);if(0>A)throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.OutOfBounds,f);if(A>=w.length)throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.OutOfBounds,
f);w.splice(A,1);return a.voidOperation}throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,f);})};g.functions.insert=function(d,f){return g.standardFunction(d,f,(A,r,w)=>{a.pcCheck(w,3,3,d,f);if(a.isArray(w[0])){A=a.toNumber(w[1]);if(isNaN(A)||!1===a.isInteger(A))throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,f);r=w[2];w=w[0];if(A>w.length)throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.OutOfBounds,f);if(0>A&&A<-1*w.length)throw new C.ArcadeExecutionError(d,
C.ExecutionErrorCodes.OutOfBounds,f);if(A===w.length)return w[A]=r,a.voidOperation;w.splice(A,0,r);return a.voidOperation}throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,f);})};g.functions.resize=function(d,f){return g.standardFunction(d,f,(A,r,w)=>{a.pcCheck(w,2,3,d,f);if(a.isArray(w[0])){r=a.toNumber(w[1]);if(isNaN(r)||!1===a.isInteger(r))throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,f);if(0>r)throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,
f);A=a.defaultUndefined(w[2],null);w=w[0];if(w.length>=r)return w.length=r,a.voidOperation;const e=w.length;w.length=r;for(r=e;r<w.length;r++)w[r]=A;return a.voidOperation}throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,f);})};g.functions.includes=function(d,f){return g.standardFunction(d,f,(A,r,w)=>{a.pcCheck(w,2,2,d,f);if(a.isArray(w[0])){const e=w[1];return-1<w[0].findIndex(E=>a.equalityTest(E,e))?!0:!1}if(a.isImmutableArray(w[0])){const e=w[1];return-1<w[0].toArray().findIndex(E=>
a.equalityTest(E,e))?!0:!1}throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,f);})};g.functions.slice=function(d,f){return g.standardFunction(d,f,(A,r,w)=>{a.pcCheck(w,1,3,d,f);if(a.isArray(w[0])){A=a.toNumber(a.defaultUndefined(w[1],0));r=a.toNumber(a.defaultUndefined(w[2],w[0].length));if(isNaN(A)||!1===a.isInteger(A))throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,f);if(isNaN(r)||!1===a.isInteger(r))throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,
f);return w[0].slice(A,r)}if(a.isImmutableArray(w[0])){A=w[0];r=a.toNumber(a.defaultUndefined(w[1],0));w=a.toNumber(a.defaultUndefined(w[2],A.length()));if(isNaN(r)||!1===a.isInteger(r))throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,f);if(isNaN(w)||!1===a.isInteger(w))throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,f);return A.toArray().slice(r,w)}throw new C.ArcadeExecutionError(d,C.ExecutionErrorCodes.InvalidParameter,f);})};g.functions.splice=
function(d,f){return g.standardFunction(d,f,(A,r,w)=>{A=[];for(r=0;r<w.length;r++)a.isArray(w[r])?A.push(...w[r]):a.isImmutableArray(w[r])?A.push(...w[r].toArray()):A.push(w[r]);return A})};g.functions.top=function(d,f){return g.standardFunction(d,f,(A,r,w)=>{a.pcCheck(w,2,2,d,f);if(a.isArray(w[0]))return a.toNumber(w[1])>=w[0].length?w[0].slice(0):w[0].slice(0,a.toNumber(w[1]));if(a.isImmutableArray(w[0]))return a.toNumber(w[1])>=w[0].length()?w[0].slice(0):w[0].slice(0,a.toNumber(w[1]));throw new C.ArcadeExecutionError(d,
C.ExecutionErrorCodes.InvalidParameter,f);})};g.functions.first=function(d,f){return g.standardFunction(d,f,(A,r,w)=>{a.pcCheck(w,1,1,d,f);return a.isArray(w[0])?0===w[0].length?null:w[0][0]:a.isImmutableArray(w[0])?0===w[0].length()?null:w[0].get(0):null})};"sync"===g.mode&&(g.functions.sort=function(d,f){return g.standardFunction(d,f,(A,r,w)=>z(d,f,w,!1))},g.functions.any=function(d,f){return g.standardFunction(d,f,(A,r,w)=>{a.pcCheck(w,2,2,d,f);A=w[1].createFunction(d);w=p(w[0],d,f);for(const e of w)if(w=
A(e),a.isBoolean(w)&&!0===w)return!0;return!1})},g.functions.all=function(d,f){return g.standardFunction(d,f,(A,r,w)=>{a.pcCheck(w,2,2,d,f);A=w[1].createFunction(d);w=p(w[0],d,f);for(const e of w)if(!0!==A(e))return!1;return!0})},g.functions.none=function(d,f){return g.standardFunction(d,f,(A,r,w)=>{a.pcCheck(w,2,2,d,f);A=w[1].createFunction(d);w=p(w[0],d,f);for(const e of w)if(!0===A(e))return!1;return!0})},g.functions.reduce=function(d,f){return g.standardFunction(d,f,(A,r,w)=>{a.pcCheck(w,2,3,
d,f);const e=w[1].createFunction(d);A=p(w[0],d,f);return 2===w.length?0===A.length?null:A.reduce((E,B)=>{E=e(E,B);return E=void 0!==E&&E!==a.voidOperation?E:null}):A.reduce((E,B)=>{E=e(E,B);return E=void 0!==E&&E!==a.voidOperation?E:null},w[2])})},g.functions.map=function(d,f){return g.standardFunction(d,f,(A,r,w)=>{a.pcCheck(w,2,2,d,f);A=w[1].createFunction(d);r=p(w[0],d,f);w=[];for(const e of r)r=A(e),void 0!==r&&r!==a.voidOperation?w.push(r):w.push(null);return w})},g.functions.filter=function(d,
f){return g.standardFunction(d,f,(A,r,w)=>{a.pcCheck(w,2,2,d,f);A=w[1].createFunction(d);w=p(w[0],d,f);r=[];for(const e of w)!0===A(e)&&r.push(e);return r})});"async"===g.mode&&(g.functions.sort=function(d,f){return g.standardFunctionAsync(d,f,(A,r,w)=>z(d,f,w,!0))},g.functions.any=function(d,f){return g.standardFunctionAsync(d,f,async(A,r,w)=>{a.pcCheck(w,2,2,d,f);A=w[1].createFunction(d);w=p(w[0],d,f);for(const e of w)if(w=await A(e),r=null,r=c.isPromiseLike(r)?await w:w,a.isBoolean(r)&&!0===r)return!0;
return!1})},g.functions.all=function(d,f){return g.standardFunctionAsync(d,f,async(A,r,w)=>{a.pcCheck(w,2,2,d,f);A=w[1].createFunction(d);w=p(w[0],d,f);for(const e of w)if(w=await A(e),r=null,r=c.isPromiseLike(r)?await w:w,!0!==r)return!1;return!0})},g.functions.none=function(d,f){return g.standardFunctionAsync(d,f,async(A,r,w)=>{a.pcCheck(w,2,2,d,f);A=w[1].createFunction(d);w=p(w[0],d,f);for(const e of w)if(w=await A(e),r=null,r=c.isPromiseLike(r)?await w:w,!0===r)return!1;return!0})},g.functions.filter=
function(d,f){return g.standardFunctionAsync(d,f,async(A,r,w)=>{a.pcCheck(w,2,2,d,f);A=w[1].createFunction(d);r=p(w[0],d,f);w=[];for(const e of r){r=await A(e);let E=null;E=c.isPromiseLike(E)?await r:r;!0===E&&w.push(e)}return w})},g.functions.reduce=function(d,f){return g.standardFunctionAsync(d,f,(A,r,w)=>{a.pcCheck(w,2,3,d,f);const e=w[1].createFunction(d);A=p(w[0],d,f);r=null;if(2<w.length)w=a.defaultUndefined(w[2],null),r=A.reduce(async(E,B)=>{E=await E;if(void 0===E||E===a.voidOperation)E=null;
return e(E,B)},Promise.resolve(w));else{if(0===A.length)return null;r=A.reduce(async(E,B,t)=>{if(1>=t)return e(E,B);E=await E;if(void 0===E||E===a.voidOperation)E=null;return e(E,B)})}return r.then(E=>void 0!==E&&E!==a.voidOperation?E:null)})},g.functions.map=function(d,f){return g.standardFunctionAsync(d,f,async(A,r,w)=>{a.pcCheck(w,2,2,d,f);A=w[1].createFunction(d);r=p(w[0],d,f);w=[];for(const e of r){r=await A(e);let E=null;E=c.isPromiseLike(E)?await r:r;void 0!==E&&E!==a.voidOperation?w.push(E):
w.push(null)}return w})})}const k=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:m},Symbol.toStringTag,{value:"Module"}));u.ArrayFunctions=k;u.registerFunctions=m})},"esri/arcade/functions/date":function(){define("exports ../ArcadeDate ../executionError ../../chunks/languageUtils ../../core/sql/DateOnly ../../core/sql/TimeOnly ../../intl/locale ../../chunks/datetime".split(" "),function(u,M,C,b,a,c,m,k){function g(z){return null===z?z:!1===z.isValid?null:z}function p(z,d){return""===
z||"default"===z.toLowerCase().trim()?b.defaultTimeZone(d):"z"===z||"Z"===z?"UTC":z}function F(z,d){return b.isDateOnly(z)?z.toArcadeDate():b.toDate(z,b.defaultTimeZone(d))}const l=[0,31,59,90,120,151,181,212,243,273,304,334],D=[0,31,60,91,121,152,182,213,244,274,305,335];u.registerFunctions=function(z,d){z.today=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,0,0,f,A);r=new Date;r.setHours(0,0,0,0);return M.ArcadeDate.dateJSAndZoneToArcadeDate(r,b.defaultTimeZone(f))})};z.time=function(f,A){return d(f,
A,(r,w,e)=>{b.pcCheck(e,0,4,f,A);switch(e.length){case 0:return r=M.ArcadeDate.nowToArcadeDate(b.defaultTimeZone(f)),new c.TimeOnly(r.hour,r.minute,r.second,r.millisecond);case 1:if(b.isTime(e[0]))return e[0].clone();if(b.isDate(e[0]))return new c.TimeOnly(e[0].hour,e[0].minute,e[0].second,e[0].millisecond);if(b.isDateOnly(e[0]))return new c.TimeOnly(0,0,0,0);if(b.isString(e[0]))return c.TimeOnly.fromString(e[0]);r=b.toNumber(e[0]);return!1===isNaN(r)?c.TimeOnly.fromMilliseconds(r):null;case 2:return b.isString(e[0])&&
b.isString(e[1])?c.TimeOnly.fromString(e[0],e[1]):c.TimeOnly.fromParts(b.toNumber(e[0]),b.toNumber(e[1]),0,0);case 3:return c.TimeOnly.fromParts(b.toNumber(e[0]),b.toNumber(e[1]),b.toNumber(e[2]),0);case 4:return c.TimeOnly.fromParts(b.toNumber(e[0]),b.toNumber(e[1]),b.toNumber(e[2]),b.toNumber(e[3]))}throw new C.ArcadeExecutionError(f,C.ExecutionErrorCodes.InvalidParameter,A);})};z.dateonly=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,0,3,f,A);if(3===e.length)return a.DateOnly.fromParts(b.toNumber(e[0]),
b.toNumber(e[1])+1,b.toNumber(e[2]));if(2===e.length)return r=b.toString(e[1]),""===r?null:"X"===r?a.DateOnly.fromSeconds(b.toNumber(e[0])):"x"===r?a.DateOnly.fromMilliseconds(b.toNumber(e[0])):a.DateOnly.fromString(b.toString(e[0]),r);if(1===e.length){if(b.isString(e[0])){if(""===e[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(e[0]))return a.DateOnly.fromString(e[0]+"-01-01")}if(b.isDateOnly(e[0]))return e[0].clone();if(b.isDate(e[0]))return a.DateOnly.fromParts(e[0].year,
e[0].monthJS+1,e[0].day);r=b.toNumber(e[0]);return!1===isNaN(r)?a.DateOnly.fromMilliseconds(r):b.isString(e[0])?a.DateOnly.fromString(e[0]):null}return 0===e.length?(e=M.ArcadeDate.nowToArcadeDate(b.defaultTimeZone(f)),!1===e.isValid?null:a.DateOnly.fromParts(e.year,e.monthJS+1,e.day)):null})};z.changetimezone=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,2,2,f,A);if(null===e[0])return null;if(b.isDateOnly(e[0]))throw new C.ArcadeExecutionError(f,C.ExecutionErrorCodes.CannotChangeTimeZoneDateOnly,
A);if(b.isDateOnly(e[0]))throw new C.ArcadeExecutionError(f,C.ExecutionErrorCodes.CannotChangeTimeZoneTime,A);r=b.toDate(e[0],b.defaultTimeZone(f));if(null===r)throw new C.ArcadeExecutionError(f,C.ExecutionErrorCodes.InvalidParameter,A);e=M.createDateTimeZone(p(b.toString(e[1]),f),!1);if(null===e)return null;e=M.ArcadeDate.arcadeDateAndZoneToArcadeDate(r,e);return!1===e.isValid?null:e})};z.timezone=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,1,2,f,A);if(b.isTime(e[0])||b.isDateOnly(e[0]))return"Unknown";
r=b.toDate(e[0],b.defaultTimeZone(f));if(null===r)return null;r=r.timeZone;return"system"===r?M.ArcadeDate.systemTimeZoneCanonicalName:"utc"===r.toLowerCase()?"UTC":"unknown"===r.toLowerCase()?"Unknown":r})};z.timezoneoffset=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,1,1,f,A);r=b.toDate(e[0],b.defaultTimeZone(f));return null===r?null:6E4*r.timeZoneOffset})};z.now=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,0,0,f,A);r=M.ArcadeDate.nowToArcadeDate(b.defaultTimeZone(f));return!1===r.isValid?
null:r})};z.timestamp=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,0,0,f,A);r=M.ArcadeDate.nowUTCToArcadeDate();return!1===r.isValid?null:r})};z.toutc=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,1,1,f,A);r=b.toDate(e[0],b.defaultTimeZone(f));return null===r?null:r.toUTC()})};z.tolocal=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,1,1,f,A);r=b.toDate(e[0],b.defaultTimeZone(f));return null===r?null:r.toLocal()})};z.day=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,1,1,f,A);r=F(e[0],b.defaultTimeZone(f));
return null===r?NaN:r.day})};z.month=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,1,1,f,A);r=F(e[0],b.defaultTimeZone(f));return null===r?NaN:r.monthJS})};z.year=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,1,1,f,A);r=F(e[0],b.defaultTimeZone(f));return null===r?NaN:r.year})};z.hour=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,1,1,f,A);if(b.isTime(e[0]))return e[0].hour;r=b.toDate(e[0],b.defaultTimeZone(f));return null===r?NaN:r.hour})};z.second=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,
1,1,f,A);if(b.isTime(e[0]))return e[0].second;r=b.toDate(e[0],b.defaultTimeZone(f));return null===r?NaN:r.second})};z.millisecond=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,1,1,f,A);if(b.isTime(e[0]))return e[0].millisecond;r=b.toDate(e[0],b.defaultTimeZone(f));return null===r?NaN:r.millisecond})};z.minute=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,1,1,f,A);if(b.isTime(e[0]))return e[0].minute;r=b.toDate(e[0],b.defaultTimeZone(f));return null===r?NaN:r.minute})};z.week=function(f,A){return d(f,
A,(r,w,e)=>{b.pcCheck(e,1,2,f,A);w=F(e[0],b.defaultTimeZone(f));if(null===w)return NaN;e=b.toNumber(b.defaultUndefined(e[1],0));if(0>e||6<e)throw new C.ArcadeExecutionError(f,C.ExecutionErrorCodes.InvalidParameter,A);r=w.dayOfWeekJS;var E=w.year;w=w.day+(0!==E%4||0===E%100&&0!==E%400?l:D)[w.monthJS]-1;E=Math.floor(w/7);return r-e+(0>r-e?7:0)<w-7*E?E+1:E})};z.weekday=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,1,1,f,A);r=F(e[0],b.defaultTimeZone(f));return null===r?NaN:r.dayOfWeekJS})};z.isoweekday=
function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,1,1,f,A);r=F(e[0],b.defaultTimeZone(f));return null===r?NaN:r.dayOfWeekISO})};z.isomonth=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,1,1,f,A);r=F(e[0],b.defaultTimeZone(f));return null===r?NaN:r.monthISO})};z.isoweek=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,1,1,f,A);r=F(e[0],b.defaultTimeZone(f));return null===r?NaN:r.weekISO})};z.isoyear=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,1,1,f,A);r=F(e[0],b.defaultTimeZone(f));return null===
r?NaN:r.yearISO})};z.date=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,0,8,f,A);if(3===e.length)return b.isDateOnly(e[0])&&b.isTime(e[1])&&b.isString(e[2])?(r=M.createDateTimeZone(p(b.toString(e[2])??"unknown",f),!1),null===r?null:g(M.ArcadeDate.fromParts(e[0].year,e[0].month,e[0].day,e[1].hour,e[1].minute,e[1].second,e[1].millisecond,r))):g(M.ArcadeDate.fromParts(b.toNumber(e[0]),b.toNumber(e[1])+1,b.toNumber(e[2]),0,0,0,0,b.defaultTimeZone(f)));if(4===e.length)return g(M.ArcadeDate.fromParts(b.toNumber(e[0]),
b.toNumber(e[1])+1,b.toNumber(e[2]),b.toNumber(e[3]),0,0,0,b.defaultTimeZone(f)));if(5===e.length)return g(M.ArcadeDate.fromParts(b.toNumber(e[0]),b.toNumber(e[1])+1,b.toNumber(e[2]),b.toNumber(e[3]),b.toNumber(e[4]),0,0,b.defaultTimeZone(f)));if(6===e.length)return g(M.ArcadeDate.fromParts(b.toNumber(e[0]),b.toNumber(e[1])+1,b.toNumber(e[2]),b.toNumber(e[3]),b.toNumber(e[4]),b.toNumber(e[5]),0,b.defaultTimeZone(f)));if(7===e.length)return g(M.ArcadeDate.fromParts(b.toNumber(e[0]),b.toNumber(e[1])+
1,b.toNumber(e[2]),b.toNumber(e[3]),b.toNumber(e[4]),b.toNumber(e[5]),b.toNumber(e[6]),b.defaultTimeZone(f)));if(8===e.length)return r=M.createDateTimeZone(p(b.toString(e[7])??"unknown",f),!1),null===r?null:g(M.ArcadeDate.fromParts(b.toNumber(e[0]),b.toNumber(e[1])+1,b.toNumber(e[2]),b.toNumber(e[3]),b.toNumber(e[4]),b.toNumber(e[5]),b.toNumber(e[6]),r));if(2===e.length){if(b.isDateOnly(e[0])&&b.isString(e[1]))return r=M.createDateTimeZone(p(b.toString(e[1])??"unknown",f),!1),null===r?null:g(M.ArcadeDate.fromParts(e[0].year,
e[0].month,e[0].day,0,0,0,0,r));if(b.isDateOnly(e[0])&&b.isTime(e[1]))return g(M.ArcadeDate.fromParts(e[0].year,e[0].month,e[0].day,e[1].hour,e[1].minute,e[1].second,e[1].millisecond,"unknown"));r=b.toString(e[1]);if(""===r)return null;r=b.standardiseDateFormat(r,!0);e="X"===r?k.DateTime.fromSeconds(b.toNumber(e[0])):"x"===r?k.DateTime.fromMillis(b.toNumber(e[0])):k.DateTime.fromFormat(b.toString(e[0]),r,{locale:m.getLocale(),numberingSystem:"latn"});return e.isValid?M.ArcadeDate.dateTimeToArcadeDate(e):
null}if(1===e.length){if(b.isDateOnly(e[0]))return g(M.ArcadeDate.fromParts(e[0].year,e[0].month,e[0].day,0,0,0,0,"unknown"));if(b.isString(e[0])){if(""===e[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(e[0]))return b.toDate(e[0]+"-01-01",b.defaultTimeZone(f))}r=b.toNumber(e[0]);return!1===isNaN(r)?(e=k.DateTime.fromMillis(r),e.isValid?M.ArcadeDate.dateTimeAndZoneToArcadeDate(e,b.defaultTimeZone(f)):null):b.toDate(e[0],b.defaultTimeZone(f))}return 0===
e.length?M.ArcadeDate.nowToArcadeDate(b.defaultTimeZone(f)):null})};z.datediff=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,2,4,f,A);if(b.isTime(e[0]))return b.isTime(e[1])?e[0].difference(e[1],b.toString(e[2])):NaN;if(b.isTime(e[1]))return NaN;if(b.isDateOnly(e[0]))return b.isDateOnly(e[1])?e[0].difference(e[1],b.toString(e[2])):NaN;if(b.isDateOnly(e[1]))return NaN;r=b.toDate(e[0],b.defaultTimeZone(f));w=b.toDate(e[1],b.defaultTimeZone(f));if(null===r||null===w)return NaN;let E=b.defaultUndefined(e[3],
"");""!==E&&null!==E?(E=p(b.toString(E),f),r=M.ArcadeDate.arcadeDateAndZoneToArcadeDate(r,E),w=M.ArcadeDate.arcadeDateAndZoneToArcadeDate(w,E)):r.timeZone!==w.timeZone&&(r.isUnknownTimeZone?r=M.ArcadeDate.arcadeDateAndZoneToArcadeDate(r,w.timeZone):w=M.ArcadeDate.arcadeDateAndZoneToArcadeDate(w,r.timeZone));switch(b.toString(e[2]).toLowerCase()){case "days":case "day":case "d":return r.diff(w,"days");case "months":case "month":return r.diff(w,"months");case "minutes":case "minute":case "m":return"M"===
e[2]?r.diff(w,"months"):r.diff(w,"minutes");case "seconds":case "second":case "s":return r.diff(w,"seconds");case "milliseconds":case "millisecond":case "ms":return r.diff(w);case "hours":case "hour":case "h":return r.diff(w,"hours");case "years":case "year":case "y":return r.diff(w,"years");default:return r.diff(w)}})};z.dateadd=function(f,A){return d(f,A,(r,w,e)=>{b.pcCheck(e,2,3,f,A);r=b.toNumber(e[1]);if(isNaN(r)||Infinity===r||-Infinity===r)return b.isTime(e[0])||b.isDateOnly(e[0])?e[0].clone():
b.toDate(e[0],b.defaultTimeZone(f));w="milliseconds";switch(b.toString(e[2]).toLowerCase()){case "days":case "day":case "d":w="days";r=b.isDateOnly(e[0])?r:b.absRound(r);break;case "months":case "month":w="months";r=b.isDateOnly(e[0])?r:b.absRound(r);break;case "minutes":case "minute":case "m":w="M"===e[2]?"months":"minutes";break;case "seconds":case "second":case "s":w="seconds";break;case "milliseconds":case "millisecond":case "ms":w="milliseconds";break;case "hours":case "hour":case "h":w="hours";
break;case "years":case "year":case "y":w="years"}if(b.isTime(e[0])||b.isDateOnly(e[0]))return e[0].plus(w,r);e=b.toDate(e[0],b.defaultTimeZone(f));return null===e?null:e.plus({[w]:r})})}};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/geometry":function(){define("exports ../Dictionary ../executionError ../Feature ../ImmutablePathArray ../ImmutablePointArray ../../chunks/languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/coordsUtils ../../geometry/support/jsonUtils".split(" "),
function(u,M,C,b,a,c,m,k,g,p,F,l,D,z,d,f){function A(e){return e&&"esri.arcade.Feature"===e.arcadeDeclaredClass}function r(e,E,B,t,v=1){E=E.toLowerCase();switch(E){case "hasz":return e=e.hasZ,void 0===e?!1:e;case "hasm":return e=e.hasM,void 0===e?!1:e;case "spatialreference":return E=e.spatialReference._arcadeCacheId,void 0===E&&(B=!0,Object.freeze&&Object.isFrozen(e.spatialReference)&&(B=!1),B&&(w++,E=e.spatialReference._arcadeCacheId=w)),e=new M({wkt:e.spatialReference.wkt,wkid:e.spatialReference.wkid}),
void 0!==E&&(e._arcadeCacheId="SPREF"+E.toString()),e}switch(e.type){case "extent":switch(E){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return e=e[E],void 0!==e?e:null;case "type":return"Extent"}break;case "polygon":switch(E){case "rings":return E=e.cache._arcadeCacheId,void 0===E&&(w++,E=w,e.cache._arcadeCacheId=E),new a(e.rings,e.spatialReference,!0===e.hasZ,!0===e.hasM,E);case "type":return"Polygon"}break;case "point":switch(E){case "x":case "y":case "z":case "m":return void 0!==
e[E]?e[E]:null;case "type":return"Point"}break;case "polyline":switch(E){case "paths":return E=e.cache._arcadeCacheId,void 0===E&&(w++,E=w,e.cache._arcadeCacheId=E),new a(e.paths,e.spatialReference,!0===e.hasZ,!0===e.hasM,E);case "type":return"Polyline"}break;case "multipoint":switch(E){case "points":return E=e.cache._arcadeCacheId,void 0===E&&(w++,E=w,e.cache._arcadeCacheId=E),new c(e.points,e.spatialReference,!0===e.hasZ,!0===e.hasM,E,1);case "type":return"Multipoint"}}if(1===v)throw new C.ArcadeExecutionError(B,
C.ExecutionErrorCodes.InvalidIdentifier,t);return 2===v?{keystate:"notfound"}:null}let w=0;u.geometryMember=r;u.registerFunctions=function(e,E){e.ringisclockwise=function(B,t){return E(B,t,(v,G,n)=>{m.pcCheck(n,1,1,B,t);v=[];if(null===n[0])return!1;if(m.isArray(n[0]))for(const q of n[0])if(q instanceof l)v.push(q.hasZ?q.hasM?[q.x,q.y,q.z,q.m]:[q.x,q.y,q.z]:[q.x,q.y]);else throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);else if(n[0]instanceof c)v=n[0]._elements;else if(m.isImmutableArray(n[0]))for(const q of n[0].toArray())if(q instanceof
l)v.push(q.hasZ?q.hasM?[q.x,q.y,q.z,q.m]:[q.x,q.y,q.z]:[q.x,q.y]);else throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);else throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);return 3>v.length?!1:d.isClockwise(v)})};e.polygon=function(B,t){return E(B,t,(v,G,n)=>{m.pcCheck(n,1,1,B,t);v=null;if(n[0]instanceof M){if(v=m.fixSpatialReference(b.parseGeometryFromDictionary(n[0],B.spatialReference),B.spatialReference),!1===v instanceof D)throw new C.ArcadeExecutionError(B,
C.ExecutionErrorCodes.InvalidParameter,t);}else n[0]instanceof D?v=f.fromJSON(n[0].toJSON()):((n=JSON.parse(n[0]))&&!n.spatialReference&&(n.spatialReference=B.spatialReference),v=m.fixSpatialReference(new D(n),B.spatialReference));if(null!==v&&!1===v.spatialReference.equals(B.spatialReference))throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.WrongSpatialReference,t);return m.fixNullGeometry(v)})};e.polyline=function(B,t){return E(B,t,(v,G,n)=>{m.pcCheck(n,1,1,B,t);v=null;if(n[0]instanceof
M){if(v=m.fixSpatialReference(b.parseGeometryFromDictionary(n[0],B.spatialReference),B.spatialReference),!1===v instanceof z)throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);}else n[0]instanceof z?v=f.fromJSON(n[0].toJSON()):((n=JSON.parse(n[0]))&&!n.spatialReference&&(n.spatialReference=B.spatialReference),v=m.fixSpatialReference(new z(n),B.spatialReference));if(null!==v&&!1===v.spatialReference.equals(B.spatialReference))throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.WrongSpatialReference,
t);return m.fixNullGeometry(v)})};e.point=function(B,t){return E(B,t,(v,G,n)=>{m.pcCheck(n,1,1,B,t);v=null;if(n[0]instanceof M){if(v=m.fixSpatialReference(b.parseGeometryFromDictionary(n[0],B.spatialReference),B.spatialReference),!1===v instanceof l)throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);}else n[0]instanceof l?v=f.fromJSON(n[0].toJSON()):((n=JSON.parse(n[0]))&&!n.spatialReference&&(n.spatialReference=B.spatialReference),v=m.fixSpatialReference(new l(n),B.spatialReference));
if(null!==v&&!1===v.spatialReference.equals(B.spatialReference))throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.WrongSpatialReference,t);return m.fixNullGeometry(v)})};e.multipoint=function(B,t){return E(B,t,(v,G,n)=>{m.pcCheck(n,1,1,B,t);v=null;if(n[0]instanceof M){if(v=m.fixSpatialReference(b.parseGeometryFromDictionary(n[0],B.spatialReference),B.spatialReference),!1===v instanceof F)throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);}else n[0]instanceof F?v=f.fromJSON(n[0].toJSON()):
((n=JSON.parse(n[0]))&&!n.spatialReference&&(n.spatialReference=B.spatialReference),v=m.fixSpatialReference(new F(n),B.spatialReference));if(null!==v&&!1===v.spatialReference.equals(B.spatialReference))throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.WrongSpatialReference,t);return m.fixNullGeometry(v)})};e.extent=function(B,t){return E(B,t,(v,G,n)=>{n=m.autoCastFeatureToGeometry(n);m.pcCheck(n,1,1,B,t);v=null;n[0]instanceof M?v=m.fixSpatialReference(b.parseGeometryFromDictionary(n[0],B.spatialReference),
B.spatialReference):n[0]instanceof l?(v={xmin:n[0].x,ymin:n[0].y,xmax:n[0].x,ymax:n[0].y,spatialReference:n[0].spatialReference.toJSON()},n=n[0],n.hasZ?(v.zmin=n.z,v.zmax=n.z):n.hasM&&(v.mmin=n.m,v.mmax=n.m),v=f.fromJSON(v)):n[0]instanceof D?v=f.fromJSON(n[0].extent?.toJSON()):n[0]instanceof z?v=f.fromJSON(n[0].extent?.toJSON()):n[0]instanceof F?v=f.fromJSON(n[0].extent?.toJSON()):n[0]instanceof g?v=f.fromJSON(n[0].toJSON()):((n=JSON.parse(n[0]))&&!n.spatialReference&&(n.spatialReference=B.spatialReference),
v=m.fixSpatialReference(new g(n),B.spatialReference));if(null!==v&&!1===v.spatialReference.equals(B.spatialReference))throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.WrongSpatialReference,t);return m.fixNullGeometry(v)})};e.geometry=function(B,t){return E(B,t,(v,G,n)=>{m.pcCheck(n,1,1,B,t);v=null;if(null===n[0])return null;A(n[0])?v=m.fixSpatialReference(n[0].geometry(),B.spatialReference):n[0]instanceof M?v=m.fixSpatialReference(b.parseGeometryFromDictionary(n[0],B.spatialReference),B.spatialReference):
((n=JSON.parse(n[0]))&&!n.spatialReference&&(n.spatialReference=B.spatialReference),v=m.fixSpatialReference(f.fromJSON(n),B.spatialReference));if(null!==v&&!1===v.spatialReference.equals(B.spatialReference))throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.WrongSpatialReference,t);return m.fixNullGeometry(v)})};e.setgeometry=function(B,t){return E(B,t,(v,G,n)=>{m.pcCheck(n,2,2,B,t);if(A(n[0])){if(!0===n[0].immutable)throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.Immutable,t);if(n[1]instanceof
p||null===n[1])n[0]._geometry=n[1];else throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);}else throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);return m.voidOperation})};e.feature=function(B,t){return E(B,t,(v,G,n)=>{if(0===n.length)throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.WrongNumberOfParameters,t);v=null;if(1===n.length)if(m.isString(n[0]))v=b.fromJson(JSON.parse(n[0]),B.timeZone);else if(A(n[0]))v=b.createFromArcadeFeature(n[0]);
else if(n[0]instanceof p)v=b.createFromGraphicLikeObject(n[0],null,null,B.timeZone);else if(n[0]instanceof M)v=n[0].hasField("geometry")?n[0].field("geometry"):null,n=n[0].hasField("attributes")?n[0].field("attributes"):null,null!==v&&v instanceof M&&(v=b.parseGeometryFromDictionary(v,B.spatialReference)),null!==n&&(n=b.parseAttributesFromDictionary(n)),v=b.createFromGraphicLikeObject(v,n,null,B.timeZone);else throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);else if(2===
n.length){G=v=null;if(null!==n[0])if(n[0]instanceof p)v=n[0];else if(v instanceof M)v=b.parseGeometryFromDictionary(n[0],B.spatialReference);else throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);if(null!==n[1])if(n[1]instanceof M)G=b.parseAttributesFromDictionary(n[1]);else throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);v=b.createFromGraphicLikeObject(v,G,null,B.timeZone)}else{v=null;G={};if(null!==n[0])if(n[0]instanceof p)v=n[0];else if(v instanceof
M)v=b.parseGeometryFromDictionary(n[0],B.spatialReference);else throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);for(let q=1;q<n.length;q+=2){const W=m.toString(n[q]),ca=n[q+1];if(null===ca||void 0===ca||m.isString(ca)||isNaN(ca)||m.isDate(ca)||m.isNumber(ca)||m.isTime(ca)||m.isDateOnly(ca)||m.isBoolean(ca)){if(m.isFunctionParameter(ca)||!1===m.isSimpleType(ca))throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);G[W]=ca===m.voidOperation?null:ca}else throw new C.ArcadeExecutionError(B,
C.ExecutionErrorCodes.InvalidParameter,t);}v=b.createFromGraphicLikeObject(v,G,null,B.timeZone)}v._geometry=m.fixSpatialReference(v.geometry(),B.spatialReference);v.immutable=!1;return v})};e.dictionary=function(B,t){return E(B,t,(v,G,n)=>{if(0===n.length||1===n.length&&null===n[0])return n=new M,n.immutable=!1,n;if(1===n.length&&m.isString(n[0]))try{var q=JSON.parse(n[0]),W=M.convertObjectToArcadeDictionary(q,m.defaultTimeZone(B),!1);W.immutable=!1;return W}catch(ca){throw new C.ArcadeExecutionError(B,
C.ExecutionErrorCodes.InvalidParameter,t);}if(1===n.length&&n[0]instanceof p)try{const ca=n[0].toJSON();ca.hasZ=!0===n[0].hasZ;ca.hasM=!0===n[0].hasM;const qa=M.convertObjectToArcadeDictionary(ca,m.defaultTimeZone(B),!1);qa.immutable=!1;return qa}catch(ca){throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);}if(1===n.length&&m.isFeature(n[0]))try{const ca=new M;ca.immutable=!1;ca.setField("geometry",n[0].geometry());const qa=new M;qa.immutable=!1;ca.setField("attributes",
qa);for(const ya of n[0].keys())qa.setField(ya,n[0].field(ya));return ca}catch(ca){throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);}if(1===n.length&&n[0]instanceof M)try{const ca=new M;ca.immutable=!1;for(const qa of n[0].keys())ca.setField(qa,n[0].field(qa));return ca}catch(ca){throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);}if(2===n.length&&n[0]instanceof M&&m.isBoolean(n[1]))try{if(!0!==n[1]){const ca=new M;ca.immutable=!1;for(const qa of n[0].keys())ca.setField(qa,
n[0].field(qa));return ca}return n[0].deepClone()}catch(ca){throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);}if(0!==n.length%2)throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.WrongNumberOfParameters,t);v={};for(G=0;G<n.length;G+=2)if(q=m.toString(n[G]),W=n[G+1],null===W||void 0===W||m.isString(W)||isNaN(W)||m.isDate(W)||m.isNumber(W)||m.isBoolean(W)||m.isDateOnly(W)||m.isTime(W)||m.isArray(W)||m.isImmutableArray(W)){if(m.isFunctionParameter(W))throw new C.ArcadeExecutionError(B,
C.ExecutionErrorCodes.InvalidParameter,t);v[q]=W===m.voidOperation?null:W}else throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);n=new M(v);n.immutable=!1;return n})};e.haskey=function(B,t){return E(B,t,(v,G,n)=>{m.pcCheck(n,2,2,B,t);v=m.toString(n[1]);if(A(n[0])||n[0]instanceof M)return n[0].hasField(v);if(n[0]instanceof p)return(n=r(n[0],v,null,null,2))&&"notfound"===n.keystate?!1:!0;throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);})};e.hasvalue=
function(B,t){return E(B,t,(v,G,n)=>{m.pcCheck(n,2,2,B,t);if(m.isArray(n[1])||m.isImmutableArray(n[1])){G=n[1];v=[];if(m.isImmutableArray(G))v=G.toArray();else if(m.isArray(G))v=G;else throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);n=n[0];if(null===n)return!1;for(var q of v)if(m.isFeature(n)){if(!1===m.isString(q)||!n.hasField(q))return!1;n=n.field(q);if(null===n)return!1}else if(n instanceof M){if(!1===m.isString(q)||!n.hasField(q))return!1;n=n.field(q);if(null===n)return!1}else if(n instanceof
p){if(!1===m.isString(q))return!1;n=r(n,q,null,null,0);if(null===n)return!1}else if(m.isArray(n)){if(!1===m.isNumber(q))return!1;n=n[q];if(null===n||void 0===n)return!1}else if(m.isImmutableArray(n)){if(!1===m.isNumber(q))return!1;n=n.get(q);if(null===n||void 0===n)return!1}else return!1;return!0}if(null===n[0]||null===n[1])return!1;q=m.toString(n[1]);return m.isFeature(n[0])||n[0]instanceof M?n[0].hasField(q)&&null!==n[0].field(q)?!0:!1:n[0]instanceof p?null===r(n[0],q,null,null,0)?!1:!0:!1})};e.indexof=
function(B,t){return E(B,t,(v,G,n)=>{m.pcCheck(n,2,2,B,t);v=n[1];if(m.isArray(n[0])){for(G=0;G<n[0].length;G++)if(m.equalityTest(v,n[0][G]))return G;return-1}if(m.isImmutableArray(n[0])){G=n[0].length();for(let q=0;q<G;q++)if(m.equalityTest(v,n[0].get(q)))return q;return-1}throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);})};e.angle=function(B,t){return E(B,t,(v,G,n)=>{n=m.autoCastFeatureToGeometry(n);m.pcCheck(n,2,3,B,t);if(!(n[0]instanceof l))throw new C.ArcadeExecutionError(B,
C.ExecutionErrorCodes.InvalidParameter,t);if(!(n[1]instanceof l))throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);if(2<n.length&&!(n[2]instanceof l))throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);return 2===n.length?k.angle2D(n[0],n[1]):k.angleBetween2D(n[0],n[1],n[2])})};e.bearing=function(B,t){return E(B,t,(v,G,n)=>{n=m.autoCastFeatureToGeometry(n);m.pcCheck(n,2,3,B,t);if(!(n[0]instanceof l))throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,
t);if(!(n[1]instanceof l))throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);if(2<n.length&&!(n[2]instanceof l))throw new C.ArcadeExecutionError(B,C.ExecutionErrorCodes.InvalidParameter,t);return 2===n.length?k.bearing2D(n[0],n[1]):k.bearingBetween2D(n[0],n[1],n[2])})};e.isselfintersecting=function(B,t){return E(B,t,(v,G,n)=>{n=m.autoCastFeatureToGeometry(n);m.pcCheck(n,1,1,B,t);v=n[0];if(v instanceof D)return v.isSelfIntersecting;if(v instanceof z)return v=v.paths,k.pathsSelfIntersecting(v);
if(v instanceof F)for(G=v.points,n=0;n<G.length;n++)for(let q=0;q<G.length;q++)if(q!==n){let W=!0;for(let ca=0;ca<G[n].length;ca++)if(G[n][ca]!==G[q][ca]){W=!1;break}if(!0===W)return!0}return m.isArray(v)||m.isImmutableArray(v)?(v=m.autoCastArrayOfPointsToPolyline(v,B.spatialReference),null!==v&&(v=v.paths),k.pathsSelfIntersecting(v)):!1})}};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/centroid":function(){define(["exports","../../core/mathUtils","../../geometry/Point",
"../../geometry/support/intersectsBase"],function(u,M,C,b){function a(D,z,d){const f={x:0,y:0};z&&(f.z=0);d&&(f.m=0);let A=0;var r=D[0];for(let t=0;t<D.length;t++){const v=D[t];a:if(v.length!==r.length)var w=!1;else{for(w=0;w<v.length;w++)if(v[w]!==r[w]){w=!1;break a}w=!0}if(!1===w){w=c(r,v,z);var e=v,E=z,B=d;const G={x:(r[0]+e[0])/2,y:(r[1]+e[1])/2};E&&(G.z=(r[2]+e[2])/2);E&&B?G.m=(r[3]+e[3])/2:B&&(G.m=(r[2]+e[2])/2);r=G;r.x*=w;r.y*=w;f.x+=r.x;f.y+=r.y;z&&(r.z*=w,f.z+=r.z);d&&(r.m*=w,f.m+=r.m);A+=
w;r=v}}0<A?(f.x/=A,f.y/=A,z&&(f.z/=A),d&&(f.m/=A)):(f.x=D[0][0],f.y=D[0][1],z&&(f.z=D[0][2]),d&&z?f.m=D[0][3]:d&&(f.m=D[0][2]));return f}function c(D,z,d){const f=z[0]-D[0];D=z[1]-D[1];return d?(z=z[2]-z[2],Math.sqrt(f*f+D*D+z*z)):Math.sqrt(f*f+D*D)}function m(D,z,d=0){for(;D<d;)D+=z;for(d+=z;D>=d;)D-=z;return D}function k(D,z){return Math.atan2(z.y-D.y,z.x-D.x)}function g(D,z,d){var f=D.x-z.x;D=D.y-z.y;var A=d.x-z.x;z=d.y-z.y;return Math.atan2(f*z-A*D,f*A+D*z)}const p=[];for(const D of[[9002,56146130,
6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const z=D[0];for(let d=1;d<D.length;d++)p[D[d]]=z}const F=[];F[9002]=.3048;F[9003]=.3048006096012192;F[9095]=.3048007491;const l=[0,0];u.angle2D=function(D,z){return m(k(D,z),2*Math.PI)*(180/Math.PI)};u.angleBetween2D=function(D,z,d){return M.rad2deg(m(g(D,z,d),2*Math.PI))};u.angleBetweenRad=g;u.angleRad=k;u.bearing2D=function(D,z){return m(Math.PI/2-k(D,z),2*Math.PI)*(180/Math.PI)};u.bearingBetween2D=function(D,z,d){return M.rad2deg(m(-1*
g(D,z,d),2*Math.PI))};u.centroidMultiPoint=function(D){if(0===D.points.length)return null;var z=0;let d=0,f=0,A=0;for(let r=0;r<D.points.length;r++){const w=D.getPoint(r);!0===w.hasZ&&(f+=w.z);!0===w.hasM&&(A+=w.m);z+=w.x;d+=w.y;A+=w.m}z={x:z/D.points.length,y:d/D.points.length,spatialReference:null};z.spatialReference=D.spatialReference.toJSON();!0===D.hasZ&&(z.z=f/D.points.length);!0===D.hasM&&(z.m=A/D.points.length);return new C(z)};u.centroidPolyline=function(D){const z={x:0,y:0,spatialReference:D.spatialReference.toJSON()},
d={x:0,y:0,spatialReference:D.spatialReference.toJSON()};let f=0,A=0;for(let e=0;e<D.paths.length;e++)if(0!==D.paths[e].length){a:{var r=D.paths[e];var w=!0===D.hasZ;if(1>=r.length){r=0;break a}let E=0;for(let B=1;B<r.length;B++)E+=c(r[B-1],r[B],w);r=E}0===r?(r=a(D.paths[e],!0===D.hasZ,!0===D.hasM),z.x+=r.x,z.y+=r.y,!0===D.hasZ&&(z.z+=r.z),!0===D.hasM&&(z.m+=r.m),++f):(w=a(D.paths[e],!0===D.hasZ,!0===D.hasM),d.x+=w.x*r,d.y+=w.y*r,!0===D.hasZ&&(d.z+=w.z*r),!0===D.hasM&&(d.m+=w.m*r),A+=r)}return 0<
A?(d.x/=A,d.y/=A,!0===D.hasZ&&(d.z/=A),!0===D.hasM&&(d.m/=A),new C(d)):0<f?(z.x/=f,z.y/=f,!0===D.hasZ&&(d.z/=f),!0===D.hasM&&(z.m/=f),new C(z)):null};u.closestPointOnLineSegment=function(D,z,d){var f=0;f=d[0]-z[0];const A=d[1]-z[1],r=f*f+A*A;0===r?f=.5:(f=((D[0]-z[0])*f+(D[1]-z[1])*A)/r,0>f?f=0:1<f&&(f=1));return.5>=f?[z[0]+(d[0]-z[0])*f,z[1]+(d[1]-z[1])*f]:[d[0]-(d[0]-z[0])*(1-f),d[1]-(d[1]-z[1])*(1-f)]};u.closestPointOnLineSegmentWithZ=function(D,z,d){var f=[d[0]-z[0],d[1]-z[1],d[2]-z[2]];D=[D[0]-
z[0],D[1]-z[1],D[2]-z[2]];f=Math.max(0,Math.min(1,(f[0]*D[0]+f[1]*D[1]+f[2]*D[2])/(f[0]*f[0]+f[1]*f[1]+f[2]*f[2])));return[z[0]+(d[0]-z[0])*f,z[1]+(d[1]-z[1])*f,z[2]+(d[2]-z[2])*f]};u.getMetersPerVerticalUnitForSR=function(D){return D.vcsWkid&&void 0!==p[D.vcsWkid]?F[p[D.vcsWkid]]:D.latestVcsWkid&&void 0!==p[D.latestVcsWkid]?F[p[D.latestVcsWkid]]:1};u.pathsSelfIntersecting=function(D){for(let E=0;E<D.length;E++){const B=D[E];for(var z=0;z<B.length-1;z++){var d=B[z],f=B[z+1];for(var A=E+1;A<D.length;A++)for(var r=
0;r<D[A].length-1;r++){var w=D[A][r],e=D[A][r+1];if(b.segmentIntersects(d,f,w,e,l)&&!(l[0]===d[0]&&l[1]===d[1]||l[0]===w[0]&&l[1]===w[1]||l[0]===f[0]&&l[1]===f[1]||l[0]===e[0]&&l[1]===e[1]))return!0}}z=B.length;if(!(3>z))for(d=0;d<=z-2;d++)for(f=B[d],A=B[d+1],r=d+2;r<=z-2;r++)if(w=B[r],e=B[r+1],b.segmentIntersects(f,A,w,e,l)&&!(l[0]===f[0]&&l[1]===f[1]||l[0]===w[0]&&l[1]===w[1]||l[0]===A[0]&&l[1]===A[1]||l[0]===e[0]&&l[1]===e[1]))return!0}return!1};u.segmentLength=c;u.segmentLength3d=function(D,z,
d){return Math.sqrt((D[0]-z[0])**2+(D[1]-z[1])**2+(void 0!==D[2]&&void 0!==z[2]?(D[2]*d-z[2]*d)**2:0))};u.segmentLength3dSqr=function(D,z,d){return Math.sqrt((D[0]-z[0])**2+(D[1]-z[1])**2+(void 0!==D[2]&&void 0!==z[2]?(D[2]*d-z[2]*d)**2:0))};u.segmentLengthSqr=function(D,z,d){const f=z[0]-D[0];D=z[1]-D[1];return d?(z=z[2]-z[2],f*f+D*D+z*z):f*f+D*D};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/geomsync":function(){define("exports ../../kernel ../Dictionary ../executionError ../kernel ../../chunks/languageUtils ./centroid ./measures ../../core/unitUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(u,M,C,b,a,c,m,k,g,p,F,l,D,z,d,f){function A(e){return 0===M.version.indexOf("4.")?z.fromExtent(e):new z({spatialReference:e.spatialReference,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]})}function r(e,E){if("polygon"!==e.type&&"polyline"!==e.type&&"extent"!==e.type)return 0;var B=1;if(e.spatialReference.vcsWkid||e.spatialReference.latestVcsWkid){B=m.getMetersPerVerticalUnitForSR(e.spatialReference);var t=g.getMetersPerUnitForSR(e.spatialReference);
B/=t}t=0;if("polyline"===e.type)for(var v of e.paths)for(var G=1;G<v.length;G++)t+=m.segmentLength3d(v[G],v[G-1],B);else if("polygon"===e.type)for(G of e.rings){for(v=1;v<G.length;v++)t+=m.segmentLength3d(G[v],G[v-1],B);if(G[0][0]!==G[G.length-1][0]||G[0][1]!==G[G.length-1][1]||void 0!==G[0][2]&&G[0][2]!==G[G.length-1][2])t+=m.segmentLength3d(G[0],G[G.length-1],B)}else"extent"===e.type&&(t+=2*m.segmentLength3d([e.xmin,e.ymin,0],[e.xmax,e.ymin,0],B),t+=2*m.segmentLength3d([e.xmin,e.ymin,0],[e.xmin,
e.ymax,0],B),t=2*t+4*Math.abs(c.defaultUndefined(e.zmax,0)*B-c.defaultUndefined(e.zmin,0)*B));e=new d({hasZ:!1,hasM:!1,spatialReference:e.spatialReference,paths:[[0,0],[0,t]]});return w.planarLength(e,E)}let w=null;u.registerFunctions=function(e,E){function B(t,v,G){c.pcCheck(G,2,2,t,v);if(!(G[0]instanceof F&&G[1]instanceof F||G[0]instanceof F&&null===G[1]||G[1]instanceof F&&null===G[0]||null===G[0]&&null===G[1]))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);}e.disjoint=
function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);B(t,v,q);return null===q[0]||null===q[1]?!0:w.disjoint(q[0],q[1])})};e.intersects=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);B(t,v,q);return null===q[0]||null===q[1]?!1:w.intersects(q[0],q[1])})};e.touches=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);B(t,v,q);return null===q[0]||null===q[1]?!1:w.touches(q[0],q[1])})};e.crosses=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);
B(t,v,q);return null===q[0]||null===q[1]?!1:w.crosses(q[0],q[1])})};e.within=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);B(t,v,q);return null===q[0]||null===q[1]?!1:w.within(q[0],q[1])})};e.contains=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);B(t,v,q);return null===q[0]||null===q[1]?!1:w.contains(q[0],q[1])})};e.overlaps=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);B(t,v,q);return null===q[0]||null===q[1]?!1:w.overlaps(q[0],
q[1])})};e.equals=function(t,v){return E(t,v,(G,n,q)=>{c.pcCheck(q,2,2,t,v);return q[0]===q[1]?!0:q[0]instanceof F&&q[1]instanceof F?w.equals(q[0],q[1]):c.isDate(q[0])&&c.isDate(q[1])||c.isTime(q[0])&&c.isTime(q[1])||c.isDateOnly(q[0])&&c.isDateOnly(q[1])?q[0].equals(q[1]):!1})};e.relate=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,3,3,t,v);if(q[0]instanceof F&&q[1]instanceof F)return w.relate(q[0],q[1],c.toString(q[2]));if(q[0]instanceof F&&null===q[1]||q[1]instanceof
F&&null===q[0]||null===q[0]&&null===q[1])return!1;throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);})};e.intersection=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);B(t,v,q);return null===q[0]||null===q[1]?null:w.intersect(q[0],q[1])})};e.union=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);G=[];if(0===q.length)throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.WrongNumberOfParameters,v);if(1===q.length)if(c.isArray(q[0]))for(q=
c.autoCastFeatureToGeometry(q[0]),n=0;n<q.length;n++){if(null!==q[n]){if(!(q[n]instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);G.push(q[n])}}else if(c.isImmutableArray(q[0]))for(q=c.autoCastFeatureToGeometry(q[0].toArray()),n=0;n<q.length;n++){if(null!==q[n]){if(!(q[n]instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);G.push(q[n])}}else{if(q[0]instanceof F)return c.fixSpatialReference(a.cloneGeometry(q[0]),t.spatialReference);
if(null===q[0])return null;throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);}else for(n=0;n<q.length;n++)if(null!==q[n]){if(!(q[n]instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);G.push(q[n])}return 0===G.length?null:w.union(G)})};e.difference=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);B(t,v,q);return null!==q[0]&&null===q[1]?a.cloneGeometry(q[0]):null===q[0]?null:w.difference(q[0],q[1])})};e.symmetricdifference=
function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);B(t,v,q);return null===q[0]&&null===q[1]?null:null===q[0]?a.cloneGeometry(q[1]):null===q[1]?a.cloneGeometry(q[0]):w.symmetricDifference(q[0],q[1])})};e.clip=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,2,2,t,v);if(!(q[1]instanceof p)&&null!==q[1])throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);if(null===q[0])return null;if(!(q[0]instanceof F))throw new b.ArcadeExecutionError(t,
b.ExecutionErrorCodes.InvalidParameter,v);return null===q[1]?null:w.clip(q[0],q[1])})};e.cut=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,2,2,t,v);if(!(q[1]instanceof d)&&null!==q[1])throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);if(null===q[0])return[];if(!(q[0]instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);return null===q[1]?[a.cloneGeometry(q[0])]:w.cut(q[0],q[1])})};e.area=function(t,
v){return E(t,v,(G,n,q)=>{c.pcCheck(q,1,2,t,v);q=c.autoCastFeatureToGeometry(q);if(null===q[0])return 0;if(c.isArray(q[0])||c.isImmutableArray(q[0]))return G=c.autoCastArrayOfPointsToPolygon(q[0],t.spatialReference),null===G?0:w.planarArea(G,a.convertSquareUnitsToCode(c.defaultUndefined(q[1],-1)));if(!(q[0]instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);return w.planarArea(q[0],a.convertSquareUnitsToCode(c.defaultUndefined(q[1],-1)))})};e.areageodetic=function(t,
v){return E(t,v,(G,n,q)=>{c.pcCheck(q,1,2,t,v);q=c.autoCastFeatureToGeometry(q);if(null===q[0])return 0;if(c.isArray(q[0])||c.isImmutableArray(q[0]))return G=c.autoCastArrayOfPointsToPolygon(q[0],t.spatialReference),null===G?0:w.geodesicArea(G,a.convertSquareUnitsToCode(c.defaultUndefined(q[1],-1)));if(!(q[0]instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);return w.geodesicArea(q[0],a.convertSquareUnitsToCode(c.defaultUndefined(q[1],-1)))})};e.length=function(t,
v){return E(t,v,(G,n,q)=>{c.pcCheck(q,1,2,t,v);q=c.autoCastFeatureToGeometry(q);if(null===q[0])return 0;if(c.isArray(q[0])||c.isImmutableArray(q[0]))return G=c.autoCastArrayOfPointsToPolyline(q[0],t.spatialReference),null===G?0:w.planarLength(G,a.convertLinearUnitsToCode(c.defaultUndefined(q[1],-1)));if(!(q[0]instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);return w.planarLength(q[0],a.convertLinearUnitsToCode(c.defaultUndefined(q[1],-1)))})};e.length3d=function(t,
v){return E(t,v,(G,n,q)=>{c.pcCheck(q,1,2,t,v);q=c.autoCastFeatureToGeometry(q);if(null===q[0])return 0;if(c.isArray(q[0])||c.isImmutableArray(q[0]))return G=c.autoCastArrayOfPointsToPolyline(q[0],t.spatialReference),null===G?0:!0===G.hasZ?r(G,a.convertLinearUnitsToCode(c.defaultUndefined(q[1],-1))):w.planarLength(G,a.convertLinearUnitsToCode(c.defaultUndefined(q[1],-1)));if(!(q[0]instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);return!0===q[0].hasZ?r(q[0],
a.convertLinearUnitsToCode(c.defaultUndefined(q[1],-1))):w.planarLength(q[0],a.convertLinearUnitsToCode(c.defaultUndefined(q[1],-1)))})};e.lengthgeodetic=function(t,v){return E(t,v,(G,n,q)=>{c.pcCheck(q,1,2,t,v);q=c.autoCastFeatureToGeometry(q);if(null===q[0])return 0;if(c.isArray(q[0])||c.isImmutableArray(q[0]))return G=c.autoCastArrayOfPointsToPolyline(q[0],t.spatialReference),null===G?0:w.geodesicLength(G,a.convertLinearUnitsToCode(c.defaultUndefined(q[1],-1)));if(!(q[0]instanceof F))throw new b.ArcadeExecutionError(t,
b.ExecutionErrorCodes.InvalidParameter,v);return w.geodesicLength(q[0],a.convertLinearUnitsToCode(c.defaultUndefined(q[1],-1)))})};e.distance=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,2,3,t,v);G=q[0];if(c.isArray(q[0])||c.isImmutableArray(q[0]))G=c.autoCastArrayOfPointsToMultiPoint(q[0],t.spatialReference);n=q[1];if(c.isArray(q[1])||c.isImmutableArray(q[1]))n=c.autoCastArrayOfPointsToMultiPoint(q[1],t.spatialReference);if(!(G instanceof F))throw new b.ArcadeExecutionError(t,
b.ExecutionErrorCodes.InvalidParameter,v);if(!(n instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);return w.distance(G,n,a.convertLinearUnitsToCode(c.defaultUndefined(q[2],-1)))})};e.distancegeodetic=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,2,3,t,v);G=q[0];n=q[1];if(!(G instanceof D))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);if(!(n instanceof D))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,
v);const W=new d({paths:[],spatialReference:G.spatialReference});W.addPath([G,n]);return w.geodesicLength(W,a.convertLinearUnitsToCode(c.defaultUndefined(q[2],-1)))})};e.densify=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,2,3,t,v);if(null===q[0])return null;if(!(q[0]instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);G=c.toNumber(q[1]);if(isNaN(G))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,
v);if(0>=G)throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);return q[0]instanceof z||q[0]instanceof d?w.densify(q[0],G,a.convertLinearUnitsToCode(c.defaultUndefined(q[2],-1))):q[0]instanceof p?w.densify(A(q[0]),G,a.convertLinearUnitsToCode(c.defaultUndefined(q[2],-1))):q[0]})};e.densifygeodetic=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,2,3,t,v);if(null===q[0])return null;if(!(q[0]instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,
v);G=c.toNumber(q[1]);if(isNaN(G))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);if(0>=G)throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);return q[0]instanceof z||q[0]instanceof d?w.geodesicDensify(q[0],G,a.convertLinearUnitsToCode(c.defaultUndefined(q[2],-1))):q[0]instanceof p?w.geodesicDensify(A(q[0]),G,a.convertLinearUnitsToCode(c.defaultUndefined(q[2],-1))):q[0]})};e.generalize=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);
c.pcCheck(q,2,4,t,v);if(null===q[0])return null;if(!(q[0]instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);G=c.toNumber(q[1]);if(isNaN(G))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);return w.generalize(q[0],G,c.toBoolean(c.defaultUndefined(q[2],!0)),a.convertLinearUnitsToCode(c.defaultUndefined(q[3],-1)))})};e.buffer=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,2,3,t,v);if(null===q[0])return null;
if(!(q[0]instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);G=c.toNumber(q[1]);if(isNaN(G))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);return 0===G?a.cloneGeometry(q[0]):w.buffer(q[0],G,a.convertLinearUnitsToCode(c.defaultUndefined(q[2],-1)))})};e.buffergeodetic=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,2,3,t,v);if(null===q[0])return null;if(!(q[0]instanceof F))throw new b.ArcadeExecutionError(t,
b.ExecutionErrorCodes.InvalidParameter,v);G=c.toNumber(q[1]);if(isNaN(G))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);return 0===G?a.cloneGeometry(q[0]):w.geodesicBuffer(q[0],G,a.convertLinearUnitsToCode(c.defaultUndefined(q[2],-1)))})};e.offset=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,2,6,t,v);if(null===q[0])return null;if(!(q[0]instanceof z||q[0]instanceof d))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,
v);G=c.toNumber(q[1]);if(isNaN(G))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);n=c.toNumber(c.defaultUndefined(q[4],10));if(isNaN(n))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);const W=c.toNumber(c.defaultUndefined(q[5],0));if(isNaN(W))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);return w.offset(q[0],G,a.convertLinearUnitsToCode(c.defaultUndefined(q[2],-1)),c.toString(c.defaultUndefined(q[3],"round")).toLowerCase(),
n,W)})};e.rotate=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,2,3,t,v);G=q[0];if(null===G)return null;if(!(G instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);G instanceof p&&(G=z.fromExtent(G));n=c.toNumber(q[1]);if(isNaN(n))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);q=c.defaultUndefined(q[2],null);if(null===q)return w.rotate(G,n);if(q instanceof D)return w.rotate(G,n,q);throw new b.ArcadeExecutionError(t,
b.ExecutionErrorCodes.InvalidParameter,v);})};e.centroid=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,1,1,t,v);if(null===q[0])return null;G=q[0];if(c.isArray(q[0])||c.isImmutableArray(q[0]))G=c.autoCastArrayOfPointsToMultiPoint(q[0],t.spatialReference);if(null===G)return null;if(!(G instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);return G instanceof D?c.fixSpatialReference(a.cloneGeometry(q[0]),t.spatialReference):G instanceof
z?G.centroid:G instanceof d?m.centroidPolyline(G):G instanceof l?m.centroidMultiPoint(G):G instanceof p?G.center:null})};e.measuretocoordinate=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,2,2,t,v);if(null===q[0])return null;G=q[0];if(c.isArray(q[0])||c.isImmutableArray(q[0]))G=c.autoCastArrayOfPointsToPolyline(q[0],t.spatialReference);if(null===G)return null;if(!(G instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);if(!(G instanceof
d))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);if(c.isNumber(!1===q[1]))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);return(q=k.measureToCoordinate(G,q[1]))?C.convertObjectToArcadeDictionary(q,c.defaultTimeZone(t),!1,!0):null})};e.pointtocoordinate=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,2,2,t,v);if(null===q[0])return null;G=q[0];if(c.isArray(q[0])||c.isImmutableArray(q[0]))G=c.autoCastArrayOfPointsToPolyline(q[0],
t.spatialReference);if(null===G)return null;if(!(G instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);if(!(G instanceof d))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);n=q[1];if(null===n)return null;if(!(n instanceof D))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);if(c.isNumber(!1===q[1]))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);return(q=k.pointToCoordinate(G,
n))?C.convertObjectToArcadeDictionary(q,c.defaultTimeZone(t),!1,!0):null})};e.distancetocoordinate=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,2,2,t,v);if(null===q[0])return null;G=q[0];if(c.isArray(q[0])||c.isImmutableArray(q[0]))G=c.autoCastArrayOfPointsToPolyline(q[0],t.spatialReference);if(null===G)return null;if(!(G instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);if(!(G instanceof d))throw new b.ArcadeExecutionError(t,
b.ExecutionErrorCodes.InvalidParameter,v);if(c.isNumber(!1===q[1]))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);return(q=k.distanceToCoordinate(G,q[1]))?C.convertObjectToArcadeDictionary(q,c.defaultTimeZone(t),!1,!0):null})};e.multiparttosinglepart=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,1,1,t,v);n=[];if(null===q[0])return null;if(!(q[0]instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,
v);if(q[0]instanceof D||q[0]instanceof p)return[c.fixSpatialReference(a.cloneGeometry(q[0]),t.spatialReference)];G=w.simplify(q[0]);if(G instanceof z){q=[];n=[];for(var W=0;W<G.rings.length;W++)if(G.isClockwise(G.rings[W])){const ca=f.fromJSON({rings:[G.rings[W]],hasZ:!0===G.hasZ,hasM:!0===G.hasM,spatialReference:G.spatialReference.toJSON()});q.push(ca)}else n.push({ring:G.rings[W],pt:G.getPoint(W,0)});for(G=0;G<n.length;G++)for(W=0;W<q.length;W++)if(q[W].contains(n[G].pt)){q[W].addRing(n[G].ring);
break}return q}if(G instanceof d){q=[];for(n=0;n<G.paths.length;n++)W=f.fromJSON({paths:[G.paths[n]],hasZ:!0===G.hasZ,hasM:!0===G.hasM,spatialReference:G.spatialReference.toJSON()}),q.push(W);return q}if(q[0]instanceof l){G=c.fixSpatialReference(a.cloneGeometry(q[0]),t.spatialReference);for(q=0;q<G.points.length;q++)n.push(G.getPoint(q));return n}return null})};e.issimple=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,1,1,t,v);if(null===q[0])return!0;if(!(q[0]instanceof
F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);return w.isSimple(q[0])})};e.simplify=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,1,1,t,v);if(null===q[0])return null;if(!(q[0]instanceof F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);return w.simplify(q[0])})};e.convexhull=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,1,1,t,v);if(null===q[0])return null;if(!(q[0]instanceof
F))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);return w.convexHull(q[0])})};e.nearestcoordinate=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,2,2,t,v);if(!(q[0]instanceof F||null===q[0]))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);if(!(q[1]instanceof D||null===q[1]))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);if(null===q[0]||null===q[1])return null;G=w.nearestCoordinate(q[0],
q[1]);return null===G||G.isEmpty?null:C.convertObjectToArcadeDictionary({coordinate:G.coordinate,distance:G.distance,sideOfLine:0===G.distance?"straddle":G.isRightSide?"right":"left"},c.defaultTimeZone(t),!1,!0)})};e.nearestvertex=function(t,v){return E(t,v,(G,n,q)=>{q=c.autoCastFeatureToGeometry(q);c.pcCheck(q,2,2,t,v);if(!(q[0]instanceof F||null===q[0]))throw new b.ArcadeExecutionError(t,b.ExecutionErrorCodes.InvalidParameter,v);if(!(q[1]instanceof D||null===q[1]))throw new b.ArcadeExecutionError(t,
b.ExecutionErrorCodes.InvalidParameter,v);if(null===q[0]||null===q[1])return null;G=w.nearestVertex(q[0],q[1]);return null===G||G.isEmpty?null:C.convertObjectToArcadeDictionary({coordinate:G.coordinate,distance:G.distance,sideOfLine:0===G.distance?"straddle":G.isRightSide?"right":"left"},c.defaultTimeZone(t),!1,!0)})}};u.setGeometryEngine=function(e){w=e};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/measures":function(){define(["exports","./centroid","../../core/unitUtils",
"../../geometry/Point","../../geometry/Polygon"],function(u,M,C,b,a){function c(g,p,F){F=p[0]-g[0];g=p[1]-g[1];return Math.sqrt(F*F+g*g)}function m(g,p,F,l){p=[p[0]-g[0],p[1]-g[1],p[2]*l-g[2]*l];l=Math.sqrt(p[0]*p[0]+p[1]*p[1]+p[2]*p[2]);p=[p[0]/l,p[1]/l,p[2]/l];return[g[0]+p[0]*F,g[1]+p[1]*F,g[2]+p[2]*F]}function k(g,p,F){let l=p[0]-g[0];p=p[1]-g[1];const D=Math.sqrt(l*l+p*p);return[g[0]+l/D*F,g[1]+p/D*F]}u.distanceToCoordinate=function(g,p){if(!g)return null;switch(g.type){case "extent":case "multipoint":case "mesh":case "point":return null}var F=
"polygon"===g.type?g.rings:g.paths;if(0>p)return null;var l=1;if(g.spatialReference.vcsWkid||g.spatialReference.latestVcsWkid){var D=M.getMetersPerVerticalUnitForSR(g.spatialReference),z=C.getMetersPerUnitForSR(g.spatialReference);l=D/z}let d=0;D=g.hasZ?3:2;var f=g.hasZ?M.segmentLength3d:c;z=-1;if(0===p)return 0===F.length||0===F[0].length?null:{partId:0,coordinate:new b({hasZ:g.hasZ,hasM:g.hasM,spatialReference:g.spatialReference,x:F[0][0][0],y:F[0][0][1],...(g.hasZ?{z:F[0][0][2]}:{}),...(g.hasM?
{m:F[0][0][D]}:{})}),segmentId:0};for(const A of F){z++;F=-1;for(let r=1;r<A.length;r++){F++;const w=f(A[r-1],A[r],l),e=d+w;if(e===p)return{partId:z,coordinate:new b({hasZ:g.hasZ,hasM:g.hasM,spatialReference:g.spatialReference,x:A[r][0],y:A[r][1],...(g.hasZ?{z:A[r][2]}:{}),...(g.hasM?{m:A[r][D]}:{})}),segmentId:F};if(e>p)return l=g.hasZ?m(A[r-1],A[r],p-d,l):k(A[r-1],A[r],p-d),l=[...l],f=A[r-1][D],p=f+(A[r][D]-f)/w*(p-d),l=[...l,p],{partId:z,coordinate:new b({hasZ:g.hasZ,hasM:g.hasM,spatialReference:g.spatialReference,
x:l[0],y:l[1],...(g.hasZ?{z:l[2]}:{}),...(g.hasM?{m:l[D]}:{})}),segmentId:F};d=e}}return null};u.measureToCoordinate=function(g,p){if(!g)return null;switch(g.type){case "extent":case "multipoint":case "mesh":case "point":return null}var F="polygon"===g.type?g.rings:g.paths,l=1;if(g.spatialReference.vcsWkid||g.spatialReference.latestVcsWkid){l=M.getMetersPerVerticalUnitForSR(g.spatialReference);var D=C.getMetersPerUnitForSR(g.spatialReference);l/=D}if(0===F.length||0===F[0].length||!1===g.hasM)return null;
D=-1;let z=0;const d=g.hasZ?M.segmentLength3d:c,f=g.hasZ?3:2;for(const r of F){D++;if(0<r.length&&r[0][f]===p)return{partId:D,distanceAlong:z,coordinate:new b({hasZ:g.hasZ,hasM:g.hasM,spatialReference:g.spatialReference,x:r[0][0],y:r[0][1],...(g.hasZ?{z:r[0][2]}:{}),...(g.hasM?{m:r[0][f]}:{})}),segmentId:0};F=-1;for(let w=1;w<r.length;w++){var A=d(r[w-1],r[w],l);F++;const e=r[w][f]-r[w-1][f],E=r[w][f];if(E===p)return{partId:D,distanceAlong:A+z,coordinate:new b({hasZ:g.hasZ,hasM:g.hasM,spatialReference:g.spatialReference,
x:r[w][0],y:r[w][1],...(g.hasZ?{z:r[w][2]}:{}),...(g.hasM?{m:r[w][f]}:{})}),segmentId:F};if(E>p&&p>r[w-1][f])return A*=(p-r[w-1][f])/e,A=g.hasZ?m(r[w-1],r[w],A,l):k(r[w-1],r[w],A),A=[...A,p],g=new b({hasZ:g.hasZ,hasM:g.hasM,spatialReference:g.spatialReference,x:A[0],y:A[1],...(g.hasZ?{z:A[2]}:{}),...(g.hasM?{m:A[f]}:{})}),{partId:D,distanceAlong:z+d(r[w-1],[g.x,g.y,...(g.hasZ?[g.z]:[]),...(g.hasM?[g.m]:[])],l),coordinate:g,segmentId:F};z+=A}}return null};u.pointToCoordinate=function(g,p){if(!g||!p)return null;
if("extent"===g.type){var F=g;g=new a({spatialReference:g.spatialReference,rings:[[[F.xmin,F.ymin],[F.xmin,F.ymax],[F.xmax,F.ymax],[F.xmax,F.ymin],[F.xmin,F.ymin]]]})}switch(g.type){case "point":var l=g;if(l)if(p){g=1;if(p.spatialReference.vcsWkid||p.spatialReference.latestVcsWkid)g=M.getMetersPerVerticalUnitForSR(p.spatialReference),F=C.getMetersPerUnitForSR(p.spatialReference),g/=F;F=null;var D=0;F=l;D=l.hasZ&&p.hasZ?M.segmentLength3d([p.x,p.y,p.z],[l.x,l.y,l.z],g):M.segmentLength([p.x,p.y],[l.x,
l.y],!1);p={coordinate:F,distance:D}}else p=null;else p=null;return p??null;case "multipoint":if(g&&p){F=1;if(p.spatialReference.vcsWkid||p.spatialReference.latestVcsWkid)F=M.getMetersPerVerticalUnitForSR(p.spatialReference),D=C.getMetersPerUnitForSR(p.spatialReference),F/=D;D=null;var z=0;z=Number.MAX_VALUE;var d=D=-1;for(l of g.points||[]){d++;var f=g.hasZ&&p.hasZ?M.segmentLength3dSqr([l[0],l[1],l[2]],[p.x,p.y,p.z],F):M.segmentLengthSqr([l[0],l[1]],[p.x,p.y],!1);f<z&&(z=f,D=d)}0>D?p=null:(D=g.getPoint(D),
p={coordinate:D,distance:Math.sqrt(z)})}else p=null;return p??null;case "polygon":case "polyline":if((l=g)&&p){g="polygon"===l.type?l.rings:l.paths;F=1;if(p.spatialReference.vcsWkid||p.spatialReference.latestVcsWkid)F=M.getMetersPerVerticalUnitForSR(p.spatialReference),D=C.getMetersPerUnitForSR(p.spatialReference),F/=D;D=Number.MAX_VALUE;var A=z=-1;d=-1;f=l.hasZ&&p.hasZ;var r=null,w=f?[p.x,p.y,p.z]:[p.x,p.y];for(var e of g){A++;for(var E=1;E<e.length;E++){var B=f?M.closestPointOnLineSegmentWithZ(w,
e[E-1],e[E]):M.closestPointOnLineSegment(w,e[E-1],e[E]),t=f?M.segmentLength3dSqr(B,w,F):M.segmentLengthSqr(B,w,!1);t<D&&(D=t,r=B,d=A,z=E-1)}}if(0>z)p=null;else{w=l.hasM&&l.hasZ?3:2;e=g[d][z];A=g[d][z+1];E=E=null;B=f?r[2]:null;if(l.hasM){E=e[w];t=f?M.segmentLength3d(e,A,F):M.segmentLength(e,A,!1);var v=f?M.segmentLength3d(e,r,F):M.segmentLength(e,r,!1);E+=(A[w]-E)/t*v}l.hasZ&&!1===p.hasZ&&(w=e[2],B=f?M.segmentLength3d(e,A,F):M.segmentLength(e,A,!1),t=f?M.segmentLength3d(e,r,F):M.segmentLength(e,r,
!1),B=w+(A[2]-w)/B*t);E=new b({hasZ:f,hasM:l.hasM,spatialReference:p.spatialReference,x:r[0],y:r[1],...(l.hasZ?{z:B}:{}),...(l.hasM?{m:E}:{})});p=0;for(f=0;f<=d;f++)for(r=g[f],A=f===d?z:r.length-1,w=1;w<=A;w++)p+=l.hasZ?M.segmentLength3d(r[w-1],r[w],F):M.segmentLength([r[w-1][0],r[w-1][1]],[r[w][0],r[w][1]],!1);p+=l.hasZ?M.segmentLength3d(e,[E.x,E.y,E.z],F):M.segmentLength(e,[E.x,E.y],!1);p={partId:d,segmentId:z,coordinate:E,distance:Math.sqrt(D),distanceAlong:p}}}else p=null;return p??null;default:return null}};
Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/maths":function(){define(["exports","../../chunks/languageUtils","../../core/number"],function(u,M,C){function b(a,c,m){if(void 0===m||0===+m)return Math[a](c);c=+c;m=+m;if(isNaN(c)||"number"!==typeof m||0!==m%1)return NaN;c=c.toString().split("e");c=Math[a](+(c[0]+"e"+(c[1]?+c[1]-m:-m)));c=c.toString().split("e");return+(c[0]+"e"+(c[1]?+c[1]+m:m))}u.registerFunctions=function(a,c){function m(k,g,p){k=M.toNumber(k);
return isNaN(k)?k:isNaN(g)||isNaN(p)||g>p?NaN:k<g?g:k>p?p:k}a.number=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,1,2,k,g);p=l[0];return M.isNumber(p)?p:null===p?0:M.isDate(p)||M.isTime(p)||M.isDateOnly(p)?p.toNumber():M.isBoolean(p)?Number(p):M.isArray(p)?NaN:""===p||void 0===p?Number(p):M.isString(p)?void 0!==l[1]?(l=M.multiReplace(l[1],"\u2030",""),l=M.multiReplace(l,"\u00a4",""),C.parse(p,{pattern:l})):Number(p.trim()):Number(p)})};a.abs=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,1,
1,k,g);return Math.abs(M.toNumber(l[0]))})};a.acos=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,1,1,k,g);return Math.acos(M.toNumber(l[0]))})};a.asin=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,1,1,k,g);return Math.asin(M.toNumber(l[0]))})};a.atan=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,1,1,k,g);return Math.atan(M.toNumber(l[0]))})};a.atan2=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,2,2,k,g);return Math.atan2(M.toNumber(l[0]),M.toNumber(l[1]))})};a.ceil=function(k,g){return c(k,
g,(p,F,l)=>{M.pcCheck(l,1,2,k,g);return 2===l.length?(p=M.toNumber(l[1]),isNaN(p)&&(p=0),b("ceil",M.toNumber(l[0]),-1*p)):Math.ceil(M.toNumber(l[0]))})};a.round=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,1,2,k,g);return 2===l.length?(p=M.toNumber(l[1]),isNaN(p)&&(p=0),b("round",M.toNumber(l[0]),-1*p)):Math.round(M.toNumber(l[0]))})};a.floor=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,1,2,k,g);return 2===l.length?(p=M.toNumber(l[1]),isNaN(p)&&(p=0),b("floor",M.toNumber(l[0]),-1*p)):Math.floor(M.toNumber(l[0]))})};
a.cos=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,1,1,k,g);return Math.cos(M.toNumber(l[0]))})};a.isnan=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,1,1,k,g);return"number"===typeof l[0]&&isNaN(l[0])})};a.exp=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,1,1,k,g);return Math.exp(M.toNumber(l[0]))})};a.log=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,1,1,k,g);return Math.log(M.toNumber(l[0]))})};a.pow=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,2,2,k,g);return M.toNumber(l[0])**
M.toNumber(l[1])})};a.random=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,0,0,k,g);return Math.random()})};a.sin=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,1,1,k,g);return Math.sin(M.toNumber(l[0]))})};a.sqrt=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,1,1,k,g);return Math.sqrt(M.toNumber(l[0]))})};a.tan=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,1,1,k,g);return Math.tan(M.toNumber(l[0]))})};a.isempty=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,1,1,k,g);return null===l[0]||
""===l[0]||void 0===l[0]||l[0]===M.voidOperation?!0:!1})};a["boolean"]=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,1,1,k,g);return M.toBoolean(l[0])})};a.constrain=function(k,g){return c(k,g,(p,F,l)=>{M.pcCheck(l,3,3,k,g);p=M.toNumber(l[1]);F=M.toNumber(l[2]);if(M.isArray(l[0])){var D=[];for(var z of l[0])D.push(m(z,p,F));return D}if(M.isImmutableArray(l[0])){z=[];for(D=0;D<l[0].length();D++)z.push(m(l[0].get(D),p,F));return z}return m(l[0],p,F)})}};Object.defineProperty(u,Symbol.toStringTag,
{value:"Module"})})},"esri/arcade/functions/stats":function(){define(["exports","../executionError","../../chunks/languageUtils","./fieldStats"],function(u,M,C,b){function a(c,m,k,g){if(1===g.length){if(C.isArray(g[0]))return b.calculateStat(c,g[0],-1);if(C.isImmutableArray(g[0]))return b.calculateStat(c,g[0].toArray(),-1)}return b.calculateStat(c,g,-1)}u.registerFunctions=function(c,m){c.stdev=function(k,g){return m(k,g,(p,F,l)=>a("stdev",p,F,l))};c.variance=function(k,g){return m(k,g,(p,F,l)=>a("variance",
p,F,l))};c.average=function(k,g){return m(k,g,(p,F,l)=>a("mean",p,F,l))};c.mean=function(k,g){return m(k,g,(p,F,l)=>a("mean",p,F,l))};c.sum=function(k,g){return m(k,g,(p,F,l)=>a("sum",p,F,l))};c.min=function(k,g){return m(k,g,(p,F,l)=>a("min",p,F,l))};c.max=function(k,g){return m(k,g,(p,F,l)=>a("max",p,F,l))};c.distinct=function(k,g){return m(k,g,(p,F,l)=>a("distinct",p,F,l))};c.count=function(k,g){return m(k,g,(p,F,l)=>{C.pcCheck(l,1,1,k,g);if(C.isArray(l[0])||C.isString(l[0]))return l[0].length;
if(C.isImmutableArray(l[0]))return l[0].length();throw new M.ArcadeExecutionError(k,M.ExecutionErrorCodes.InvalidParameter,g);})}};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/fieldStats":function(){define(["exports","../../chunks/languageUtils"],function(u,M){function C(a){let c=0;for(let m=0;m<a.length;m++)c+=a[m];return c/a.length}function b(a){const c=C(a);let m=0;for(let k=0;k<a.length;k++)m+=(c-a[k])**2;return m/a.length}u.calculateStat=function(a,c,
m=1E3){switch(a.toLowerCase()){case "distinct":a:{a=[];const k={},g=[];for(let p=0;p<c.length;p++){if(void 0!==c[p]&&null!==c[p]&&c[p]!==M.voidOperation){const F=c[p];if(M.isNumber(F)||M.isString(F))void 0===k[F]&&(a.push(F),k[F]=1);else{let l=!1;for(let D=0;D<g.length;D++)!0===M.equalityTest(g[D],F)&&(l=!0);!1===l&&(g.push(F),a.push(F))}}if(a.length>=m&&-1!==m){c=a;break a}}c=a}return c;case "avg":case "mean":return C(M.toNumberArray(c));case "min":return Math.min.apply(Math,M.toNumberArray(c));
case "sum":c=M.toNumberArray(c);m=0;for(a=0;a<c.length;a++)m+=c[a];return m;case "max":return Math.max.apply(Math,M.toNumberArray(c));case "stdev":case "stddev":return Math.sqrt(b(M.toNumberArray(c)));case "var":case "variance":return b(M.toNumberArray(c));case "count":return c.length}return 0};u.decodeStatType=function(a){switch(a.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";
case "var":case "variance":return"var";case "count":return"count"}return""};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/string":function(){define("exports ../ArcadePortal ../Attachment ../Dictionary ../executionError ../../chunks/languageUtils ../featureset/support/shared ./convertdirection ./hash ../../core/urlUtils ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/SpatialReference ../../portal/Portal".split(" "),
function(u,M,C,b,a,c,m,k,g,p,F,l,D,z,d,f,A){function r(e,E){if(!e||!E)return e===E;if(e.x===E.x&&e.y===E.y){if(e.hasZ){if(e.z!==E.z)return!1}else if(E.hasZ)return!1;if(e.hasM){if(e.m!==E.m)return!1}else if(E.hasM)return!1;return!0}return!1}function w(e,E,B){if(null===e)E.updateUint8Array([0,139]);else if(c.isArray(e)){E.updateUint8Array([61]);if(B.map.has(e))e=B.map.get(e),E.updateIntArray([e^61237541]);else{B.map.set(e,B.currentLength++);for(var t of e)w(t,E,B);B.map.delete(e);B.currentLength--}E.updateUint8Array([199])}else if(c.isImmutableArray(e)){E.updateUint8Array([61]);
if(B.map.has(e))e=B.map.get(e),E.updateIntArray([e^61237541]);else{B.map.set(e,B.currentLength++);for(var v of e.toArray())w(v,E,B);B.map.delete(e);B.currentLength--}E.updateUint8Array([199])}else if(c.isDate(e))E.updateIntArray([e.toNumber()]),E.updateUint8Array([241]);else if(c.isDateOnly(e))E.updateIntArray([e.toNumber()]),E.updateIntArray([257]);else if(c.isTime(e))E.updateIntArray([e.toNumber()]),E.updateIntArray([263]);else if(c.isString(e))E.updateIntArray([e.length]),E.updateWithString(e),
E.updateUint8Array([41]);else if(c.isBoolean(e))E.updateUint8Array([!0===e?1:0,113]);else if(c.isNumber(e))E.updateFloatArray([e]),E.updateUint8Array([173]);else{if(e instanceof C)throw new a.ArcadeExecutionError(B.context,a.ExecutionErrorCodes.UnsupportedHashType,B.node);if(e instanceof M)throw new a.ArcadeExecutionError(B.context,a.ExecutionErrorCodes.UnsupportedHashType,B.node);if(e instanceof b){E.updateUint8Array([223]);if(B.map.has(e))e=B.map.get(e),E.updateIntArray([e^61237541]);else{B.map.set(e,
B.currentLength++);for(var G of e.keys())E.updateIntArray([G.length]),E.updateWithString(G),E.updateUint8Array([251]),t=e.field(G),w(t,E,B),E.updateUint8Array([239]);B.map.delete(e);B.currentLength--}E.updateUint8Array([73])}else{if(c.isFeature(e))throw new a.ArcadeExecutionError(B.context,a.ExecutionErrorCodes.UnsupportedHashType,B.node);if(e instanceof D)E.updateIntArray([3833836621]),E.updateIntArray([0]),E.updateFloatArray([e.x]),E.updateIntArray([1]),E.updateFloatArray([e.y]),e.hasZ&&(E.updateIntArray([2]),
E.updateFloatArray([e.z])),e.hasM&&(E.updateIntArray([3]),E.updateFloatArray([e.m])),E.updateIntArray([3765347959]),w(e.spatialReference.wkid,E,B);else if(e instanceof z){E.updateIntArray([1266616829]);for(G=0;G<e.rings.length;G++){v=e.rings[G];t=[];var n=null;let q=null;for(let W=0;W<v.length;W++){const ca=e.getPoint(G,W);if(0===W)n=ca;else if(r(q,ca))continue;q=ca;W===v.length-1&&r(n,ca)||t.push(ca)}E.updateIntArray([1397116793,t.length]);for(v=0;v<t.length;v++)n=t[v],E.updateIntArray([3962308117,
v]),w(n,E,B),E.updateIntArray([2716288009]);E.updateIntArray([2278822459])}E.updateIntArray([3878477243]);w(e.spatialReference.wkid,E,B)}else if(e instanceof d){E.updateIntArray([4106883559]);for(G=0;G<e.paths.length;G++){t=e.paths[G];E.updateIntArray([1397116793,t.length]);for(v=0;v<t.length;v++)E.updateIntArray([3962308117,v]),w(e.getPoint(G,v),E,B),E.updateIntArray([2716288009]);E.updateIntArray([2278822459])}E.updateIntArray([2568784753]);w(e.spatialReference.wkid,E,B)}else if(e instanceof l){E.updateIntArray([588535921,
e.points.length]);for(G=0;G<e.points.length;G++)t=e.getPoint(G),E.updateIntArray([G]),w(t,E,B);E.updateIntArray([1700171621]);w(e.spatialReference.wkid,E,B)}else if(e instanceof F)E.updateIntArray([3483648373]),E.updateIntArray([0]),E.updateFloatArray([e.xmax]),E.updateIntArray([1]),E.updateFloatArray([e.xmin]),E.updateIntArray([2]),E.updateFloatArray([e.ymax]),E.updateIntArray([3]),E.updateFloatArray([e.ymin]),e.hasZ&&(E.updateIntArray([4]),E.updateFloatArray([e.zmax]),E.updateIntArray([5]),E.updateFloatArray([e.zmin])),
e.hasM&&(E.updateIntArray([6]),E.updateFloatArray([e.mmax]),E.updateIntArray([7]),E.updateFloatArray([e.mmin])),E.updateIntArray([3622027469]),w(e.spatialReference.wkid,E,B);else if(e instanceof f)E.updateIntArray([14]),void 0!==e.wkid&&null!==e.wkid&&E.updateIntArray([e.wkid]),e.wkt&&E.updateWithString(e.wkt),e.wkt2&&E.updateWithString(e.wkt2);else{if(c.isFunctionParameter(e))throw new a.ArcadeExecutionError(B.context,a.ExecutionErrorCodes.UnsupportedHashType,B.node);if(c.isFeatureSet(e))throw new a.ArcadeExecutionError(B.context,
a.ExecutionErrorCodes.UnsupportedHashType,B.node);c.isFeatureSetCollection(e);throw new a.ArcadeExecutionError(B.context,a.ExecutionErrorCodes.UnsupportedHashType,B.node);}}}}u.registerFunctions=function(e,E){e.portal=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,1,1,B,t);return new M(c.toString(n[0]))})};e.typeof=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,1,1,B,t);v=c.getType(n[0]);if("Unrecognized Type"===v)throw new a.ArcadeExecutionError(B,a.ExecutionErrorCodes.UnrecognizedType,t);return v})};
e.trim=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,1,1,B,t);return c.toString(n[0]).trim()})};e.tohex=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,1,1,B,t);v=c.toNumber(n[0]);return isNaN(v)?v:v.toString(16)})};e.upper=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,1,1,B,t);return c.toString(n[0]).toUpperCase()})};e.proper=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,1,2,B,t);v=1;2===n.length&&"firstword"===c.toString(n[1]).toLowerCase()&&(v=2);G=/\s/;n=c.toString(n[0]);let q="",W=
!0;for(let ca=0;ca<n.length;ca++){let qa=n[ca];G.test(qa)?1===v&&(W=!0):qa.toUpperCase()!==qa.toLowerCase()&&(W?(qa=qa.toUpperCase(),W=!1):qa=qa.toLowerCase());q+=qa}return q})};e.lower=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,1,1,B,t);return c.toString(n[0]).toLowerCase()})};e.guid=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,0,1,B,t);if(0<n.length)switch(c.toString(n[0]).toLowerCase()){case "digits":return c.generateUUID().replace("-","").replace("-","").replace("-","").replace("-",
"");case "digits-hyphen":return c.generateUUID();case "digits-hyphen-parentheses":return"("+c.generateUUID()+")"}return"{"+c.generateUUID()+"}"})};e.standardizeguid=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,2,2,B,t);v=c.toString(n[0]);if(""===v||null===v)return"";v=/^(\{|\()?(?<partA>[0-9a-z]{8})(\-?)(?<partB>[0-9a-z]{4})(\-?)(?<partC>[0-9a-z]{4})(\-?)(?<partD>[0-9a-z]{4})(\-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(v);if(!v)return"";v=v.groups;v=v.partA+"-"+v.partB+"-"+v.partC+"-"+v.partD+
"-"+v.partE;switch(c.toString(n[1]).toLowerCase()){case "digits":return v.replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return v;case "digits-hyphen-parentheses":return"("+v+")"}return"{"+v+"}"})};e.console=function(B,t){return E(B,t,(v,G,n)=>{0!==n.length&&(1===n.length?B.console(c.toString(n[0])):B.console(c.toString(n)));return c.voidOperation})};e.mid=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,2,3,B,t);v=c.toNumber(n[1]);if(isNaN(v))return"";0>v&&(v=
0);if(2===n.length)return c.toString(n[0]).substr(v);G=c.toNumber(n[2]);if(isNaN(G))return"";0>G&&(G=0);return c.toString(n[0]).substr(v,G)})};e.find=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,2,3,B,t);v=0;if(2<n.length){v=c.toNumber(c.defaultUndefined(n[2],0));if(isNaN(v))return-1;0>v&&(v=0)}return c.toString(n[1]).indexOf(c.toString(n[0]),v)})};e.left=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,2,2,B,t);v=c.toNumber(n[1]);if(isNaN(v))return"";0>v&&(v=0);return c.toString(n[0]).substr(0,
v)})};e.right=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,2,2,B,t);v=c.toNumber(n[1]);if(isNaN(v))return"";0>v&&(v=0);return c.toString(n[0]).substr(-1*v,v)})};e.split=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,2,4,B,t);v=c.toNumber(c.defaultUndefined(n[2],-1));G=c.toBoolean(c.defaultUndefined(n[3],!1));-1===v||null===v||!0===G?n=c.toString(n[0]).split(c.toString(n[1])):(isNaN(v)&&(v=-1),-1>v&&(v=-1),n=c.toString(n[0]).split(c.toString(n[1]),v));if(!1===G)return n;G=[];for(let q=0;q<n.length&&
!(-1!==v&&G.length>=v);q++)""!==n[q]&&void 0!==n[q]&&G.push(n[q]);return G})};e.text=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,1,2,B,t);return c.toStringExplicit(n[0],n[1])})};e.concatenate=function(B,t){return E(B,t,(v,G,n)=>{v=[];if(1>n.length)return"";if(c.isArray(n[0])){G=c.defaultUndefined(n[2],"");for(var q=0;q<n[0].length;q++)v[q]=c.toStringExplicit(n[0][q],G);return 1<n.length?v.join(n[1]):v.join("")}if(c.isImmutableArray(n[0])){G=c.defaultUndefined(n[2],"");for(q=0;q<n[0].length();q++)v[q]=
c.toStringExplicit(n[0].get(q),G);return 1<n.length?v.join(n[1]):v.join("")}for(G=0;G<n.length;G++)v[G]=c.toStringExplicit(n[G]);return v.join("")})};e.reverse=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,1,1,B,t);if(c.isArray(n[0]))return v=n[0].slice(0),v.reverse(),v;if(c.isImmutableArray(n[0]))return v=n[0].toArray().slice(0),v.reverse(),v;throw new a.ArcadeExecutionError(B,a.ExecutionErrorCodes.InvalidParameter,t);})};e.replace=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,3,4,B,t);v=c.toString(n[0]);
G=c.toString(n[1]);const q=c.toString(n[2]);return(4===n.length?c.toBoolean(n[3]):1)?c.multiReplace(v,G,q):v.replace(G,q)})};e.schema=function(B,t){return E(B,t,(v,G,n)=>{if(c.isFeature(n[0]))return(v=c.featureSchema(n[0]))?b.convertObjectToArcadeDictionary(v,c.defaultTimeZone(B)):null;throw new a.ArcadeExecutionError(B,a.ExecutionErrorCodes.InvalidParameter,t);})};e.subtypes=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,1,1,B,t);if(c.isFeature(n[0]))return(v=c.featureSubtypes(n[0]))?b.convertObjectToArcadeDictionary(v,
c.defaultTimeZone(B)):null;throw new a.ArcadeExecutionError(B,a.ExecutionErrorCodes.InvalidParameter,t);})};e.subtypecode=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,1,1,B,t);if(c.isFeature(n[0])){v=c.featureSubtypes(n[0]);if(!v)return null;if(v.subtypeField&&n[0].hasField(v.subtypeField)){n=n[0].field(v.subtypeField);for(const q of v.subtypes)if(q.code===n)return q.code}return null}throw new a.ArcadeExecutionError(B,a.ExecutionErrorCodes.InvalidParameter,t);})};e.subtypename=function(B,t){return E(B,
t,(v,G,n)=>{c.pcCheck(n,1,1,B,t);if(c.isFeature(n[0])){v=c.featureSubtypes(n[0]);if(!v)return"";if(v.subtypeField&&n[0].hasField(v.subtypeField)){n=n[0].field(v.subtypeField);for(const q of v.subtypes)if(q.code===n)return q.name}return""}throw new a.ArcadeExecutionError(B,a.ExecutionErrorCodes.InvalidParameter,t);})};e.gdbversion=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,1,1,B,t);if(c.isFeature(n[0]))return n[0].gdbVersion();throw new a.ArcadeExecutionError(B,a.ExecutionErrorCodes.InvalidParameter,
t);})};e.domain=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,2,3,B,t);if(c.isFeature(n[0]))return(v=c.featureFullDomain(n[0],c.toString(n[1]),void 0===n[2]?void 0:n[2]))&&v.domain?"coded-value"===v.domain.type||"codedValue"===v.domain.type?b.convertObjectToArcadeDictionary({type:"codedValue",name:v.domain.name,dataType:m.layerFieldEsriConstants[v.field.type],codedValues:v.domain.codedValues.map(q=>({name:q.name,code:q.code}))},c.defaultTimeZone(B)):b.convertObjectToArcadeDictionary({type:"range",
name:v.domain.name,dataType:m.layerFieldEsriConstants[v.field.type],min:v.domain.minValue,max:v.domain.maxValue},c.defaultTimeZone(B)):null;throw new a.ArcadeExecutionError(B,a.ExecutionErrorCodes.InvalidParameter,t);})};e.domainname=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,2,4,B,t);if(c.isFeature(n[0]))return c.featureDomainValueLookup(n[0],c.toString(n[1]),n[2],void 0===n[3]?void 0:n[3]);throw new a.ArcadeExecutionError(B,a.ExecutionErrorCodes.InvalidParameter,t);})};e.domaincode=function(B,
t){return E(B,t,(v,G,n)=>{c.pcCheck(n,2,4,B,t);if(c.isFeature(n[0]))return c.featureDomainCodeLookup(n[0],c.toString(n[1]),n[2],void 0===n[3]?void 0:n[3]);throw new a.ArcadeExecutionError(B,a.ExecutionErrorCodes.InvalidParameter,t);})};e.urlencode=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,1,1,B,t);if(null===n[0])return"";if(n[0]instanceof b){v="";for(const q of n[0].keys())G=n[0].field(q),""!==v&&(v+="\x26"),v=null===G?v+(encodeURIComponent(q)+"\x3d"):v+(encodeURIComponent(q)+"\x3d"+encodeURIComponent(G));
return v}return encodeURIComponent(c.toString(n[0]))})};e.hash=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,1,1,B,t);v=new g.XXH(0);w(n[0],v,{context:B,node:t,map:new Map,currentLength:0});return v.digest()})};e.convertdirection=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,3,3,B,t);return k.convertDirection(n[0],n[1],n[2])})};e.fromjson=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,1,1,B,t);if(!1===c.isString(n[0]))throw new a.ArcadeExecutionError(B,a.ExecutionErrorCodes.InvalidParameter,
t);return b.convertJsonToArcade(JSON.parse(c.toString(n[0])),c.defaultTimeZone(B))})};e.expects=function(B,t){return E(B,t,(v,G,n)=>{if(1>n.length)throw new a.ArcadeExecutionError(B,a.ExecutionErrorCodes.WrongNumberOfParameters,t);return c.voidOperation})};e.tocharcode=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,1,2,B,t);v=c.toNumber(c.defaultUndefined(n[1],0));G=c.toString(n[0]);if(0===G.length&&1===n.length)return null;if(G.length<=v||0>v)throw new a.ArcadeExecutionError(B,a.ExecutionErrorCodes.OutOfBounds,
t);return G.charCodeAt(v)})};e.tocodepoint=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,1,2,B,t);v=c.toNumber(c.defaultUndefined(n[1],0));G=c.toString(n[0]);if(0===G.length&&1===n.length)return null;if(G.length<=v||0>v)throw new a.ArcadeExecutionError(B,a.ExecutionErrorCodes.OutOfBounds,t);return G.codePointAt(v)})};e.fromcharcode=function(B,t){return E(B,t,(v,G,n)=>{if(1>n.length)throw new a.ArcadeExecutionError(B,a.ExecutionErrorCodes.WrongNumberOfParameters,t);v=n.map(q=>Math.trunc(c.toNumber(q))).filter(q=>
0<=q&&65535>=q);return 0===v.length?null:String.fromCharCode.apply(null,v)})};e.fromcodepoint=function(B,t){return E(B,t,(v,G,n)=>{if(1>n.length)throw new a.ArcadeExecutionError(B,a.ExecutionErrorCodes.WrongNumberOfParameters,t);let q;try{q=n.map(W=>Math.trunc(c.toNumber(W))).filter(W=>1114111>=W&&W>>>0===W)}catch(W){return null}return 0===q.length?null:String.fromCodePoint.apply(null,q)})};e.getuser=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,0,2,B,t);v=c.defaultUndefined(n[1],"");v=!0===v||
!1===v?"":c.toString(v);if(null!==v&&""!==v)return null;if(0===n.length||n[0]instanceof M){G=null;G=B.services?.portal?B.services.portal:A.getDefault();if(0<n.length&&(n=n[0].field("url"),n=n?p.hasSamePortal(n,G?.restUrl||""):!1,!n)||!G)return null;if(""===v&&(n="loaded"===G.loadStatus&&G.user?.sourceJSON?G.user.sourceJSON:null,n)){n=JSON.parse(JSON.stringify(n));for(const q of["lastLogin","created","modified"])void 0!==n[q]&&null!==n[q]&&(n[q]=new Date(n[q]));return b.convertObjectToArcadeDictionary(n,
c.defaultTimeZone(B))}return null}throw new a.ArcadeExecutionError(B,a.ExecutionErrorCodes.InvalidParameter,t);})};e.getenvironment=function(B,t){return E(B,t,(v,G,n)=>{c.pcCheck(n,0,0,B,t);return b.convertObjectToArcadeDictionary(c.defaultExecutingContext(c.defaultTimeZone(B),B.spatialReference),c.defaultTimeZone(B),!0)})}};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadePortal":function(){define(["./Dictionary"],function(u){class M extends u{constructor(C){super();
this.declaredClass="esri.arcade.Portal";this.immutable=!1;this.setField("url",C);this.immutable=!0}}return M})},"esri/arcade/Attachment":function(){define(["./Dictionary"],function(u){class M extends u{constructor(C,b,a,c,m,k,g){super();this.attachmentUrl=m;this.declaredClass="esri.arcade.Attachment";this.immutable=!1;this.setField("id",C);this.setField("name",b);this.setField("contenttype",a);this.setField("size",c);this.setField("exifinfo",k);this.setField("keywords",g);this.immutable=!0}deepClone(){return new M(this.field("id"),
this.field("name"),this.field("contenttype"),this.field("size"),this.attachmentUrl,this.field("exifinfo")?.deepClone()??null,this.field("keywords"))}}return M})},"esri/arcade/functions/convertdirection":function(){define(["exports","../Dictionary","../executionError","../../chunks/languageUtils","../../core/maybe"],function(u,M,C,b,a){function c(H){if(!1===b.isString(H))throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.InvalidParameter,null);return H}function m(H,P){P=10**P;return Math.round(H*
P)/P}function k(H){const P=parseFloat(H.toString().replace(Math.trunc(H).toString(),"0"))*Math.sign(H);return 0>H?{fraction:P,integer:Math.ceil(H)}:{fraction:P,integer:Math.floor(H)}}function g(H,P){switch(H){case da.north:return"SHORT"===P?"N":"North";case da.east:return"SHORT"===P?"E":"East";case da.south:return"SHORT"===P?"S":"South";case da.west:return"SHORT"===P?"W":"West"}}function p(H,P){return H-Math.floor(H/P)*P}function F(H){switch(H){case U.truncated_degrees:case U.decimal_degrees:return 360;
case U.radians:return qa;case U.gradians:return 400;case U.seconds:return 1296E3;case U.fractional_degree_minutes:return 60;case U.fractional_minute_seconds:return 60;default:throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,null,{reason:"unsupported evaluations"});}}function l(H){switch(H.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return ka.north_azimuth;case "POLAR":return ka.polar;case "QUADRANT":return ka.quadrant;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return ka.south_azimuth}throw new C.ArcadeExecutionError(null,
C.ExecutionErrorCodes.LogicError,null,{reason:"unsupported directionType"});}function D(H){switch(H.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return U.decimal_degrees;case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return U.degrees_minutes_seconds;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return U.radians;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return U.gradians}throw new C.ArcadeExecutionError(null,
C.ExecutionErrorCodes.LogicError,null,{reason:"unsupported units"});}function z(H,P,R){let T=null;switch(P){case U.decimal_degrees:T=W(H,3600);break;case U.seconds:T=H;break;case U.gradians:T=W(H,3240);break;case U.radians:T=W(H,ya);break;default:throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}switch(R){case U.decimal_degrees:return ca(T,3600);case U.seconds:return T;case U.gradians:return ca(T,3240);case U.radians:return T/ya;default:throw new C.ArcadeExecutionError(null,
C.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}function d(H){a.assertIsSome(H);switch(H){case U.decimal_degrees:case U.truncated_degrees:case U.degrees_minutes_seconds:return U.decimal_degrees;case U.gradians:return U.gradians;case U.fractional_degree_minutes:return U.fractional_degree_minutes;case U.radians:return U.radians;case U.seconds:case U.fractional_minute_seconds:return U.seconds}}function f(H){switch(b.toNumber(H)){case 1:return{first:da.north,second:da.east};
case 2:return{first:da.south,second:da.east};case 3:return{first:da.south,second:da.west};case 4:return{first:da.north,second:da.west}}return null}function A(H){switch(H.toUpperCase().trim()){case "N":case "NORTH":return da.north;case "E":case "EAST":return da.east;case "S":case "SOUTH":return da.south;case "W":case "WEST":return da.west}return null}function r(H){H=parseFloat(H);if(b.isNumber(H)){if(isNaN(H))throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});
return H}throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function w(H,P,R){const T=R===ka.quadrant;let ha=null;var pa=null;let h=0;var x=0;x=0;if(T){if(2>H.length)throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});x=1;(pa=f(b.toString(H[H.length-1])))?(ha=pa.first,pa=pa.second):(h=1,ha=A(b.toString(H[0])),pa=A(b.toString(H[H.length-1])));if(null===ha||null===pa)throw new C.ArcadeExecutionError(null,
C.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}switch(P){case U.decimal_degrees:case U.radians:case U.gradians:if(0===H.length)break;return T?J.createFromAngleMeridianAndDirection(I.createFromAngleAndUnits(r(H[h]),d(P)),ha,pa):J.createFromAngleAndDirection(I.createFromAngleAndUnits(r(H[h]),d(P)),R);case U.degrees_minutes_seconds:x=H.length-x-h;if(3===x)return H=I.createFromDegreesMinutesSeconds(r(H[h]),r(H[h+1]),r(H[h+2])),T?J.createFromAngleMeridianAndDirection(H,ha,pa):J.createFromAngleAndDirection(H,
R);if(1===x)return H=r(H[h]),H=la.numberToDms(H),H=I.createFromDegreesMinutesSeconds(H.m_degrees,H.m_minutes,H.m_seconds),T?J.createFromAngleMeridianAndDirection(H,ha,pa):J.createFromAngleAndDirection(H,R)}throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function e(H){const P=new Set([" ","-","/","'",'"',"\\","^","\u00b0",oa,"\t","\r","\n","*"]);let R="";for(let T=0;T<H.length;T++){const ha=H.charAt(T);R=P.has(ha)?R+"RRSPLITRRSPLITRR":R+ha}return R.split("RRSPLITRRSPLITRR").filter(T=>
""!==T)}function E(H,P,R){const T={padding:0,rounding:0,newpos:P};let ha=!1;for(;P<H.length;){const pa=H[P];if(pa===R)ha?T.rounding++:T.padding++,P++;else if("."===pa)ha=!0,P++;else break}T.newpos=P-1;return T}const B=H=>(P,R,T)=>{T=T||14;return+H(P,R).toFixed(T)},t=(H,P)=>H+P,v=(H,P)=>H-P,G=(H,P)=>H*P,n=(H,P)=>H/P,q=(H,P,R)=>B(t)(H,P,R),W=(H,P,R)=>B(G)(H,P,R),ca=(H,P,R)=>B(n)(H,P,R),qa=2*Math.PI,ya=648E3/Math.PI,oa=String.fromCharCode(7501);var da;(function(H){H[H.north=0]="north";H[H.east=1]="east";
H[H.south=2]="south";H[H.west=3]="west"})(da||={});var U;(function(H){H[H.decimal_degrees=1]="decimal_degrees";H[H.seconds=2]="seconds";H[H.degrees_minutes_seconds=3]="degrees_minutes_seconds";H[H.radians=4]="radians";H[H.gradians=5]="gradians";H[H.truncated_degrees=6]="truncated_degrees";H[H.fractional_degree_minutes=7]="fractional_degree_minutes";H[H.fractional_minute_seconds=8]="fractional_minute_seconds"})(U||={});var ka;(function(H){H[H.north_azimuth=1]="north_azimuth";H[H.polar=2]="polar";H[H.quadrant=
3]="quadrant";H[H.south_azimuth=4]="south_azimuth"})(ka||={});var wa;(function(H){H[H.meridian=0]="meridian";H[H.direction=1]="direction"})(wa||={});class la{constructor(H,P,R){this.m_degrees=H;this.m_minutes=P;this.m_seconds=R}getField(H){switch(H){case U.decimal_degrees:case U.truncated_degrees:return this.m_degrees;case U.fractional_degree_minutes:return this.m_minutes;case U.seconds:case U.fractional_minute_seconds:return this.m_seconds;default:throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,
null,{reason:"unexpected evaluation"});}}static secondsToDMS(H){const P=k(H).fraction;H=k(H).integer;const R=Math.floor(H/3600);H-=3600*R;const T=Math.floor(H/60);return new la(R,T,H-60*T+P)}static numberToDms(H){var P=k(H).fraction;H=k(H).integer;const R=W(k(100*P).fraction,100);P=k(100*P).integer;return new la(H,P,R)}format(H,P){P=m(this.m_seconds,P);let R=this.m_minutes,T=this.m_degrees;if(H===U.seconds||H===U.fractional_minute_seconds)60<=P&&(P-=60,++R),60<=R&&(R=0,++T),360<=T&&(T=0);else if(H===
U.fractional_degree_minutes)P=0,R=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,T=this.m_degrees,60<=R&&(R=0,++T),360<=T&&(T=0);else if(H===U.decimal_degrees||H===U.truncated_degrees)H=ca(this.m_seconds,3600),P=ca(this.m_minutes,60),T=Math.round(this.m_degrees+P+H),P=R=0;return new la(T,R,P)}static dmsToSeconds(H,P,R){return 3600*H+60*P+R}}class xa{constructor(H,P,R){this.meridian=H;this.angle=P;this.direction=R}fetchAzimuth(H){return H===wa.meridian?this.meridian:this.direction}}class J{constructor(H){this._angle=
H}static createFromAngleAndDirection(H,P){return new J(new I(J._convertDirectionFormat(H.extractAngularUnits(U.seconds),P,ka.north_azimuth)))}getAngle(H){const P=this._angle.extractAngularUnits(U.seconds);switch(H){case ka.north_azimuth:case ka.south_azimuth:case ka.polar:return new I(J._convertDirectionFormat(P,ka.north_azimuth,H));case ka.quadrant:return H=J.secondsNorthAzimuthToQuadrant(P),new I(H.angle)}}getMeridian(H){const P=this._angle.extractAngularUnits(U.seconds);switch(H){case ka.north_azimuth:return da.north;
case ka.south_azimuth:return da.south;case ka.polar:return da.east;case ka.quadrant:return J.secondsNorthAzimuthToQuadrant(P).meridian}}getDirection(H){const P=this._angle.extractAngularUnits(U.seconds);switch(H){case ka.north_azimuth:return da.east;case ka.south_azimuth:return da.west;case ka.polar:return da.north;case ka.quadrant:return J.secondsNorthAzimuthToQuadrant(P).direction}}static secondsNorthAzimuthToQuadrant(H){const P=324E3>=H||972E3<=H?da.north:da.south;return new xa(P,P===da.north?
Math.min(1296E3-H,H):Math.abs(H-648E3),648E3<H?da.west:da.east)}static createFromAngleMeridianAndDirection(H,P,R){return new J(new I(J.secondsQuadrantToNorthAzimuth(H.extractAngularUnits(U.seconds),P,R)))}static secondsQuadrantToNorthAzimuth(H,P,R){return P===da.north?R===da.east?H:1296E3-H:R===da.east?648E3-H:648E3+H}static _convertDirectionFormat(H,P,R){let T=0;switch(P){case ka.north_azimuth:T=H;break;case ka.polar:T=324E3-H;break;case ka.quadrant:throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,
null,{reason:"unexpected evaluation"});case ka.south_azimuth:T=H+648E3}H=0;switch(R){case ka.north_azimuth:H=T;break;case ka.polar:H=324E3-T;break;case ka.quadrant:throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});case ka.south_azimuth:H=T-648E3}H%=1296E3;return 0>H?1296E3+H:H}}class I{constructor(H){this._seconds=H}static createFromAngleAndUnits(H,P){return new I(z(H,P,U.seconds))}extractAngularUnits(H){return z(this._seconds,U.seconds,
d(H))}static createFromDegreesMinutesSeconds(H,P,R){return new I(q(q(W(H,3600),W(P,60)),R))}}class N{constructor(H,P,R,T){this.view=H;this.angle=P;this.merdian=R;this.direction=T;this._formattedDms=this._dms=null}static createFromStringAndBearing(H,P,R){return new N(H,P.getAngle(R),P.getMeridian(R),P.getDirection(R))}fetchAngle(){return this.angle}fetchMeridian(){return this.merdian}fetchDirection(){return this.direction}fetchView(){return this.view}fetchDms(){null===this._dms&&this._calculateDms();
return this._dms}fetchFormattedDms(){null===this._formattedDms&&this._calculateDms();return this._formattedDms}_calculateDms(){var H=null;let P=U.truncated_degrees,R=0;for(H=0;H<this.view.length;H++){const T=this.view[H];switch(T){case "m":H=E(this.view,H,T);P=P===U.truncated_degrees?U.fractional_degree_minutes:P;H=H.newpos;continue;case "s":H=E(this.view,H,T),P=U.fractional_minute_seconds,R=R<H.rounding?H.rounding:R,H=H.newpos}}this._dms=la.secondsToDMS(this.angle.extractAngularUnits(U.seconds));
this._formattedDms=la.secondsToDMS(this.angle.extractAngularUnits(U.seconds)).format(P,R)}}u.convertDirection=function(H,P,R){if(!(P instanceof M))throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.InvalidParameter,null);if(!1===P.hasField("directionType"))throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});if(!1===P.hasField("angleType"))throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,null,{reason:"missing angleType"});
var T=l(c(P.field("directiontype")));P=D(c(P.field("angletype")));if(b.isNumber(H)){H=b.toNumber(H);if(T===ka.quadrant)throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});P===U.degrees_minutes_seconds?(H=la.numberToDms(H),T=J.createFromAngleAndDirection(I.createFromDegreesMinutesSeconds(H.m_degrees,H.m_minutes,H.m_seconds),T)):T=J.createFromAngleAndDirection(I.createFromAngleAndUnits(H,d(P)),T)}else if(b.isString(H))T=w(e(H),P,T);else if(b.isArray(H))T=
w(H,P,T);else if(b.isImmutableArray(H))T=w(H.toArray(),P,T);else throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(R instanceof M))throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.InvalidParameter,null);if(!1===R.hasField("directionType"))throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});if(!1===R.hasField("outputType"))throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,
null,{reason:"missing angleType"});H=l(c(R.field("directiontype")));P=R.hasField("angleType")?D(c(R.field("angletype"))):null;var ha=c(R.field("outputType")).toUpperCase().trim();if(!H||!ha)throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(P||"TEXT"===ha&&R.hasField("format")))throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,null,{reason:"invalid unit"});switch(ha){case "VALUE":if(H===ka.quadrant||P===U.degrees_minutes_seconds)return R=
T.getAngle(H),H===ka.quadrant&&P===U.degrees_minutes_seconds?(R=la.secondsToDMS(R.extractAngularUnits(U.seconds)),T=[g(T.getMeridian(H),"SHORT"),R.m_degrees,R.m_minutes,R.m_seconds,g(T.getDirection(H),"SHORT")]):P===U.degrees_minutes_seconds?(T=la.secondsToDMS(R.extractAngularUnits(U.seconds)),T=[T.m_degrees,T.m_minutes,T.m_seconds]):T=H===ka.quadrant?[g(T.getMeridian(H),"SHORT"),R.extractAngularUnits(P),g(T.getDirection(H),"SHORT")]:[R.extractAngularUnits(P)],T;if((R=d(P))&&P!==U.degrees_minutes_seconds)T=
T.getAngle(H).extractAngularUnits(R);else throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});return T;case "TEXT":ha="";R.hasField("format")&&(ha=b.toString(R.field("format")));if(null===ha||""===ha){R="";switch(P){case U.decimal_degrees:R=H===ka.quadrant?"DD.DD\u00b0":"DDD.DD\u00b0";break;case U.degrees_minutes_seconds:R=H===ka.quadrant?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case U.radians:R="R.RR";break;case U.gradians:R="GGG.GG"+
oa;break;default:throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});}H===ka.quadrant&&(R="p "+R+" b");ha=R}R=ha;var pa="",h=null,x=null;P=N.createFromStringAndBearing(R,T,H);ha={D:U.decimal_degrees,d:U.truncated_degrees,m:U.fractional_degree_minutes,s:U.fractional_minute_seconds,R:U.radians,G:U.gradians};for(x=0;x<R.length;x++){var K=R[x];switch(K){case "[":h=R;K={escaped:"",newpos:x};for(x++;x<h.length;){var O=h[x];x++;if("]"===O)break;K.escaped+=
O}K.newpos=x-1;h=K;pa+=h.escaped;x=h.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":h=E(R,x,K);x=T.getAngle(H);a:{K=ha[K];O=h.padding;var S=h.rounding,fa=P;let ea=null;switch(K){case U.decimal_degrees:case U.radians:case U.gradians:ea=p(m(x.extractAngularUnits(K),S),F(K));x=ea.toFixed(S).padStart(O+S+(0<S?1:0),"0");break a;case U.truncated_degrees:case U.fractional_degree_minutes:ea=p(fa.fetchFormattedDms().getField(K),F(K));x=ea.toFixed(S).padStart(O+S+(0<S?1:0),"0");break a;
case U.fractional_minute_seconds:ea=p(m(fa.fetchDms().getField(K),S),F(K));x=ea.toFixed(S).padStart(O+S+(0<S?1:0),"0");break a;default:throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}pa+=x;x=h.newpos;continue;case "P":case "p":pa+=g(P.fetchMeridian(),"p"===K?"SHORT":"LONG");continue;case "B":case "b":pa+=g(P.fetchDirection(),"b"===K?"SHORT":"LONG");continue;default:pa+=K}}return pa;default:throw new C.ArcadeExecutionError(null,C.ExecutionErrorCodes.InvalidParameter,
null);}};u.preciseAdd=q;u.preciseDivide=ca;u.preciseMinus=(H,P,R)=>B(v)(H,P,R);u.preciseMultiply=W;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/hash":function(){define(["exports"],function(u){function M(b){const a=[];for(let c=0,m=b.length;c<m;c++){let k=b.charCodeAt(c);128>k?a.push(k):2048>k?a.push(192|k>>6,128|k&63):55296>k||57344<=k?a.push(224|k>>12,128|k>>6&63,128|k&63):(c++,k=65536+((k&1023)<<10|b.charCodeAt(c)&1023),a.push(240|k>>18,128|k>>12&63,128|
k>>6&63,128|k&63))}return new Uint8Array(a)}class C{constructor(b){this._seed=b;this._totallen=0;this._bufs=[];this.init()}init(){this._bufs=[];this._totallen=0;return this}updateFloatArray(b){const a=[];for(const c of b)isNaN(c)?a.push("NaN"):Infinity===c?a.push("Infinity"):-Infinity===c?a.push("-Infinity"):0===c?a.push("0"):a.push(c.toString(16));this.update(M(a.join("")))}updateIntArray(b){b=Int32Array.from(b);this.update(new Uint8Array(b.buffer))}updateUint8Array(b){this.update(Uint8Array.from(b))}updateWithString(b){return this.update(M(b))}update(b){this._bufs.push(b);
this._totallen+=b.length;return this}digest(){const b=new Uint8Array(this._totallen);let a=0;for(const c of this._bufs)b.set(c,a),a+=c.length;this.init();return this._xxHash32(b,this._seed)}_xxHash32(b,a=0){var c=a+374761393&4294967295;let m=0;if(16<=b.length){c=[a+2654435761+2246822519&4294967295,a+2246822519&4294967295,a+0&4294967295,a-2654435761&4294967295];a=b.length-16;var k=0;for(m=0;(m&4294967280)<=a;m+=4){var g=m;g=c[k]+(2246822519*(b[g]+(b[g+1]<<8))+(2246822519*(b[g+2]+(b[g+3]<<8))<<16))&
4294967295;g=g<<13|g>>>19;c[k]=2654435761*(g&65535)+(2654435761*(g>>>16)<<16)&4294967295;k=k+1&3}c=(c[0]<<1|c[0]>>>31)+(c[1]<<7|c[1]>>>25)+(c[2]<<12|c[2]>>>20)+(c[3]<<18|c[3]>>>14)&4294967295}c=c+b.length&4294967295;for(a=b.length-4;m<=a;m+=4)k=m,c=c+(3266489917*(b[k]+(b[k+1]<<8))+(3266489917*(b[k+2]+(b[k+3]<<8))<<16))&4294967295,c=c<<17|c>>>15,c=668265263*(c&65535)+(668265263*(c>>>16)<<16)&4294967295;for(;m<b.length;++m)c+=374761393*b[m],c=c<<11|c>>>21,c=2654435761*(c&65535)+(2654435761*(c>>>16)<<
16)&4294967295;c^=c>>>15;c=(2246822519*(c&65535)&4294967295)+(2246822519*(c>>>16)<<16);c^=c>>>13;c=(3266489917*(c&65535)&4294967295)+(3266489917*(c>>>16)<<16);c^=c>>>16;return 0>c?c+4294967296:c}}u.XXH=C;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModuleResolver":function(){define("exports ../request ./executionError ./parser ./featureset/support/RecentlyUsedCache ../portal/Portal".split(" "),function(u,M,C,b,a,c){class m{constructor(k){this.portalUri=k}normalizeModuleUri(k){const g=
/^[a-z0-9A-Z]+(@[0-9]+\.[0-9]+\.[0-9]+)?([\?|\/].*)?$/gi;var p=/(?<portalurl>.+)\/home\/item\.html\?id=(?<itemid>.+)$/gi;const F=/(?<portalurl>.+)\/sharing\/rest\/content\/users\/[a-zA-Z0-9]+\/items\/(?<itemid>.+)$/gi,l=/(?<portalurl>.+)\/sharing\/rest\/content\/items\/(?<itemid>.+)$/gi;var D=/(?<itemid>.*)@(?<versionstring>[0-9]+\.[0-9]+\.[0-9]+)([\?|\/].*)?$/gi;if(k.startsWith("portal+")){let f=k.substring(7);var z="",d=f;let A=!1;for(const r of[p,l,F])if(p=r.exec(f),null!==p){z=p.groups;d=z.itemid;
z=z.portalurl;A=!0;break}if(!1===A)if(g.test(f))d=f,z=this.portalUri;else throw new C.ModuleError(C.ModuleErrorCodes.UnsupportedUriProtocol,{uri:k});d.includes("/")&&(d=d.split("/")[0]);d.includes("?")&&(d=d.split("?")[0]);k="current";D=D.exec(d);null!==D&&(k=D.groups,d=k.itemid,k=k.versionstring);f=(new c({url:z})).restUrl+"/content/items/"+d+"/resources/"+k+".arc";return{url:f,scheme:"portal",uri:"PO:"+f}}if(k.startsWith("mock")){if("mock"===k)return{url:"",scheme:"mock",data:'\n      export var hello \x3d 1;\n      export function helloWorld() {\n          return "Hello World " + hello;\n      }\n  ',
uri:"mock"};d=k.replace("mock:","");if(void 0!==m.mocks[d])return{url:"",scheme:"mock",data:m.mocks[d],uri:k}}throw new C.ModuleError(C.ModuleErrorCodes.UnrecognizedUri,{uri:k});}async fetchModule(k){var g=m.cachedModules.getFromCache(k.uri);if(g)return g;g=this.fetchSource(k);m.cachedModules.addToCache(k.uri,g);let p=null;try{p=await g}catch(F){throw m.cachedModules.removeFromCache(k.uri),F;}return p}async fetchSource(k){if("portal"===k.scheme){const g=await M(k.url,{responseType:"text",query:{}});
if(g.data)return b.parseScript(g.data,[])}if("mock"===k.scheme)return b.parseScript(k.data??"",[]);throw new C.ModuleError(C.ModuleErrorCodes.UnsupportedUriProtocol);}static create(k){return new m(k)}static getDefault(){return this._default??(m._default=m._moduleResolverFactory())}static set moduleResolverClass(k){this._moduleResolverFactory=k;this._default=null}}m.mocks={};m.cachedModules=new a(30);m._default=null;m._moduleResolverFactory=()=>{const k=c.getDefault();return new m(k.url)};u.ArcadeModuleResolver=
m;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/parser":function(){define(["exports","./treeAnalysis","./lib/arcade-parser","./lib/types"],function(u,M,C,b){u.parseScript=function(a,c=[]){a=C.parse(a);if(null===a.body||void 0===a.body)throw new b.ParsingError({index:0,line:0,column:0,data:null,description:"",code:b.ParsingErrorCodes.InvalidExpression});a.loadedModules={};M.findScriptDependencies(a,c);return a};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/lib/arcade-parser":function(){define(["exports","./parser","./tokenizer","./types"],function(u,M,C,b){Object.defineProperty(u,"Keywords",{enumerable:!0,get:()=>b.Keywords});u.ParsingError=b.ParsingError;Object.defineProperty(u,"ParsingErrorCodes",{enumerable:!0,get:()=>b.ParsingErrorCodes});Object.defineProperty(u,"Syntax",{enumerable:!0,get:()=>b.Syntax});Object.defineProperty(u,"TokenType",{enumerable:!0,get:()=>b.TokenType});u.assignmentOperators=b.assignmentOperators;u.binaryOperators=
b.binaryOperators;u.isArrayExpression=b.isArrayExpression;u.isAssignmentExpression=b.isAssignmentExpression;u.isBinaryExpression=b.isBinaryExpression;u.isBlockComment=b.isBlockComment;u.isBlockStatement=b.isBlockStatement;u.isBreakStatement=b.isBreakStatement;u.isCallExpression=b.isCallExpression;u.isContinueStatement=b.isContinueStatement;u.isEmptyStatement=b.isEmptyStatement;u.isExpression=b.isExpression;u.isExpressionStatement=b.isExpressionStatement;u.isForInStatement=b.isForInStatement;u.isForStatement=
b.isForStatement;u.isFunctionDeclaration=b.isFunctionDeclaration;u.isIdentifier=b.isIdentifier;u.isIfStatement=b.isIfStatement;u.isLiteral=b.isLiteral;u.isLogicalExpression=b.isLogicalExpression;u.isMemberExpression=b.isMemberExpression;u.isObjectExpression=b.isObjectExpression;u.isProgram=b.isProgram;u.isProperty=b.isProperty;u.isReturnStatement=b.isReturnStatement;u.isStatement=b.isStatement;u.isTemplateElement=b.isTemplateElement;u.isTemplateLiteral=b.isTemplateLiteral;u.isUnaryExpression=b.isUnaryExpression;
u.isUpdateExpression=b.isUpdateExpression;u.isVariableDeclaration=b.isVariableDeclaration;u.isVariableDeclarator=b.isVariableDeclarator;u.logicalOperators=b.logicalOperators;u.operatorPrecedence=b.operatorPrecedence;u.parsingErrorMessages=b.parsingErrorMessages;u.rokenNames=b.rokenNames;u.unaryOperators=b.unaryOperators;u.updateOperators=b.updateOperators;u.parse=function(a,c,m){return(new M.Parser(a,c,m)).parseScript()};u.tokenize=function(a,c,m){a=new C.Tokenizer(a,c);c=[];let k=void 0;try{let g;
for(;g=a.getNextToken();)m&&(g=m(g)),c.push(g)}catch(g){a.errorHandler.tolerate(g)}a.errorHandler.tolerant&&(k=a.errors());return{tokens:c,errors:k}};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/parser":function(){define(["exports","./comment-handler","./error-handler","./scanner","./types"],function(u,M,C,b,a){function c(l,D=0){let z=l.start-l.lineStart,d=l.lineNumber;0>z&&(z+=D,d--);return{index:l.start,line:d,column:z}}function m(l){return[{index:l.range[0],
...l.loc.start},{index:l.range[1],...l.loc.end}]}function k(l){return a.operatorPrecedence[l]??0}var g;(function(l){l[l.None=0]="None";l[l.Function=1]="Function";l[l.IfClause=2]="IfClause";l[l.ForLoop=4]="ForLoop";l[l.WhileLoop=8]="WhileLoop"})(g||={});var p;(function(l){l[l.AsObject=0]="AsObject";l[l.Automatic=1]="Automatic"})(p||={});class F{constructor(l,D={},z){this.delegate=z;this.hasLineTerminator=!1;this.options={tokens:"boolean"===typeof D.tokens&&D.tokens,comments:"boolean"===typeof D.comments&&
D.comments,tolerant:"boolean"===typeof D.tolerant&&D.tolerant};this.options.comments&&(this.commentHandler=new M.CommentHandler);this.errorHandler=new C.ErrorHandler(this.options.tolerant);this.scanner=new b.Scanner(l,this.errorHandler);this.context={isAssignmentTarget:!1,blockContext:g.None,curlyParsingType:p.AsObject};this.rawToken={type:a.TokenType.EOF,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};
this.endMarker={index:0,line:this.scanner.lineNumber,column:0};this.readNextRawToken();this.endMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}throwIfInvalidType(l,D,{validTypes:z,invalidTypes:d}){z?.some(f=>l.type===f)||d?.some(f=>l.type===f)&&this.throwError(a.ParsingErrorCodes.InvalidExpression,D)}throwError(l,D,z=this.endMarker){const {index:d,line:f,column:A}=D;this.errorHandler.throwError({code:l,index:d,line:f,column:A+1,len:z.index-
d-1})}tolerateError(l,D){throw Error("######################################### !!!");}unexpectedTokenError(l={}){const {rawToken:D}=l;let {code:z,data:d}=l;if(D){if(!z)switch(D.type){case a.TokenType.EOF:z=a.ParsingErrorCodes.UnexpectedEndOfScript;break;case a.TokenType.Identifier:z=a.ParsingErrorCodes.UnexpectedIdentifier;break;case a.TokenType.NumericLiteral:z=a.ParsingErrorCodes.UnexpectedNumber;break;case a.TokenType.StringLiteral:z=a.ParsingErrorCodes.UnexpectedString;break;case a.TokenType.Template:z=
a.ParsingErrorCodes.UnexpectedTemplate}l=D.value.toString()}else l="ILLEGAL";z=z??a.ParsingErrorCodes.UnexpectedToken;d||={value:l};l=C.formatErrorDescription(z,d);if(D)return new a.ParsingError({code:z,index:D.start,line:D.lineNumber,column:D.start-D.lineStart+1,len:D.end-D.start-1,data:d,description:l});const {index:f,line:A}=this.endMarker;return new a.ParsingError({code:z,index:f,line:A,column:this.endMarker.column+1,data:d,description:l})}throwUnexpectedToken(l={}){l.rawToken=l.rawToken??this.rawToken;
throw this.unexpectedTokenError(l);}collectComments(l){const {commentHandler:D}=this;D&&l.length&&l.forEach(z=>{z={type:z.multiLine?a.Syntax.BlockComment:a.Syntax.LineComment,value:this.getSourceValue(z),range:z.range,loc:z.loc};D.collectComment(z)})}peekAhead(l){const D=this.scanner.saveState();l=l.call(this,()=>{this.scanner.scanComments();return this.scanner.lex()});this.scanner.restoreState(D);return l}getSourceValue(l){return this.scanner.source.slice(l.start,l.end)}convertToToken(l){return{type:a.rokenNames[l.type],
value:this.getSourceValue(l),range:[l.start,l.end],loc:{start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}}}readNextRawToken(){this.endMarker.index=this.scanner.index;this.endMarker.line=this.scanner.lineNumber;this.endMarker.column=this.scanner.index-this.scanner.lineStart;const l=this.rawToken;this.collectComments(this.scanner.scanComments());this.scanner.index!==this.startMarker.index&&(this.startMarker.index=
this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);this.rawToken=this.scanner.lex();this.hasLineTerminator=l.lineNumber!==this.rawToken.lineNumber;this.options.tokens&&this.rawToken.type!==a.TokenType.EOF&&this.tokens.push(this.convertToToken(this.rawToken))}captureStartMarker(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}}getItemLocation(l){return{range:[l.index,this.endMarker.index],
loc:{start:{line:l.line,column:l.column},end:{line:this.endMarker.line,column:this.endMarker.column}}}}finalize(l){if(this.delegate||this.commentHandler)this.commentHandler?.attachComments(l),this.delegate?.(l);return l}expectPunctuator(l){const D=this.rawToken;this.matchPunctuator(l)?this.readNextRawToken():this.throwUnexpectedToken({rawToken:D,code:a.ParsingErrorCodes.PunctuatorExpected,data:{value:l}})}expectKeyword(l){this.rawToken.type===a.TokenType.Keyword&&this.rawToken.value.toLowerCase()===
l?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})}expectContextualKeyword(l){this.rawToken.type===a.TokenType.Identifier&&this.rawToken.value.toLowerCase()===l?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})}matchKeyword(l){return this.rawToken.type===a.TokenType.Keyword&&this.rawToken.value.toLowerCase()===l}matchContextualKeyword(l){return this.rawToken.type===a.TokenType.Identifier&&this.rawToken.value===l}matchPunctuator(l){return this.rawToken.type===
a.TokenType.Punctuator&&this.rawToken.value===l}getMatchingPunctuator(l){"string"===typeof l&&(l=l.split(""));if(this.rawToken.type===a.TokenType.Punctuator&&l?.length)return l.find(this.matchPunctuator,this)}isolateCoverGrammar(l){const D=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;l=l.call(this);this.context.isAssignmentTarget=D;return l}inheritCoverGrammar(l){const D=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;l=l.call(this);this.context.isAssignmentTarget=
this.context.isAssignmentTarget&&D;return l}withBlockContext(l,D){const z=this.context.blockContext;this.context.blockContext|=l;l=this.context.curlyParsingType;this.context.curlyParsingType=p.Automatic;D=D.call(this);this.context.blockContext=z;this.context.curlyParsingType=l;return D}consumeSemicolon(){this.matchPunctuator(";")?this.readNextRawToken():this.hasLineTerminator||(this.rawToken.type===a.TokenType.EOF||this.matchPunctuator("}")?(this.endMarker.index=this.startMarker.index,this.endMarker.line=
this.startMarker.line,this.endMarker.column=this.startMarker.column):this.throwUnexpectedToken({rawToken:this.rawToken}))}parsePrimaryExpression(){const l=this.captureStartMarker(),D=this.rawToken;switch(D.type){case a.TokenType.Identifier:return this.readNextRawToken(),this.finalize({type:a.Syntax.Identifier,name:D.value,...this.getItemLocation(l)});case a.TokenType.NumericLiteral:case a.TokenType.StringLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:a.Syntax.Literal,
value:D.value,raw:this.getSourceValue(D),isString:"string"===typeof D.value,...this.getItemLocation(l)});case a.TokenType.BooleanLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:a.Syntax.Literal,value:D.value.toLowerCase()===a.Keywords.True,raw:this.getSourceValue(D),isString:!1,...this.getItemLocation(l)});case a.TokenType.NullLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:a.Syntax.Literal,value:null,raw:this.getSourceValue(D),
isString:!1,...this.getItemLocation(l)});case a.TokenType.Template:return this.parseTemplateLiteral();case a.TokenType.Punctuator:switch(D.value){case "(":return this.inheritCoverGrammar(this.parseGroupExpression);case "[":return this.inheritCoverGrammar(this.parseArrayInitializer);case "{":return this.inheritCoverGrammar(this.parseObjectExpression);default:return this.throwUnexpectedToken({rawToken:this.rawToken})}case a.TokenType.Keyword:return this.context.isAssignmentTarget=!1,this.throwUnexpectedToken({rawToken:this.rawToken});
default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseArrayInitializer(){const l=this.captureStartMarker();this.expectPunctuator("[");const D=[];for(;!this.matchPunctuator("]");){const z=this.captureStartMarker();this.matchPunctuator(",")?(this.readNextRawToken(),this.throwError(a.ParsingErrorCodes.InvalidExpression,z)):(D.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.matchPunctuator("]")||this.expectPunctuator(","))}this.expectPunctuator("]");return this.finalize({type:a.Syntax.ArrayExpression,
elements:D,...this.getItemLocation(l)})}parseObjectPropertyKey(){const l=this.captureStartMarker(),D=this.rawToken;switch(D.type){case a.TokenType.StringLiteral:return this.readNextRawToken(),this.finalize({type:a.Syntax.Literal,value:D.value,raw:this.getSourceValue(D),isString:!0,...this.getItemLocation(l)});case a.TokenType.Identifier:case a.TokenType.BooleanLiteral:case a.TokenType.NullLiteral:case a.TokenType.Keyword:return this.readNextRawToken(),this.finalize({type:a.Syntax.Identifier,name:D.value,
...this.getItemLocation(l)});default:this.throwError(a.ParsingErrorCodes.KeyMustBeString,l)}}parseObjectProperty(){const l=this.rawToken,D=this.captureStartMarker(),z=this.parseObjectPropertyKey();let d=!1,f=null;this.matchPunctuator(":")?(this.readNextRawToken(),f=this.inheritCoverGrammar(this.parseAssignmentExpression)):l.type===a.TokenType.Identifier?(d=!0,f=this.finalize({type:a.Syntax.Identifier,name:l.value,...this.getItemLocation(D)})):this.throwUnexpectedToken({rawToken:this.rawToken});return this.finalize({type:a.Syntax.Property,
kind:"init",key:z,value:f,shorthand:d,...this.getItemLocation(D)})}parseObjectExpression(){const l=this.captureStartMarker();this.expectPunctuator("{");const D=[];for(;!this.matchPunctuator("}");)D.push(this.parseObjectProperty()),this.matchPunctuator("}")||this.expectPunctuator(",");this.expectPunctuator("}");return this.finalize({type:a.Syntax.ObjectExpression,properties:D,...this.getItemLocation(l)})}parseTemplateElement(l=!1){var D=this.rawToken;D.type!==a.TokenType.Template&&this.throwUnexpectedToken({rawToken:D});
l&&!D.head&&this.throwUnexpectedToken({code:a.ParsingErrorCodes.InvalidTemplateHead,rawToken:D});l=this.captureStartMarker();this.readNextRawToken();const {value:z,cooked:d,tail:f}=D;D=this.finalize({type:a.Syntax.TemplateElement,value:{raw:z,cooked:d},tail:f,...this.getItemLocation(l)});D.loc.start.column++;D.loc.end.column-=f?1:2;return D}parseTemplateLiteral(){const l=this.captureStartMarker(),D=[],z=[];let d=this.parseTemplateElement(!0);for(z.push(d);!d.tail;)D.push(this.parseExpression()),d=
this.parseTemplateElement(),z.push(d);return this.finalize({type:a.Syntax.TemplateLiteral,quasis:z,expressions:D,...this.getItemLocation(l)})}parseGroupExpression(){this.expectPunctuator("(");const l=this.inheritCoverGrammar(this.parseAssignmentExpression);this.expectPunctuator(")");return l}parseArguments(){this.expectPunctuator("(");const l=[];if(!this.matchPunctuator(")"))for(;;){const D=this.isolateCoverGrammar(this.parseAssignmentExpression);l.push(D);if(this.matchPunctuator(")"))break;this.expectPunctuator(",");
if(this.matchPunctuator(")"))break}this.expectPunctuator(")");return l}parseMemberName(){const l=this.rawToken,D=this.captureStartMarker();this.readNextRawToken();l.type!==a.TokenType.NullLiteral&&l.type!==a.TokenType.Identifier&&l.type!==a.TokenType.Keyword&&l.type!==a.TokenType.BooleanLiteral&&this.throwUnexpectedToken({rawToken:l});return this.finalize({type:a.Syntax.Identifier,name:l.value,...this.getItemLocation(D)})}parseLeftHandSideExpression(){const l=this.captureStartMarker();let D=this.inheritCoverGrammar(this.parsePrimaryExpression);
const z=this.captureStartMarker();for(var d;d=this.getMatchingPunctuator("([.");)switch(d){case "(":this.context.isAssignmentTarget=!1;D.type!==a.Syntax.Identifier&&D.type!==a.Syntax.MemberExpression&&this.throwError(a.ParsingErrorCodes.IdentiferExpected,l,z);d=this.parseArguments();D=this.finalize({type:a.Syntax.CallExpression,callee:D,arguments:d,...this.getItemLocation(l)});continue;case "[":this.context.isAssignmentTarget=!0;this.expectPunctuator("[");d=this.isolateCoverGrammar(this.parseExpression);
this.expectPunctuator("]");D=this.finalize({type:a.Syntax.MemberExpression,computed:!0,object:D,property:d,...this.getItemLocation(l)});continue;case ".":this.context.isAssignmentTarget=!0,this.expectPunctuator("."),d=this.parseMemberName(),D=this.finalize({type:a.Syntax.MemberExpression,computed:!1,object:D,property:d,...this.getItemLocation(l)})}return D}parseUpdateExpression(){const l=this.captureStartMarker();let D=this.getMatchingPunctuator(a.updateOperators);if(D){this.readNextRawToken();var z=
this.captureStartMarker(),d=this.inheritCoverGrammar(this.parseUnaryExpression);d.type!==a.Syntax.Identifier&&d.type!==a.Syntax.MemberExpression&&d.type!==a.Syntax.CallExpression&&this.throwError(a.ParsingErrorCodes.InvalidExpression,z);this.context.isAssignmentTarget||this.tolerateError(a.ParsingErrorCodes.InvalidLeftHandSideInAssignment,l);this.context.isAssignmentTarget=!1;return this.finalize({type:a.Syntax.UpdateExpression,operator:D,argument:d,prefix:!0,...this.getItemLocation(l)})}z=this.captureStartMarker();
d=this.inheritCoverGrammar(this.parseLeftHandSideExpression);const f=this.captureStartMarker();if(this.hasLineTerminator)return d;D=this.getMatchingPunctuator(a.updateOperators);if(!D)return d;d.type!==a.Syntax.Identifier&&d.type!==a.Syntax.MemberExpression&&this.throwError(a.ParsingErrorCodes.InvalidExpression,z,f);this.context.isAssignmentTarget||this.tolerateError(a.ParsingErrorCodes.InvalidLeftHandSideInAssignment,l);this.readNextRawToken();this.context.isAssignmentTarget=!1;return this.finalize({type:a.Syntax.UpdateExpression,
operator:D,argument:d,prefix:!1,...this.getItemLocation(l)})}parseUnaryExpression(){const l=this.getMatchingPunctuator(a.unaryOperators);if(l){const D=this.captureStartMarker();this.readNextRawToken();const z=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget=!1;return this.finalize({type:a.Syntax.UnaryExpression,operator:l,argument:z,prefix:!0,...this.getItemLocation(D)})}return this.parseUpdateExpression()}parseBinaryExpression(){var l=this.rawToken,D=this.inheritCoverGrammar(this.parseUnaryExpression);
if(this.rawToken.type!==a.TokenType.Punctuator)return D;var z=this.rawToken.value,d=k(z);if(0===d)return D;this.readNextRawToken();this.context.isAssignmentTarget=!1;l=[l,this.rawToken];var f=this.inheritCoverGrammar(this.parseUnaryExpression);z=[D,z,f];for(var A=[d];this.rawToken.type===a.TokenType.Punctuator&&0<(d=k(this.rawToken.value));){for(;2<z.length&&d<=A[A.length-1];){f=z.pop();const w=z.pop();A.pop();D=z.pop();l.pop();var r=l[l.length-1];r=c(r,r.lineStart);z.push(this.finalize(this.createBinaryOrLogicalExpression(r,
w,D,f)))}z.push(this.rawToken.value);A.push(d);l.push(this.rawToken);this.readNextRawToken();z.push(this.inheritCoverGrammar(this.parseUnaryExpression))}d=z.length-1;D=z[d];for(A=l.pop();1<d;){f=l.pop();if(!f)break;A=c(f,A?.lineStart);D=this.finalize(this.createBinaryOrLogicalExpression(A,z[d-1],z[d-2],D));d-=2;A=f}return D}createBinaryOrLogicalExpression(l,D,z,d){const f=a.logicalOperators.includes(D)?a.Syntax.LogicalExpression:a.Syntax.BinaryExpression;if(f===a.Syntax.BinaryExpression)return{type:f,
operator:D,left:z,right:d,...this.getItemLocation(l)};z.type!==a.Syntax.AssignmentExpression&&z.type!==a.Syntax.UpdateExpression||this.throwError(a.ParsingErrorCodes.InvalidExpression,...m(z));d.type!==a.Syntax.AssignmentExpression&&d.type!==a.Syntax.UpdateExpression||this.throwError(a.ParsingErrorCodes.InvalidExpression,...m(z));return{type:f,operator:D,left:z,right:d,...this.getItemLocation(l)}}parseAssignmentExpression(){const l=this.captureStartMarker(),D=this.inheritCoverGrammar(this.parseBinaryExpression);
var z=this.captureStartMarker();const d=this.getMatchingPunctuator(a.assignmentOperators);if(!d)return D;D.type!==a.Syntax.Identifier&&D.type!==a.Syntax.MemberExpression&&this.throwError(a.ParsingErrorCodes.InvalidExpression,l,z);this.context.isAssignmentTarget||this.tolerateError(a.ParsingErrorCodes.InvalidLeftHandSideInAssignment,l);this.matchPunctuator("\x3d")||(this.context.isAssignmentTarget=!1);this.readNextRawToken();z=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize({type:a.Syntax.AssignmentExpression,
left:D,operator:d,right:z,...this.getItemLocation(l)})}parseExpression(){return this.isolateCoverGrammar(this.parseAssignmentExpression)}parseStatements(l){const D=[];for(;this.rawToken.type!==a.TokenType.EOF&&!this.matchPunctuator(l);){const z=this.parseStatementListItem();a.isEmptyStatement(z)||D.push(z)}return D}parseStatementListItem(){this.context.isAssignmentTarget=!0;return this.matchKeyword(a.Keywords.Function)?this.parseFunctionDeclaration():this.matchKeyword(a.Keywords.Export)?this.parseExportDeclaration():
this.matchKeyword(a.Keywords.Import)?this.parseImportDeclaration():this.parseStatement()}parseBlock(){const l=this.captureStartMarker();this.expectPunctuator("{");const D=this.parseStatements("}");this.expectPunctuator("}");return this.finalize({type:a.Syntax.BlockStatement,body:D,...this.getItemLocation(l)})}parseObjectStatement(){const l=this.captureStartMarker(),D=this.parseObjectExpression();return this.finalize({type:a.Syntax.ExpressionStatement,expression:D,...this.getItemLocation(l)})}parseBlockOrObjectStatement(){return this.context.curlyParsingType===
p.AsObject||this.peekAhead(l=>{let D=l();if(D.type!==a.TokenType.Identifier&&D.type!==a.TokenType.StringLiteral)return!1;D=l();return D.type!==a.TokenType.Punctuator||":"!==D.value?!1:!0})?this.parseObjectStatement():this.parseBlock()}parseIdentifier(){const l=this.rawToken;if(l.type!==a.TokenType.Identifier)return null;const D=this.captureStartMarker();this.readNextRawToken();return this.finalize({type:a.Syntax.Identifier,name:l.value,...this.getItemLocation(D)})}parseVariableDeclarator(){const l=
this.captureStartMarker(),D=this.parseIdentifier();D||this.throwUnexpectedToken({code:a.ParsingErrorCodes.IdentiferExpected});let z=null;if(this.matchPunctuator("\x3d")){this.readNextRawToken();const d=this.rawToken;try{z=this.isolateCoverGrammar(this.parseAssignmentExpression)}catch(f){this.throwUnexpectedToken({rawToken:d,code:a.ParsingErrorCodes.InvalidVariableAssignment})}}return this.finalize({type:a.Syntax.VariableDeclarator,id:D,init:z,...this.getItemLocation(l)})}parseVariableDeclarationList(){const l=
[this.parseVariableDeclarator()];for(;this.matchPunctuator(",");)this.readNextRawToken(),l.push(this.parseVariableDeclarator());return l}parseVariableDeclaration(){const l=this.captureStartMarker();this.expectKeyword(a.Keywords.Var);const D=this.parseVariableDeclarationList();this.consumeSemicolon();return this.finalize({type:a.Syntax.VariableDeclaration,declarations:D,kind:"var",...this.getItemLocation(l)})}parseEmptyStatement(){const l=this.captureStartMarker();this.expectPunctuator(";");return this.finalize({type:a.Syntax.EmptyStatement,
...this.getItemLocation(l)})}parseExpressionStatement(){const l=this.captureStartMarker(),D=this.parseExpression();this.consumeSemicolon();return this.finalize({type:a.Syntax.ExpressionStatement,expression:D,...this.getItemLocation(l)})}parseIfClause(){return this.withBlockContext(g.IfClause,this.parseStatement)}parseIfStatement(){const l=this.captureStartMarker();this.expectKeyword(a.Keywords.If);this.expectPunctuator("(");var D=this.captureStartMarker();const z=this.parseExpression();var d=this.captureStartMarker();
this.expectPunctuator(")");z.type!==a.Syntax.AssignmentExpression&&z.type!==a.Syntax.UpdateExpression||this.throwError(a.ParsingErrorCodes.InvalidExpression,D,d);D=this.parseIfClause();d=null;this.matchKeyword(a.Keywords.Else)&&(this.readNextRawToken(),d=this.parseIfClause());return this.finalize({type:a.Syntax.IfStatement,test:z,consequent:D,alternate:d,...this.getItemLocation(l)})}parseWhileStatement(){const l=this.captureStartMarker();this.expectKeyword(a.Keywords.While);this.expectPunctuator("(");
var D=this.captureStartMarker();const z=this.parseExpression(),d=this.captureStartMarker();this.expectPunctuator(")");z.type!==a.Syntax.AssignmentExpression&&z.type!==a.Syntax.UpdateExpression||this.throwError(a.ParsingErrorCodes.InvalidExpression,D,d);D=this.withBlockContext(g.WhileLoop,this.parseStatement);return this.finalize({type:a.Syntax.WhileStatement,test:z,body:D,...this.getItemLocation(l)})}parseForStatement(){let l=null,D=null,z=null,d=null,f=null;const A=this.captureStartMarker();this.expectKeyword(a.Keywords.For);
this.expectPunctuator("(");if(this.matchPunctuator(";"))this.readNextRawToken();else if(this.matchKeyword(a.Keywords.Var)){var r=this.captureStartMarker();this.readNextRawToken();var w=this.parseVariableDeclarationList();1===w.length&&this.matchKeyword(a.Keywords.In)?(w[0].init&&this.throwError(a.ParsingErrorCodes.ForInOfLoopInitializer,r),d=this.finalize({type:a.Syntax.VariableDeclaration,declarations:w,kind:"var",...this.getItemLocation(r)}),this.readNextRawToken(),f=this.parseExpression()):(this.matchKeyword(a.Keywords.In)&&
this.throwError(a.ParsingErrorCodes.InvalidLeftHandSideInForIn,r),l=this.finalize({type:a.Syntax.VariableDeclaration,declarations:w,kind:"var",...this.getItemLocation(r)}),this.expectPunctuator(";"))}else r=this.context.isAssignmentTarget,w=this.captureStartMarker(),l=this.inheritCoverGrammar(this.parseAssignmentExpression),this.matchKeyword(a.Keywords.In)?(this.context.isAssignmentTarget||this.tolerateError(a.ParsingErrorCodes.InvalidLeftHandSideInForIn,w),l.type!==a.Syntax.Identifier&&this.throwError(a.ParsingErrorCodes.InvalidLeftHandSideInForIn,
w),this.readNextRawToken(),d=l,f=this.parseExpression(),l=null):(this.context.isAssignmentTarget=r,this.expectPunctuator(";"));d||(this.matchPunctuator(";")||(D=this.isolateCoverGrammar(this.parseExpression)),this.expectPunctuator(";"),this.matchPunctuator(")")||(z=this.isolateCoverGrammar(this.parseExpression)));this.expectPunctuator(")");r=this.withBlockContext(g.ForLoop,()=>this.isolateCoverGrammar(this.parseStatement));return d&&f?this.finalize({type:a.Syntax.ForInStatement,left:d,right:f,body:r,
...this.getItemLocation(A)}):this.finalize({type:a.Syntax.ForStatement,init:l,test:D,update:z,body:r,...this.getItemLocation(A)})}parseContinueStatement(){const l=this.captureStartMarker();this.expectKeyword(a.Keywords.Continue);this.consumeSemicolon();return this.finalize({type:a.Syntax.ContinueStatement,...this.getItemLocation(l)})}parseBreakStatement(){const l=this.captureStartMarker();this.expectKeyword(a.Keywords.Break);this.consumeSemicolon();return this.finalize({type:a.Syntax.BreakStatement,
...this.getItemLocation(l)})}parseReturnStatement(){const l=this.captureStartMarker();this.expectKeyword(a.Keywords.Return);const D=(this.matchPunctuator(";")||this.matchPunctuator("}")||this.hasLineTerminator||this.rawToken.type===a.TokenType.EOF)&&this.rawToken.type!==a.TokenType.StringLiteral&&this.rawToken.type!==a.TokenType.Template?null:this.parseExpression();this.consumeSemicolon();return this.finalize({type:a.Syntax.ReturnStatement,argument:D,...this.getItemLocation(l)})}parseStatement(){switch(this.rawToken.type){case a.TokenType.BooleanLiteral:case a.TokenType.NullLiteral:case a.TokenType.NumericLiteral:case a.TokenType.StringLiteral:case a.TokenType.Template:case a.TokenType.Identifier:return this.parseExpressionStatement();
case a.TokenType.Punctuator:return"{"===this.rawToken.value?this.parseBlockOrObjectStatement():"("===this.rawToken.value?this.parseExpressionStatement():";"===this.rawToken.value?this.parseEmptyStatement():this.parseExpressionStatement();case a.TokenType.Keyword:switch(this.rawToken.value.toLowerCase()){case a.Keywords.Break:return this.parseBreakStatement();case a.Keywords.Continue:return this.parseContinueStatement();case a.Keywords.For:return this.parseForStatement();case a.Keywords.Function:return this.parseFunctionDeclaration();
case a.Keywords.If:return this.parseIfStatement();case a.Keywords.Return:return this.parseReturnStatement();case a.Keywords.Var:return this.parseVariableDeclaration();case a.Keywords.While:return this.parseWhileStatement();default:return this.parseExpressionStatement()}default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseFormalParameters(){const l=[];this.expectPunctuator("(");if(!this.matchPunctuator(")"))for(;this.rawToken.type!==a.TokenType.EOF;){const D=this.parseIdentifier();
D||this.throwUnexpectedToken({rawToken:this.rawToken,code:a.ParsingErrorCodes.IdentiferExpected});l.push(D);if(this.matchPunctuator(")"))break;this.expectPunctuator(",");if(this.matchPunctuator(")"))break}this.expectPunctuator(")");return l}parseFunctionDeclaration(){(this.context.blockContext&g.Function)===g.Function&&this.throwUnexpectedToken({code:a.ParsingErrorCodes.NoFunctionInsideFunction});(this.context.blockContext&g.WhileLoop)!==g.WhileLoop&&(this.context.blockContext&g.IfClause)!==g.IfClause||
this.throwUnexpectedToken({code:a.ParsingErrorCodes.NoFunctionInsideBlock});const l=this.captureStartMarker();this.expectKeyword(a.Keywords.Function);const D=this.parseIdentifier();D||this.throwUnexpectedToken({code:a.ParsingErrorCodes.InvalidFunctionIdentifier});const z=this.parseFormalParameters(),d=this.context.blockContext;this.context.blockContext|=g.Function;const f=this.parseBlock();this.context.blockContext=d;return this.finalize({type:a.Syntax.FunctionDeclaration,id:D,params:z,body:f,...this.getItemLocation(l)})}parseScript(){var l=
this.captureStartMarker();const D=this.parseStatements();l=this.finalize({type:a.Syntax.Program,body:D,...this.getItemLocation(l)});this.options.tokens&&(l.tokens=this.tokens);this.options.tolerant&&(l.errors=this.errorHandler.errors);return l}parseExportDeclaration(){this.context.blockContext!==g.None&&this.throwUnexpectedToken({code:a.ParsingErrorCodes.ModuleExportRootOnly});let l=null;const D=this.captureStartMarker();this.expectKeyword(a.Keywords.Export);this.matchKeyword(a.Keywords.Var)?l=this.parseVariableDeclaration():
this.matchKeyword("function")?l=this.parseFunctionDeclaration():this.throwUnexpectedToken({code:a.ParsingErrorCodes.InvalidExpression});return this.finalize({type:a.Syntax.ExportNamedDeclaration,declaration:l,specifiers:[],source:null,...this.getItemLocation(D)})}parseModuleSpecifier(){const l=this.captureStartMarker(),D=this.rawToken;if(D.type===a.TokenType.StringLiteral)return this.readNextRawToken(),this.finalize({type:a.Syntax.Literal,value:D.value,raw:this.getSourceValue(D),isString:!0,...this.getItemLocation(l)});
this.throwError(a.ParsingErrorCodes.InvalidModuleUri,l)}parseDefaultSpecifier(){const l=this.captureStartMarker(),D=this.parseIdentifier();D||this.throwUnexpectedToken({code:a.ParsingErrorCodes.IdentiferExpected});return this.finalize({type:a.Syntax.ImportDefaultSpecifier,local:D,...this.getItemLocation(l)})}parseImportDeclaration(){this.context.blockContext!==g.None&&this.throwUnexpectedToken({code:a.ParsingErrorCodes.ModuleImportRootOnly});const l=this.captureStartMarker();this.expectKeyword(a.Keywords.Import);
const D=this.parseDefaultSpecifier();this.expectContextualKeyword(a.Keywords.From);const z=this.parseModuleSpecifier();return this.finalize({type:a.Syntax.ImportDeclaration,specifiers:[D],source:z,...this.getItemLocation(l)})}}u.Parser=F;u.binaryOperatorPrecedence=k;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/comment-handler":function(){define(["exports","./types"],function(u,M){function C(a,c){return c?c.loc.end.line===a.loc.start.line&&c.loc.end.column<=a.loc.start.column:
!1}class b{constructor(){this.comments=[];this._nodeStack=[];this._newComments=[]}insertInnerComments(a){if(M.isBlockStatement(a)&&0===a.body.length){var c=[];for(let m=this._newComments.length-1;0<=m;--m){const k=this._newComments[m];a.range[1]>=k.range[0]&&(c.unshift(k),this._newComments.splice(m,1))}c.length&&(a.innerComments=c)}}attachTrailingComments(a){if(a){var c=this._nodeStack[this._nodeStack.length-1];if(M.isBlockStatement(a)&&c.range[0]>=a.range[0]&&c.range[1]<=a.range[1])for(var m=this._newComments.length-
1;0<=m;--m){var k=this._newComments[m];k.range[0]>=a.range[0]&&k.range[1]<=a.range[1]&&(c.trailingComments=[...(c.trailingComments??[]),k],this._newComments.splice(m,1))}m=[];if(0<this._newComments.length)for(k=this._newComments.length-1;0<=k;--k){const g=this._newComments[k];C(g,c)?(c.trailingComments=[...(c.trailingComments??[]),g],this._newComments.splice(k,1)):C(g,a)&&(m.unshift(g),this._newComments.splice(k,1))}c?.trailingComments&&C(c.trailingComments[0],a)&&(m=[...m,...c.trailingComments],
delete c.trailingComments);0<m.length&&(a.trailingComments=m)}}attachLeadingComments(a){if(a){for(var c;0<this._nodeStack.length;){var m=this._nodeStack[this._nodeStack.length-1];if(a.range[0]<=m.range[0])c=m,this._nodeStack.pop();else break}m=[];var k=[];if(c){var g=c.leadingComments?.length??0;for(--g;0<=g;--g){const p=c.leadingComments[g];a.range[0]>=p.range[1]?(m.unshift(p),c.leadingComments.splice(g,1)):M.isVariableDeclarator(a)&&!M.isBlockComment(p)&&(k.unshift(p),c.leadingComments.splice(g,
1))}0===c.leadingComments?.length&&delete c.leadingComments;m.length&&(a.leadingComments=m);k.length&&(a.trailingComments=[...k,...(a.trailingComments??[])])}else{for(c=this._newComments.length-1;0<=c;--c)k=this._newComments[c],a.range[0]>=k.range[0]&&(m.unshift(k),this._newComments.splice(c,1));m.length&&(a.leadingComments=m)}}}attachComments(a){if(M.isProgram(a)&&0<a.body.length){const c=this._nodeStack[this._nodeStack.length-1];c?(c.trailingComments=[...(c.trailingComments??[]),...this._newComments],
this._newComments.length=0,this._nodeStack.pop()):(a.trailingComments=[...this._newComments],this._newComments.length=0)}else this.attachTrailingComments(a),this.attachLeadingComments(a),this.insertInnerComments(a),this._nodeStack.push(a)}collectComment(a){this.comments.push(a);this._newComments.push(a)}}u.CommentHandler=b;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/types":function(){define(["exports"],function(u){u.Keywords=void 0;(function(b){b.Break="break";
b.Continue="continue";b.Else="else";b.False="false";b.For="for";b.From="from";b.Function="function";b.If="if";b.Import="import";b.Export="export";b.In="in";b.Null="null";b.Return="return";b.True="true";b.Var="var";b.While="while"})(u.Keywords||(u.Keywords={}));u.Syntax=void 0;(function(b){b.AssignmentExpression="AssignmentExpression";b.ArrayExpression="ArrayExpression";b.BlockComment="BlockComment";b.BlockStatement="BlockStatement";b.BinaryExpression="BinaryExpression";b.BreakStatement="BreakStatement";
b.CallExpression="CallExpression";b.ContinueStatement="ContinueStatement";b.EmptyStatement="EmptyStatement";b.ExpressionStatement="ExpressionStatement";b.ExportNamedDeclaration="ExportNamedDeclaration";b.ExportSpecifier="ExportSpecifier";b.ForStatement="ForStatement";b.ForInStatement="ForInStatement";b.FunctionDeclaration="FunctionDeclaration";b.Identifier="Identifier";b.IfStatement="IfStatement";b.ImportDeclaration="ImportDeclaration";b.ImportDefaultSpecifier="ImportDefaultSpecifier";b.LineComment=
"LineComment";b.Literal="Literal";b.LogicalExpression="LogicalExpression";b.MemberExpression="MemberExpression";b.ObjectExpression="ObjectExpression";b.Program="Program";b.Property="Property";b.ReturnStatement="ReturnStatement";b.TemplateElement="TemplateElement";b.TemplateLiteral="TemplateLiteral";b.UnaryExpression="UnaryExpression";b.UpdateExpression="UpdateExpression";b.VariableDeclaration="VariableDeclaration";b.VariableDeclarator="VariableDeclarator";b.WhileStatement="WhileStatement"})(u.Syntax||
(u.Syntax={}));u.TokenType=void 0;(function(b){b[b.Unknown=0]="Unknown";b[b.BooleanLiteral=1]="BooleanLiteral";b[b.EOF=2]="EOF";b[b.Identifier=3]="Identifier";b[b.Keyword=4]="Keyword";b[b.NullLiteral=5]="NullLiteral";b[b.NumericLiteral=6]="NumericLiteral";b[b.Punctuator=7]="Punctuator";b[b.StringLiteral=8]="StringLiteral";b[b.Template=10]="Template"})(u.TokenType||(u.TokenType={}));u.ParsingErrorCodes=void 0;(function(b){b.InvalidModuleUri="InvalidModuleUri";b.ForInOfLoopInitializer="ForInOfLoopInitializer";
b.IdentiferExpected="IdentiferExpected";b.InvalidEscapedReservedWord="InvalidEscapedReservedWord";b.InvalidExpression="InvalidExpression";b.InvalidFunctionIdentifier="InvalidFunctionIdentifier";b.InvalidHexEscapeSequence="InvalidHexEscapeSequence";b.InvalidLeftHandSideInAssignment="InvalidLeftHandSideInAssignment";b.InvalidLeftHandSideInForIn="InvalidLeftHandSideInForIn";b.InvalidTemplateHead="InvalidTemplateHead";b.InvalidVariableAssignment="InvalidVariableAssignment";b.KeyMustBeString="KeyMustBeString";
b.NoFunctionInsideBlock="NoFunctionInsideBlock";b.NoFunctionInsideFunction="NoFunctionInsideFunction";b.ModuleExportRootOnly="ModuleExportRootOnly";b.ModuleImportRootOnly="ModuleImportRootOnly";b.PunctuatorExpected="PunctuatorExpected";b.TemplateOctalLiteral="TemplateOctalLiteral";b.UnexpectedBoolean="UnexpectedBoolean";b.UnexpectedEndOfScript="UnexpectedEndOfScript";b.UnexpectedIdentifier="UnexpectedIdentifier";b.UnexpectedKeyword="UnexpectedKeyword";b.UnexpectedNull="UnexpectedNull";b.UnexpectedNumber=
"UnexpectedNumber";b.UnexpectedPunctuator="UnexpectedPunctuator";b.UnexpectedString="UnexpectedString";b.UnexpectedTemplate="UnexpectedTemplate";b.UnexpectedToken="UnexpectedToken"})(u.ParsingErrorCodes||(u.ParsingErrorCodes={}));const M={[u.ParsingErrorCodes.InvalidModuleUri]:"Module uri must be a text literal.",[u.ParsingErrorCodes.ForInOfLoopInitializer]:"for-in loop variable declaration may not have an initializer.",[u.ParsingErrorCodes.IdentiferExpected]:"'${value}' is an invalid identifier.",
[u.ParsingErrorCodes.InvalidEscapedReservedWord]:"Keyword cannot contain escaped characters.",[u.ParsingErrorCodes.InvalidExpression]:"Invalid expression.",[u.ParsingErrorCodes.InvalidFunctionIdentifier]:"'${value}' is an invalid function identifier.",[u.ParsingErrorCodes.InvalidHexEscapeSequence]:"Invalid hexadecimal escape sequence.",[u.ParsingErrorCodes.InvalidLeftHandSideInAssignment]:"Invalid left-hand side in assignment.",[u.ParsingErrorCodes.InvalidLeftHandSideInForIn]:"Invalid left-hand side in for-in.",
[u.ParsingErrorCodes.InvalidTemplateHead]:"Invalid template structure.",[u.ParsingErrorCodes.InvalidVariableAssignment]:"Invalid variable assignment.",[u.ParsingErrorCodes.KeyMustBeString]:"Object property keys must be a word starting with a letter.",[u.ParsingErrorCodes.NoFunctionInsideBlock]:"Functions cannot be declared inside of code blocks.",[u.ParsingErrorCodes.NoFunctionInsideFunction]:"Functions cannot be declared inside another function.",[u.ParsingErrorCodes.ModuleExportRootOnly]:"Module exports cannot be declared inside of code blocks.",
[u.ParsingErrorCodes.ModuleImportRootOnly]:"Module import cannot be declared inside of code blocks.",[u.ParsingErrorCodes.PunctuatorExpected]:"'${value}' expected.",[u.ParsingErrorCodes.TemplateOctalLiteral]:"Octal literals are not allowed in template literals.",[u.ParsingErrorCodes.UnexpectedBoolean]:"Unexpected boolean literal.",[u.ParsingErrorCodes.UnexpectedEndOfScript]:"Unexpected end of Arcade expression.",[u.ParsingErrorCodes.UnexpectedIdentifier]:"Unexpected identifier.",[u.ParsingErrorCodes.UnexpectedKeyword]:"Unexpected keyword.",
[u.ParsingErrorCodes.UnexpectedNull]:"Unexpected null literal.",[u.ParsingErrorCodes.UnexpectedNumber]:"Unexpected number.",[u.ParsingErrorCodes.UnexpectedPunctuator]:"Unexpected ponctuator.",[u.ParsingErrorCodes.UnexpectedString]:"Unexpected text literal.",[u.ParsingErrorCodes.UnexpectedTemplate]:"Unexpected quasi '${value}'.",[u.ParsingErrorCodes.UnexpectedToken]:"Unexpected token '${value}'."};class C extends Error{constructor({code:b,index:a,line:c,column:m,len:k=0,description:g,data:p}){super(`${g??
b}`);this.declaredRootClass="esri.arcade.lib.parsingerror";this.name="ParsingError";this.code=b;this.index=a;this.line=c;this.column=m;this.len=k;this.data=p;this.description=g;this.range={start:{line:c,column:m-1},end:{line:c,column:m+k}};Error.captureStackTrace?.(this,C)}}u.ParsingError=C;u.assignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");u.binaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");u.isArrayExpression=
function(b){return b?.type===u.Syntax.ArrayExpression};u.isAssignmentExpression=function(b){return b?.type===u.Syntax.AssignmentExpression};u.isBinaryExpression=function(b){return b?.type===u.Syntax.BinaryExpression};u.isBlockComment=function(b){return b?.type===u.Syntax.BlockComment};u.isBlockStatement=function(b){return b?.type===u.Syntax.BlockStatement};u.isBreakStatement=function(b){return b?.type===u.Syntax.BreakStatement};u.isCallExpression=function(b){return b?.type===u.Syntax.CallExpression};
u.isContinueStatement=function(b){return b?.type===u.Syntax.ContinueStatement};u.isEmptyStatement=function(b){return b?.type===u.Syntax.EmptyStatement};u.isExpression=function(b){switch(b?.type){case u.Syntax.ArrayExpression:case u.Syntax.AssignmentExpression:case u.Syntax.BinaryExpression:case u.Syntax.CallExpression:case u.Syntax.Identifier:case u.Syntax.Literal:case u.Syntax.LogicalExpression:case u.Syntax.MemberExpression:case u.Syntax.ObjectExpression:case u.Syntax.TemplateLiteral:case u.Syntax.UpdateExpression:case u.Syntax.UnaryExpression:return!0;
default:return!1}};u.isExpressionStatement=function(b){return b?.type===u.Syntax.ExpressionStatement};u.isForInStatement=function(b){return b?.type===u.Syntax.ForInStatement};u.isForStatement=function(b){return b?.type===u.Syntax.ForStatement};u.isFunctionDeclaration=function(b){return b?.type===u.Syntax.FunctionDeclaration};u.isIdentifier=function(b){return b?.type===u.Syntax.Identifier};u.isIfStatement=function(b){return b?.type===u.Syntax.IfStatement};u.isLiteral=function(b){return b?.type===u.Syntax.Literal};
u.isLogicalExpression=function(b){return b?.type===u.Syntax.LogicalExpression};u.isMemberExpression=function(b){return b?.type===u.Syntax.MemberExpression};u.isObjectExpression=function(b){return b?.type===u.Syntax.ObjectExpression};u.isProgram=function(b){return b?.type===u.Syntax.Program};u.isProperty=function(b){return b?.type===u.Syntax.Property};u.isReturnStatement=function(b){return b?.type===u.Syntax.ReturnStatement};u.isStatement=function(b){switch(b?.type){case u.Syntax.BlockStatement:case u.Syntax.BreakStatement:case u.Syntax.ContinueStatement:case u.Syntax.EmptyStatement:case u.Syntax.ExpressionStatement:case u.Syntax.ForInStatement:case u.Syntax.ForStatement:case u.Syntax.FunctionDeclaration:case u.Syntax.IfStatement:case u.Syntax.ReturnStatement:case u.Syntax.VariableDeclaration:return!0;
default:return!1}};u.isTemplateElement=function(b){return b?.type===u.Syntax.TemplateElement};u.isTemplateLiteral=function(b){return b?.type===u.Syntax.TemplateLiteral};u.isUnaryExpression=function(b){return b?.type===u.Syntax.UnaryExpression};u.isUpdateExpression=function(b){return b?.type===u.Syntax.UpdateExpression};u.isVariableDeclaration=function(b){return b?.type===u.Syntax.VariableDeclaration};u.isVariableDeclarator=function(b){return b?.type===u.Syntax.VariableDeclarator};u.logicalOperators=
["||","\x26\x26"];u.operatorPrecedence={"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":10,"/":10,"%":10};u.parsingErrorMessages=M;u.rokenNames="Unknown Boolean \x3cend\x3e Identifier Keyword Null Numeric Punctuator String RegularExpression Template".split(" ");u.unaryOperators=["-","+","!","~"];u.updateOperators=["++","--"];Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/lib/error-handler":function(){define(["exports","./types"],function(u,M){function C(a,c){a=M.parsingErrorMessages[a];return c?a.replaceAll(/\${(.*?)}/g,(m,k)=>c[k]?.toString()??""):a}class b{constructor(a=!1){this.tolerant=a;this.errors=[]}recordError(a){this.errors.push(a)}tolerate(a){if(this.tolerant)this.recordError(a);else throw a;}throwError(a){a.description=a.description??C(a.code,a.data);throw new M.ParsingError(a);}tolerateError(a){a.description=a.description??C(a.code,a.data);
a=new M.ParsingError(a);if(this.tolerant)this.recordError(a);else throw a;}}u.ErrorHandler=b;u.formatErrorDescription=C;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/scanner":function(){define(["exports","./assert","./character","./types"],function(u,M,C,b){const a=[[],[],[]];b.updateOperators.forEach(m=>a[m.length-1].push(m));b.unaryOperators.forEach(m=>a[m.length-1].push(m));b.logicalOperators.forEach(m=>a[m.length-1].push(m));b.assignmentOperators.forEach(m=>
a[m.length-1].push(m));b.binaryOperators.forEach(m=>a[m.length-1].push(m));class c{constructor(m,k){this.source=m;this.errorHandler=k;this._length=m.length;this.index=0;this.lineNumber=1;this.lineStart=0;this.curlyStack=[]}saveState(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}}restoreState(m){this.index=m.index;this.lineNumber=m.lineNumber;this.lineStart=m.lineStart;this.curlyStack=m.curlyStack}eof(){return this.index>=this._length}throwUnexpectedToken(m=
b.ParsingErrorCodes.UnexpectedToken){this.errorHandler.throwError({code:m,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})}tolerateUnexpectedToken(m=b.ParsingErrorCodes.UnexpectedToken){this.errorHandler.tolerateError({code:m,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})}skipSingleLineComment(m){const k=[],g=this.index-m,p={start:{line:this.lineNumber,column:this.index-this.lineStart-m},end:{line:0,column:0}};for(;!this.eof();){const F=this.source.charCodeAt(this.index);
++this.index;if(C.Character.isLineTerminator(F))return p&&(p.end={line:this.lineNumber,column:this.index-this.lineStart-1},k.push({multiLine:!1,start:g+m,end:this.index-1,range:[g,this.index-1],loc:p})),13===F&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,k}p&&(p.end={line:this.lineNumber,column:this.index-this.lineStart},k.push({multiLine:!1,start:g+m,end:this.index,range:[g,this.index],loc:p}));return k}skipMultiLineComment(){const m=[],k=this.index-
2,g={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}};for(;!this.eof();){const p=this.source.charCodeAt(this.index);if(C.Character.isLineTerminator(p))13===p&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===p&&47===this.source.charCodeAt(this.index+1))return this.index+=2,g&&(g.end={line:this.lineNumber,column:this.index-this.lineStart},m.push({multiLine:!0,start:k+2,end:this.index-
2,range:[k,this.index],loc:g})),m;++this.index}}g&&(g.end={line:this.lineNumber,column:this.index-this.lineStart},m.push({multiLine:!0,start:k+2,end:this.index,range:[k,this.index],loc:g}));this.tolerateUnexpectedToken();return m}scanComments(){let m=[];for(;!this.eof();){var k=this.source.charCodeAt(this.index);if(C.Character.isWhiteSpace(k))++this.index;else if(C.Character.isLineTerminator(k))++this.index,13===k&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=
this.index;else if(47===k)if(k=this.source.charCodeAt(this.index+1),47===k)this.index+=2,k=this.skipSingleLineComment(2),m=[...m,...k];else if(42===k)this.index+=2,k=this.skipMultiLineComment(),m=[...m,...k];else break;else break}return m}isKeyword(m){m=m.toLowerCase();switch(m.length){case 2:return m===b.Keywords.If||m===b.Keywords.In;case 3:return m===b.Keywords.Var||m===b.Keywords.For;case 4:return m===b.Keywords.Else;case 5:return m===b.Keywords.Break||m===b.Keywords.While;case 6:return m===b.Keywords.Return||
m===b.Keywords.Import||m===b.Keywords.Export;case 8:return m===b.Keywords.Function||m===b.Keywords.Continue;default:return!1}}codePointAt(m){let k=this.source.charCodeAt(m);55296<=k&&56319>=k&&(m=this.source.charCodeAt(m+1),56320<=m&&57343>=m&&(k=1024*(k-55296)+m-56320+65536));return k}scanHexEscape(m){m="u"===m?4:2;let k=0;for(let g=0;g<m;++g)if(!this.eof()&&C.Character.isHexDigit(this.source.charCodeAt(this.index)))k=16*k+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;
return String.fromCharCode(k)}scanUnicodeCodePointEscape(){let m=this.source[this.index],k=0;for("}"===m&&this.throwUnexpectedToken();!this.eof();){m=this.source[this.index++];if(!C.Character.isHexDigit(m.charCodeAt(0)))break;k=16*k+"0123456789abcdef".indexOf(m.toLowerCase())}(1114111<k||"}"!==m)&&this.throwUnexpectedToken();return C.Character.fromCodePoint(k)}getIdentifier(){const m=this.index++;for(;!this.eof();){const k=this.source.charCodeAt(this.index);if(92===k||55296<=k&&57343>k)return this.index=
m,this.getComplexIdentifier();if(C.Character.isIdentifierPart(k))++this.index;else break}return this.source.slice(m,this.index)}getComplexIdentifier(){let m=this.codePointAt(this.index),k=C.Character.fromCodePoint(m);this.index+=k.length;let g;92===m&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,g=this.scanUnicodeCodePointEscape()):(g=this.scanHexEscape("u"),null!==g&&"\\"!==g&&C.Character.isIdentifierStart(g.charCodeAt(0))||
this.throwUnexpectedToken()),k=g);for(;!this.eof();){m=this.codePointAt(this.index);if(!C.Character.isIdentifierPart(m))break;g=C.Character.fromCodePoint(m);k+=g;this.index+=g.length;92===m&&(k=k.substring(0,k.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,g=this.scanUnicodeCodePointEscape()):(g=this.scanHexEscape("u"),null!==g&&"\\"!==g&&C.Character.isIdentifierPart(g.charCodeAt(0))||this.throwUnexpectedToken()),
k+=g)}return k}octalToDecimal(m){let k="0"!==m,g="01234567".indexOf(m);!this.eof()&&C.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(k=!0,g=8*g+"01234567".indexOf(this.source[this.index++]),"0123".includes(m)&&!this.eof()&&C.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(g=8*g+"01234567".indexOf(this.source[this.index++])));return{code:g,octal:k}}scanIdentifier(){let m;const k=this.index,g=92===this.source.charCodeAt(k)?this.getComplexIdentifier():this.getIdentifier();
m=1===g.length?b.TokenType.Identifier:this.isKeyword(g)?b.TokenType.Keyword:g.toLowerCase()===b.Keywords.Null?b.TokenType.NullLiteral:g.toLowerCase()===b.Keywords.True||g.toLowerCase()===b.Keywords.False?b.TokenType.BooleanLiteral:b.TokenType.Identifier;if(m!==b.TokenType.Identifier&&k+g.length!==this.index){const p=this.index;this.index=k;this.tolerateUnexpectedToken(b.ParsingErrorCodes.InvalidEscapedReservedWord);this.index=p}return{type:m,value:g,lineNumber:this.lineNumber,lineStart:this.lineStart,
start:k,end:this.index}}scanPunctuator(){const m=this.index;let k=this.source[this.index];switch(k){case "(":case "{":"{"===k&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:for(let g=a.length;0<g;g--)if(k=this.source.substring(this.index,this.index+g),a[g-1].includes(k)){this.index+=g;break}}this.index===m&&this.throwUnexpectedToken();
return{type:b.TokenType.Punctuator,value:k,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}}scanHexLiteral(m){let k="";for(;!this.eof()&&C.Character.isHexDigit(this.source.charCodeAt(this.index));)k+=this.source[this.index++];0===k.length&&this.throwUnexpectedToken();C.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:b.TokenType.NumericLiteral,value:parseInt("0x"+k,16),lineNumber:this.lineNumber,lineStart:this.lineStart,
start:m,end:this.index}}scanBinaryLiteral(m){let k="";for(;!this.eof();){var g=this.source[this.index];if("0"!==g&&"1"!==g)break;k+=this.source[this.index++]}0===k.length&&this.throwUnexpectedToken();this.eof()||(g=this.source.charCodeAt(this.index),(C.Character.isIdentifierStart(g)||C.Character.isDecimalDigit(g))&&this.throwUnexpectedToken());return{type:b.TokenType.NumericLiteral,value:parseInt(k,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}}scanOctalLiteral(m,k){let g=
"",p=!1;C.Character.isOctalDigit(m.charCodeAt(0))?(p=!0,g="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&C.Character.isOctalDigit(this.source.charCodeAt(this.index));)g+=this.source[this.index++];p||0!==g.length||this.throwUnexpectedToken();(C.Character.isIdentifierStart(this.source.charCodeAt(this.index))||C.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();return{type:b.TokenType.NumericLiteral,value:parseInt(g,8),lineNumber:this.lineNumber,
lineStart:this.lineStart,start:k,end:this.index}}scanNumericLiteral(){const m=this.index;let k=this.source[m];M.assert(C.Character.isDecimalDigit(k.charCodeAt(0))||"."===k,"Numeric literal must start with a decimal digit or a decimal point");let g="";if("."!==k){g=this.source[this.index++];k=this.source[this.index];if("0"===g){if("x"===k||"X"===k)return++this.index,this.scanHexLiteral(m);if("b"===k||"B"===k)return++this.index,this.scanBinaryLiteral(m);if("o"===k||"O"===k)return this.scanOctalLiteral(k,
m)}for(;C.Character.isDecimalDigit(this.source.charCodeAt(this.index));)g+=this.source[this.index++];k=this.source[this.index]}if("."===k){for(g+=this.source[this.index++];C.Character.isDecimalDigit(this.source.charCodeAt(this.index));)g+=this.source[this.index++];k=this.source[this.index]}if("e"===k||"E"===k){g+=this.source[this.index++];k=this.source[this.index];if("+"===k||"-"===k)g+=this.source[this.index++];if(C.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;C.Character.isDecimalDigit(this.source.charCodeAt(this.index));)g+=
this.source[this.index++];else this.throwUnexpectedToken()}C.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:b.TokenType.NumericLiteral,value:parseFloat(g),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}}scanStringLiteral(){const m=this.index;let k=this.source[m];M.assert("'"===k||'"'===k,"String literal must starts with a quote");++this.index;let g="";for(;!this.eof();){var p=this.source[this.index++];if(p===k){k=
"";break}if("\\"===p)if((p=this.source[this.index++])&&C.Character.isLineTerminator(p.charCodeAt(0)))++this.lineNumber,"\r"===p&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(p){case "u":"{"===this.source[this.index]?(++this.index,g+=this.scanUnicodeCodePointEscape()):(p=this.scanHexEscape(p),null===p&&this.throwUnexpectedToken(),g+=p);break;case "x":p=this.scanHexEscape(p);null===p&&this.throwUnexpectedToken(b.ParsingErrorCodes.InvalidHexEscapeSequence);g+=p;
break;case "n":g+="\n";break;case "r":g+="\r";break;case "t":g+="\t";break;case "b":g+="\b";break;case "f":g+="\f";break;case "v":g+="\v";break;case "8":case "9":g+=p;this.tolerateUnexpectedToken();break;default:p&&C.Character.isOctalDigit(p.charCodeAt(0))?(p=this.octalToDecimal(p),g+=String.fromCharCode(p.code)):g+=p}else if(C.Character.isLineTerminator(p.charCodeAt(0)))break;else g+=p}""!==k&&(this.index=m,this.throwUnexpectedToken());return{type:b.TokenType.StringLiteral,value:g,lineNumber:this.lineNumber,
lineStart:this.lineStart,start:m,end:this.index}}scanTemplate(){let m="",k=!1;const g=this.index,p="`"===this.source[g];let F=!1,l=2;for(++this.index;!this.eof();){var D=this.source[this.index++];if("`"===D){l=1;k=F=!0;break}if("$"===D){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;k=!0;break}m+=D}else if("\\"===D)if(D=this.source[this.index++],C.Character.isLineTerminator(D.charCodeAt(0)))++this.lineNumber,"\r"===D&&"\n"===this.source[this.index]&&++this.index,this.lineStart=
this.index;else switch(D){case "n":m+="\n";break;case "r":m+="\r";break;case "t":m+="\t";break;case "u":if("{"===this.source[this.index])++this.index,m+=this.scanUnicodeCodePointEscape();else{const z=this.index,d=this.scanHexEscape(D);null!==d?m+=d:(this.index=z,m+=D)}break;case "x":D=this.scanHexEscape(D);null===D&&this.throwUnexpectedToken(b.ParsingErrorCodes.InvalidHexEscapeSequence);m+=D;break;case "b":m+="\b";break;case "f":m+="\f";break;case "v":m+="\v";break;default:"0"===D?(C.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&
this.throwUnexpectedToken(b.ParsingErrorCodes.TemplateOctalLiteral),m+="\x00"):C.Character.isOctalDigit(D.charCodeAt(0))?this.throwUnexpectedToken(b.ParsingErrorCodes.TemplateOctalLiteral):m+=D}else C.Character.isLineTerminator(D.charCodeAt(0))?(++this.lineNumber,"\r"===D&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,m+="\n"):m+=D}k||this.throwUnexpectedToken();p||this.curlyStack.pop();return{type:b.TokenType.Template,value:this.source.slice(g+1,this.index-l),cooked:m,head:p,
tail:F,lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}}lex(){if(this.eof())return{type:b.TokenType.EOF,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};const m=this.source.charCodeAt(this.index);return C.Character.isIdentifierStart(m)?this.scanIdentifier():40===m||41===m||59===m?this.scanPunctuator():39===m||34===m?this.scanStringLiteral():46===m?C.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():
this.scanPunctuator():C.Character.isDecimalDigit(m)?this.scanNumericLiteral():96===m||125===m&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():55296<=m&&57343>m&&C.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()}}u.Scanner=c;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/assert":function(){define(["exports"],function(u){u.assert=function(M,C){if(!M)throw Error("ASSERT: "+C);};Object.defineProperty(u,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/character":function(){define(["exports"],function(u){var M=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
C=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
const b={fromCodePoint(a){return 65536>a?String.fromCharCode(a):String.fromCharCode(55296+(a-65536>>10))+String.fromCharCode(56320+(a-65536&1023))},isWhiteSpace(a){return 32===a||9===a||11===a||12===a||160===a||5760<=a&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(a)},isLineTerminator(a){return 10===a||13===a||8232===a||8233===a},isIdentifierStart(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&M.test(b.fromCodePoint(a))},isIdentifierPart(a){return 36===
a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||128<=a&&C.test(b.fromCodePoint(a))},isDecimalDigit(a){return 48<=a&&57>=a},isHexDigit(a){return 48<=a&&57>=a||65<=a&&70>=a||97<=a&&102>=a},isOctalDigit(a){return 48<=a&&55>=a}};u.Character=b;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/tokenizer":function(){define(["exports","./error-handler","./scanner","./types"],function(u,M,C,b){class a{constructor(c,m){this.errorHandler=new M.ErrorHandler;this.errorHandler.tolerant=
m?"boolean"===typeof m.tolerant&&m.tolerant:!1;this.scanner=new C.Scanner(c,this.errorHandler);this.trackComments=m?"boolean"===typeof m.comment&&m.comment:!1;this.buffer=[]}errors(){return this.errorHandler.errors}getNextToken(){if(0===this.buffer.length){var c=this.scanner.scanComments();this.trackComments&&c&&c.forEach(m=>{const k=this.scanner.source.slice(m.start,m.end);this.buffer.push({type:m.multiLine?b.Syntax.BlockComment:b.Syntax.LineComment,value:k,range:m.range,loc:m.loc})});if(!this.scanner.eof()){c=
{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};const m=this.scanner.lex(),k={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};c={type:b.rokenNames[m.type],value:this.scanner.source.slice(m.start,m.end),range:[m.start,m.end],loc:{start:c,end:k}};this.buffer.push(c)}}return this.buffer.shift()}}u.Tokenizer=a;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/RecentlyUsedCache":function(){define(function(){class u{constructor(b){const a=
this;a._keys=[];a._values=[];a.length=0;b&&b.forEach(c=>{a.set(c[0],c[1])})}entries(){return[].slice.call(this.keys().map((b,a)=>[b,this._values[a]]))}keys(){return[].slice.call(this._keys)}values(){return[].slice.call(this._values)}has(b){return this._keys.includes(b)}get(b){b=this._keys.indexOf(b);return-1<b?this._values[b]:null}deepGet(b){if(!b?.length)return null;const a=(c,m)=>null==c?null:m.length?a(c instanceof u?c.get(m[0]):c[m[0]],m.slice(1)):c;return a(this.get(b[0]),b.slice(1))}set(b,a){const c=
this._keys.indexOf(b);-1<c?this._values[c]=a:(this._keys.push(b),this._values.push(a),this.length=this._values.length);return this}sortedSet(b,a,c,m){var k=this._keys.length;c=c||0;m=void 0!==m?m:k-1;if(0===k)return this._keys.push(b),this._values.push(a),this;if(b===this._keys[c])return this._values.splice(c,0,a),this;if(b===this._keys[m])return this._values.splice(m,0,a),this;if(b>this._keys[m])return this._keys.splice(m+1,0,b),this._values.splice(m+1,0,a),this;if(b<this._keys[c])return this._values.splice(c,
0,a),this._keys.splice(c,0,b),this;if(c>=m)return this;k=c+Math.floor((m-c)/2);return b<this._keys[k]?this.sortedSet(b,a,c,k-1):b>this._keys[k]?this.sortedSet(b,a,k+1,m):this}size(){return this.length}clear(){this._keys.length=this.length=this._values.length=0;return this}delete(b){b=this._keys.indexOf(b);return-1<b?(this._keys.splice(b,1),this._values.splice(b,1),this.length=this._keys.length,!0):!1}forEach(b){this._keys.forEach((a,c)=>{b(this._values[c],a,c)})}map(b){return this.keys().map((a,c)=>
b(this._values[c],a,c))}filter(b){const a=this;a._keys.forEach((c,m)=>{!1===b(a._values[m],c,m)&&a.delete(c)});return this}clone(){return new u(this.entries())}}class M{constructor(b=20){this._maxEntries=b;this._values=new u}delete(b){this._values.has(b)&&this._values.delete(b)}get(b){let a=null;this._values.has(b)&&(a=this._values.get(b),this._values.delete(b),this._values.set(b,a));return a}put(b,a){if(this._values.size()>=this._maxEntries){const c=this._values.keys()[0];this._values.delete(c)}this._values.set(b,
a)}}class C{constructor(b=20){this._maxEntries=b;this._cache=new M(this._maxEntries)}clear(){this._cache=new M(this._maxEntries)}addToCache(b,a){this._cache.put(b,a)}removeFromCache(b){this._cache.delete(b)}getFromCache(b){return this._cache.get(b)}}return C})},"esri/arcade/arcadeRuntime":function(){define("exports ./ArcadeModule ./ArcadeModuleLoader ./Dictionary ./executionError ./Feature ./FunctionWrapper ../chunks/languageUtils ./treeAnalysis ../chunks/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Geometry ../geometry/SpatialReference".split(" "),
function(u,M,C,b,a,c,m,k,g,p,F,l,D,z,d,f,A,r){function w(J,I){const N=[];for(let H=0;H<I.arguments.length;H++)N.push(E(J,I.arguments[H]));return N}function e(J,I,N){try{return!0===I.preparsed?N(J,null,I.arguments):N(J,I,w(J,I))}catch(H){throw H;}}function E(J,I){try{switch(I?.type){case "EmptyStatement":return k.voidOperation;case "VariableDeclarator":let ua=null===I.init?null:E(J,I.init);ua===k.voidOperation&&(ua=null);if("Identifier"!==I.id.type)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidIdentifier,
I);const Ba=I.id.name.toLowerCase();null!=J.localScope?J.localScope[Ba]={value:ua,valueset:!0,node:I.init}:J.globalScope[Ba]={value:ua,valueset:!0,node:I.init};return k.voidOperation;case "VariableDeclaration":for(var N=0;N<I.declarations.length;N++)E(J,I.declarations[N]);return k.voidOperation;case "ImportDeclaration":const va=I.specifiers[0].local.name.toLowerCase(),ra=J.libraryResolver.loadLibrary(va);N=null;J.libraryResolver._moduleSingletons?.has(ra.uri)?N=J.libraryResolver._moduleSingletons.get(ra.uri):
(N=new wa(ra),N.loadModule(J),J.libraryResolver._moduleSingletons?.set(ra.uri,N));J.globalScope[va]={value:N,valueset:!0,node:I};return k.voidOperation;case "ExportNamedDeclaration":E(J,I.declaration);if("FunctionDeclaration"===I.declaration.type)J.exports[I.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===I.declaration.type)for(const X of I.declaration.declarations)J.exports[X.id.name.toLowerCase()]="variable";return k.voidOperation;case "BlockStatement":case "Program":a:{let X=
k.voidOperation;for(N=0;N<I.body.length;N++)if(X=E(J,I.body[N]),X instanceof k.returnResult||X===k.breakResult||X===k.continueResult){var H=X;break a}H=X}return H;case "FunctionDeclaration":const Ia=I.id.name.toLowerCase();J.globalScope[Ia]={valueset:!0,node:null,value:new ka(I,J)};return k.voidOperation;case "ReturnStatement":if(null===I.argument)var P=new k.returnResult(k.voidOperation);else{var R=E(J,I.argument);P=new k.returnResult(R)}return P;case "IfStatement":{const X=E(J,I.test);if(!0===X)var T=
E(J,I.consequent);else if(!1===X)T=null!==I.alternate?E(J,I.alternate):k.voidOperation;else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.BooleanConditionRequired,I);}return T;case "ExpressionStatement":if("AssignmentExpression"===I.expression.type||"UpdateExpression"===I.expression.type)var ha=E(J,I.expression);else if("CallExpression"===I.expression.type){const X=E(J,I.expression);ha=X===k.voidOperation?k.voidOperation:new k.implicitResult(X)}else{var pa=E(J,I.expression);ha=pa===k.voidOperation?
k.voidOperation:new k.implicitResult(pa)}return ha;case "AssignmentExpression":N=null;var h="";if("MemberExpression"===I.left.type){N=E(J,I.left.object);if(!0===I.left.computed)h=E(J,I.left.property);else if("Identifier"===I.left.property.type)h=I.left.property.name;else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidIdentifier,I);const X=E(J,I.right);if(k.isArray(N))if(k.isNumber(h)){0>h&&(h=N.length+h);if(0>h||h>N.length)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.OutOfBounds,
I);if(h===N.length&&"\x3d"!==I.operator)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.OutOfBounds,I);N[h]=t(X,I.operator,N[h],I,J)}else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.ArrayAccessorMustBeNumber,I);else if(N instanceof b){if(!1===k.isString(h))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.KeyAccessorMustBeString,I);if(!0===N.hasField(h))N.setField(h,t(X,I.operator,N.field(h),I,J));else{if("\x3d"!==I.operator)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.FieldNotFound,
I,{key:h});N.setField(h,t(X,I.operator,null,I,J))}}else if(k.isFeature(N)){if(!1===k.isString(h))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.KeyAccessorMustBeString,I);if(!0===N.hasField(h))N.setField(h,t(X,I.operator,N.field(h),I,J));else{if("\x3d"!==I.operator)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.FieldNotFound,I,{key:h});N.setField(h,t(X,I.operator,null,I,J))}}else{if(k.isImmutableArray(N))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.Immutable,I);if(N instanceof
wa){if(!1===k.isString(h))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.ModuleAccessorMustBeString,I);if(!0===N.hasGlobal(h))N.setGlobal(h,t(X,I.operator,N.global(h),I,J));else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.ModuleExportNotFound,I);}else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidIdentifier,I);}var x=k.voidOperation}else{N=I.left.name.toLowerCase();var K=E(J,I.right);if(null!=J.localScope&&void 0!==J.localScope[N])J.localScope[N]={value:t(K,
I.operator,J.localScope[N].value,I,J),valueset:!0,node:I.right},x=k.voidOperation;else if(void 0!==J.globalScope[N])J.globalScope[N]={value:t(K,I.operator,J.globalScope[N].value,I,J),valueset:!0,node:I.right},x=k.voidOperation;else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidIdentifier,I);}return x;case "UpdateExpression":{let X;N=null;h="";if("MemberExpression"===I.argument.type){N=E(J,I.argument.object);!0===I.argument.computed?h=E(J,I.argument.property):"Identifier"===I.argument.property.type&&
(h=I.argument.property.name);if(k.isArray(N))if(k.isNumber(h)){0>h&&(h=N.length+h);if(0>h||h>=N.length)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.OutOfBounds,I);X=k.toNumber(N[h]);N[h]="++"===I.operator?X+1:X-1}else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.ArrayAccessorMustBeNumber,I);else if(N instanceof b){if(!1===k.isString(h))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.KeyAccessorMustBeString,I);if(!0===N.hasField(h))X=k.toNumber(N.field(h)),N.setField(h,
"++"===I.operator?X+1:X-1);else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.FieldNotFound,I);}else if(k.isFeature(N)){if(!1===k.isString(h))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.KeyAccessorMustBeString,I);if(!0===N.hasField(h))X=k.toNumber(N.field(h)),N.setField(h,"++"===I.operator?X+1:X-1);else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.FieldNotFound,I);}else{if(k.isImmutableArray(N))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.Immutable,
I);if(N instanceof wa){if(!1===k.isString(h))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.ModuleAccessorMustBeString,I);if(!0===N.hasGlobal(h))X=k.toNumber(N.global(h)),N.setGlobal(h,"++"===I.operator?X+1:X-1);else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.ModuleExportNotFound,I);}else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidParameter,I);}var O=!1===I.prefix?X:"++"===I.operator?X+1:X-1}else{N="Identifier"===I.argument.type?I.argument.name.toLowerCase():
"";if(!N)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidIdentifier,I);if(null!=J.localScope&&void 0!==J.localScope[N])X=k.toNumber(J.localScope[N].value),J.localScope[N]={value:"++"===I.operator?X+1:X-1,valueset:!0,node:I},O=!1===I.prefix?X:"++"===I.operator?X+1:X-1;else if(void 0!==J.globalScope[N])X=k.toNumber(J.globalScope[N].value),J.globalScope[N]={value:"++"===I.operator?X+1:X-1,valueset:!0,node:I},O=!1===I.prefix?X:"++"===I.operator?X+1:X-1;else throw new a.ArcadeExecutionError(J,
a.ExecutionErrorCodes.InvalidIdentifier,I);}}return O;case "BreakStatement":return k.breakResult;case "ContinueStatement":return k.continueResult;case "TemplateElement":return I.value?I.value.cooked:"";case "TemplateLiteral":K="";O=0;for(const X of I.quasis)if(K+=X.value?X.value.cooked:"",!1===X.tail){if(I.expressions[O]){var S=k;h=S.toString;var fa=E(J,I.expressions[O]),ea=J;x=I;if(k.isFunctionParameter(fa))throw new a.ArcadeExecutionError(ea,a.ExecutionErrorCodes.NoFunctionInTemplateLiteral,x);
N=h.call(S,fa)}else N="";K+=N;O++}return K;case "ForStatement":null!==I.init&&E(J,I.init);ea={testResult:!0,lastAction:k.voidOperation};do b:{N=J;h=I;fa=ea;if(null!==h.test){fa.testResult=E(N,h.test);if(!1===fa.testResult)break b;if(!0!==fa.testResult)throw new a.ArcadeExecutionError(N,a.ExecutionErrorCodes.BooleanConditionRequired,h);}fa.lastAction=E(N,h.body);fa.lastAction===k.breakResult?fa.testResult=!1:fa.lastAction instanceof k.returnResult?fa.testResult=!1:null!==h.update&&E(N,h.update)}while(!0===
ea.testResult);S=ea.lastAction instanceof k.returnResult?ea.lastAction:k.voidOperation;return S;case "ForInStatement":return B(J,I);case "WhileStatement":N=!0;var V=k.voidOperation;N=E(J,I.test);if(!1===N)var ja=k.voidOperation;else{if(!0!==N)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.BooleanConditionRequired,I);for(;!0===N;){V=E(J,I.body);if(V===k.breakResult)break;if(V instanceof k.returnResult)break;N=E(J,I.test);if(!0!==N&&!1!==N)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.BooleanConditionRequired,
I);}ja=V instanceof k.returnResult?V:k.voidOperation}return ja;case "Identifier":return W(J,I);case "MemberExpression":return v(J,I);case "Literal":return I.value;case "CallExpression":a:try{if("MemberExpression"===I.callee.type){const X=E(J,I.callee.object);if(!(X instanceof wa))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.FunctionNotFound,I);const na=!1===I.callee.computed?I.callee.property.name:E(J,I.callee.property);if(!X.hasGlobal(na))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.FunctionNotFound,
I);const ta=X.global(na);if(!k.isFunctionParameter(ta))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.CallNonFunction,I);var Y=ta.call(J,I)}else{if("Identifier"!==I.callee.type)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.FunctionNotFound,I);if(null!=J.localScope&&void 0!==J.localScope[I.callee.name.toLowerCase()]){const X=J.localScope[I.callee.name.toLowerCase()];if(k.isFunctionParameter(X.value)){Y=X.value.call(J,I);break a}throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.CallNonFunction,
I);}if(void 0!==J.globalScope[I.callee.name.toLowerCase()]){const X=J.globalScope[I.callee.name.toLowerCase()];if(k.isFunctionParameter(X.value)){Y=X.value.call(J,I);break a}throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.CallNonFunction,I);}throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.FunctionNotFound,I);}}catch(X){throw X;}return Y;case "UnaryExpression":return G(J,I);case "BinaryExpression":return n(J,I);case "LogicalExpression":return q(J,I);case "ArrayExpression":try{N=[];
for(h=0;h<I.elements.length;h++){const X=E(J,I.elements[h]);if(k.isFunctionParameter(X))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.NoFunctionInArray,I);X===k.voidOperation?N.push(null):N.push(X)}var ba=N}catch(X){throw X;}return ba;case "ObjectExpression":N={};const Ha=new Map;for(h=0;h<I.properties.length;h++){const X=E(J,I.properties[h]);if(k.isFunctionParameter(X.value))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.NoFunctionInDictionary,I);if(!1===k.isString(X.key))throw new a.ArcadeExecutionError(J,
a.ExecutionErrorCodes.KeyMustBeString,I);let na=X.key.toString();const ta=na.toLowerCase();Ha.has(ta)?na=Ha.get(ta):Ha.set(ta,na);N[na]=X.value===k.voidOperation?null:X.value}const Aa=new b(N);Aa.immutable=!1;return Aa;case "Property":return{key:"Identifier"===I.key.type?I.key.name:E(J,I.key),value:E(J,I.value)};default:throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.Unrecognized,I);}}catch(ua){throw a.ensureArcadeExecutionError(J,I,ua);}}function B(J,I){var N=E(J,I.right);"VariableDeclaration"===
I.left.type&&E(J,I.left);let H=null;var P="";if("VariableDeclaration"===I.left.type){var R=I.left.declarations[0].id;"Identifier"===R.type&&(P=R.name)}else"Identifier"===I.left.type&&(P=I.left.name);if(!P)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidIdentifier,I);P=P.toLowerCase();null!=J.localScope&&void 0!==J.localScope[P]&&(H=J.localScope[P]);null===H&&void 0!==J.globalScope[P]&&(H=J.globalScope[P]);if(null===H)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidIdentifier,
I);if(k.isArray(N)||k.isString(N)){N=N.length;for(P=0;P<N;P++){H.value=P;R=E(J,I.body);if(R===k.breakResult)break;if(R instanceof k.returnResult)return R}return k.voidOperation}if(k.isImmutableArray(N)){for(P=0;P<N.length();P++){H.value=P;R=E(J,I.body);if(R===k.breakResult)break;if(R instanceof k.returnResult)return R}return k.voidOperation}if(N instanceof b||k.isFeature(N))for(N=N.keys(),P=0;P<N.length;P++){H.value=N[P];R=E(J,I.body);if(R===k.breakResult)break;if(R instanceof k.returnResult)return R}else return k.voidOperation}
function t(J,I,N,H,P){switch(I){case "\x3d":return J===k.voidOperation?null:J;case "/\x3d":return k.toNumber(N)/k.toNumber(J);case "*\x3d":return k.toNumber(N)*k.toNumber(J);case "-\x3d":return k.toNumber(N)-k.toNumber(J);case "+\x3d":return k.isString(N)||k.isString(J)?k.toString(N)+k.toString(J):k.toNumber(N)+k.toNumber(J);case "%\x3d":return k.toNumber(N)%k.toNumber(J);default:throw new a.ArcadeExecutionError(P,a.ExecutionErrorCodes.UnsupportedOperator,H);}}function v(J,I){try{const N=E(J,I.object);
if(null===N)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.MemberOfNull,I);if(!1===I.computed){if("Identifier"===I.property.type){if(N instanceof b||k.isFeature(N))return N.field(I.property.name);if(N instanceof A)return l.geometryMember(N,I.property.name,I,J);if(N instanceof wa){if(!N.hasGlobal(I.property.name))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidIdentifier,I);return N.global(I.property.name)}}throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidMemberAccessKey,
I);}let H=E(J,I.property);if(N instanceof b||k.isFeature(N)){if(k.isString(H))return N.field(H);throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidMemberAccessKey,I);}if(N instanceof wa){if(k.isString(H))return N.global(H);throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidMemberAccessKey,I);}if(N instanceof A){if(k.isString(H))return l.geometryMember(N,H,I,J);throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidMemberAccessKey,I);}if(k.isArray(N)){if(k.isNumber(H)&&
isFinite(H)&&Math.floor(H)===H){0>H&&(H=N.length+H);if(H>=N.length||0>H)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.OutOfBounds,I);return N[H]}throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidMemberAccessKey,I);}if(k.isString(N)){if(k.isNumber(H)&&isFinite(H)&&Math.floor(H)===H){0>H&&(H=N.length+H);if(H>=N.length||0>H)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.OutOfBounds,I);return N[H]}throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidMemberAccessKey,
I);}if(k.isImmutableArray(N)&&k.isNumber(H)&&isFinite(H)&&Math.floor(H)===H){0>H&&(H=N.length()+H);if(H>=N.length()||0>H)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.OutOfBounds,I);return N.get(H)}throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidMemberAccessKey,I);}catch(N){throw N;}}function G(J,I){try{const N=E(J,I.argument);if(k.isBoolean(N)){if("!"===I.operator)return!N;if("-"===I.operator)return-1*k.toNumber(N);if("+"===I.operator)return 1*k.toNumber(N);if("~"===I.operator)return~k.toNumber(N);
throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.UnsupportedUnaryOperator,I);}if("~"===I.operator)return~k.toNumber(N);if("-"===I.operator)return-1*k.toNumber(N);if("+"===I.operator)return 1*k.toNumber(N);throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.UnsupportedUnaryOperator,I);}catch(N){throw N;}}function n(J,I){try{const N=[E(J,I.left),E(J,I.right)],H=N[0],P=N[1];switch(I.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return k.binaryOperator(k.toNumber(H),
k.toNumber(P),I.operator);case "\x3d\x3d":return k.equalityTest(H,P);case "!\x3d":return!k.equalityTest(H,P);case "\x3c":return k.greaterThanLessThan(H,P,I.operator);case "\x3e":return k.greaterThanLessThan(H,P,I.operator);case "\x3c\x3d":return k.greaterThanLessThan(H,P,I.operator);case "\x3e\x3d":return k.greaterThanLessThan(H,P,I.operator);case "+":return k.isString(H)||k.isString(P)?k.toString(H)+k.toString(P):k.toNumber(H)+k.toNumber(P);case "-":return k.toNumber(H)-k.toNumber(P);case "*":return k.toNumber(H)*
k.toNumber(P);case "/":return k.toNumber(H)/k.toNumber(P);case "%":return k.toNumber(H)%k.toNumber(P);default:throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.UnsupportedOperator,I);}}catch(N){throw N;}}function q(J,I){try{const N=E(J,I.left);if(k.isBoolean(N))switch(I.operator){case "||":if(!0===N)return N;const H=E(J,I.right);if(k.isBoolean(H))return H;throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.LogicExpressionOrAnd,I);case "\x26\x26":if(!1===N)return N;const P=E(J,I.right);
if(k.isBoolean(P))return P;throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.LogicExpressionOrAnd,I);default:throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.LogicExpressionOrAnd,I);}throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,I);}catch(N){throw N;}}function W(J,I){let N;try{const H=I.name.toLowerCase();if(null!=J.localScope&&void 0!==J.localScope[H]){N=J.localScope[H];if(!0===N.valueset)return N.value;N.value=E(J,N.node);N.valueset=!0;return N.value}if(void 0!==
J.globalScope[H]){N=J.globalScope[H];if(!0===N.valueset)return N.value;N.value=E(J,N.node);N.valueset=!0;return N.value}throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidIdentifier,I);}catch(H){throw H;}}function ca(J,I,N,H){try{const P=I.arguments,R=E(J,P[N]);if(k.equalityTest(R,H))return E(J,P[N+1]);const T=P.length-N;return 1===T?E(J,P[N]):2===T?null:3===T?E(J,P[N+2]):ca(J,I,N+2,H)}catch(P){throw P;}}function qa(J,I,N,H){try{const P=I.arguments;if(!0===H)return E(J,P[N+1]);if(3===
P.length-N)return E(J,P[N+2]);const R=E(J,P[N+2]);if(!1===k.isBoolean(R))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.BooleanConditionRequired,P[N+2]);return qa(J,I,N+2,R)}catch(P){throw P;}}function ya(J,I,N,H){try{const P=J.body;if(N.length!==J.params.length)throw new a.ArcadeExecutionError(I,a.ExecutionErrorCodes.WrongNumberOfParameters,H);if(null!=I.localScope)for(let T=0;T<N.length;T++)I.localScope[J.params[T].name.toLowerCase()]={value:N[T],valueset:!0,node:null};const R=E(I,P);
if(R instanceof k.returnResult)return R.value;if(R===k.breakResult)throw new a.ArcadeExecutionError(I,a.ExecutionErrorCodes.UnexpectedToken,H);if(R===k.continueResult)throw new a.ArcadeExecutionError(I,a.ExecutionErrorCodes.UnexpectedToken,H);return R instanceof k.implicitResult?R.value:R}catch(P){throw P;}}function oa(J,I,N){const H=new xa;J||={};I||={};const P=new b({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});P.immutable=!1;H.textformatting={value:P,
valueset:!0,node:null};for(const R in I)H[R]={value:new m.NativeFunction(I[R]),native:!0,valueset:!0,node:null};for(const R in J)H[R]=J[R]&&"esri.Graphic"===J[R].declaredClass?{value:c.createFromGraphic(J[R],N),valueset:!0,node:null}:{value:J[R],valueset:!0,node:null};return H}function da(J){console.log(J)}function U(J){const I={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:e,evaluateIdentifier:W};for(let N=0;N<J.length;N++)J[N].registerFunctions(I);for(const N in I.functions)la[N]=
{value:new m.NativeFunction(I.functions[N]),valueset:!0,node:null},xa.prototype[N]=la[N];for(J=0;J<I.signatures.length;J++)g.addFunctionDeclaration(I.signatures[J],"sync")}class ka extends m.ArcadeFunction{constructor(J,I){super();this.context=this.definition=null;this.definition=J;this.context=I}createFunction(J){return(...I)=>{const N={spatialReference:this.context.spatialReference,console:this.context.console,services:this.context.services,timeZone:this.context.timeZone??null,lrucache:this.context.lrucache,
exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:J.depthCounter.depth+1},globalScope:this.context.globalScope};if(64<N.depthCounter.depth)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.MaximumCallDepth,null);return ya(this.definition,N,I,null)}}call(J,I){return e(J,I,(N,H,P)=>{N={spatialReference:J.spatialReference,services:J.services,globalScope:J.globalScope,depthCounter:{depth:J.depthCounter.depth+
1},libraryResolver:J.libraryResolver,exports:J.exports,timeZone:J.timeZone??null,console:J.console,lrucache:J.lrucache,interceptor:J.interceptor,localScope:{}};if(64<N.depthCounter.depth)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.MaximumCallDepth,I);return ya(this.definition,N,P,I)})}marshalledCall(J,I,N,H){return H(J,I,(P,R,T)=>{P={spatialReference:J.spatialReference,globalScope:N.globalScope,services:J.services,depthCounter:{depth:J.depthCounter.depth+1},libraryResolver:J.libraryResolver,
exports:J.exports,console:J.console,timeZone:J.timeZone??null,lrucache:J.lrucache,interceptor:J.interceptor,localScope:{}};T=T.map(ha=>!k.isFunctionParameter(ha)||ha instanceof m.ScopeMarshalledFunction?ha:m.wrapModuleScopedResponse(ha,J,H));return m.wrapModuleScopedResponse(ya(this.definition,P,T,I),N,H)})}}class wa extends M.ArcadeModule{constructor(J){super(J)}global(J){J=this.executingContext.globalScope[J.toLowerCase()];J.valueset||(J.value=E(this.executingContext,J.node),J.valueset=!0);if(k.isFunctionParameter(J.value)&&
!(J.value instanceof m.ScopeMarshalledFunction)){const I=new m.ScopeMarshalledFunction;I.fn=J.value;I.parameterEvaluator=e;I.context=this.executingContext;J.value=I}return J.value}setGlobal(J,I){if(k.isFunctionParameter(I))throw new a.ArcadeExecutionError(null,a.ExecutionErrorCodes.AssignModuleFunction,null);this.executingContext.globalScope[J.toLowerCase()]={value:I,valueset:!0,node:null}}hasGlobal(J){void 0===this.executingContext.exports[J]&&(J=J.toLowerCase());return void 0!==this.executingContext.exports[J]?
!0:!1}loadModule(J){let I=J.spatialReference;if(null===I||void 0===I)I=new r({wkid:102100});this.moduleScope=oa({},J.customfunctions,J.timeZone);this.executingContext={spatialReference:I,globalScope:this.moduleScope,localScope:null,libraryResolver:new C.ArcadeModuleLoader(J.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},services:J.services,console:J.console??da,timeZone:J.timeZone??null,lrucache:J.lrucache,interceptor:J.interceptor,depthCounter:{depth:1}};E(this.executingContext,
this.source.syntax)}}const la={};F.registerFunctions(la,e);f.registerFunctions(la,e);z.registerFunctions(la,e);l.registerFunctions(la,e);d.registerFunctions(la,e);D.registerFunctions(la,e);la.iif=function(J,I){try{const N=I.arguments;k.pcCheck(null===N?[]:N,3,3,J,I);const H=E(J,N[0]);if(!1===k.isBoolean(H))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.BooleanConditionRequired,I);return!0===H?E(J,N[1]):E(J,N[2])}catch(N){throw N;}};la.defaultvalue=function(J,I){try{const N=I.arguments;k.pcCheck(null===
N?[]:N,2,3,J,I);const H=E(J,N[0]);if(3===N.length){const P=E(J,N[1]);let R=[];if(k.isImmutableArray(P))R=P.toArray();else if(k.isArray(P))R=P;else throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.InvalidParameter,I);I=H;if(null===I)return E(J,N[2]);for(const T of R)if(k.isFeature(I)){if(!1===k.isString(T)||!I.hasField(T))return E(J,N[2]);I=I.field(T)}else if(I instanceof b){if(!1===k.isString(T)||!I.hasField(T))return E(J,N[2]);I=I.field(T)}else if(I instanceof A){if(!1===k.isString(T))return E(J,
N[2]);I=l.geometryMember(I,T,null,null,2);if(null===I||"notfound"===I?.keystate)return E(J,N[2])}else if(k.isArray(I)){if(!1===k.isNumber(T))return E(J,N[2]);I=I[T];if(null===I||void 0===I)return E(J,N[2])}else if(k.isImmutableArray(I)){if(!1===k.isNumber(T))return E(J,N[2]);I=I.get(T);if(null===I||void 0===I)return E(J,N[2])}else return E(J,N[2]);return I}return null===H||""===H||void 0===H?E(J,N[1]):H}catch(N){throw N;}};la.decode=function(J,I){try{const N=I.arguments;if(2>N.length)throw new a.ArcadeExecutionError(J,
a.ExecutionErrorCodes.WrongNumberOfParameters,I);if(2===N.length)return E(J,N[1]);if(0===(N.length-1)%2)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.WrongNumberOfParameters,I);const H=E(J,N[0]);return ca(J,I,1,H)}catch(N){throw N;}};la.when=function(J,I){try{const N=I.arguments;if(3>N.length)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.WrongNumberOfParameters,I);if(0===N.length%2)throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.WrongNumberOfParameters,I);const H=E(J,
N[0]);if(!1===k.isBoolean(H))throw new a.ArcadeExecutionError(J,a.ExecutionErrorCodes.BooleanConditionRequired,N[0]);return qa(J,I,0,H)}catch(N){throw N;}};for(const J in la)la[J]={value:new m.NativeFunction(la[J]),valueset:!0,node:null};const xa=function(){};xa.prototype=la;xa.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};xa.prototype.pi={value:Math.PI,valueset:!0,node:null};M={fixSpatialReference:k.fixSpatialReference,parseArguments:w,standardFunction:e};U([p.ArrayFunctions]);
u.executeScript=function(J,I){let N=I.spatialReference;if(null===N||void 0===N)N=new r({wkid:102100});let H=null;J.usesModules&&(H=new C.ArcadeModuleLoader(new Map,J.loadedModules));const P=oa(I.vars,I.customfunctions,I.timeZone);I={spatialReference:N,globalScope:P,localScope:null,services:I.services??null,exports:{},libraryResolver:H,console:I.console??da,timeZone:I.timeZone??null,lrucache:I.lrucache,interceptor:I.interceptor,depthCounter:{depth:1}};J=E(I,J);J instanceof k.returnResult&&(J=J.value);
J instanceof k.implicitResult&&(J=J.value);J===k.voidOperation&&(J=null);if(J===k.breakResult)throw new a.ArcadeExecutionError(I,a.ExecutionErrorCodes.IllegalResult,null);if(J===k.continueResult)throw new a.ArcadeExecutionError(I,a.ExecutionErrorCodes.IllegalResult,null);if(k.isFunctionParameter(J))throw new a.ArcadeExecutionError(I,a.ExecutionErrorCodes.IllegalResult,null);return J};u.extend=U;u.functionHelper=M;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("exports ../geometry ../chunks/arcade ../arcade/Dictionary ../arcade/Feature ../chunks/languageUtils ../core/lang ../core/sql/DateOnly ../core/sql/TimeOnly ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/Multipoint ../geometry/Extent".split(" "),function(u,M,C,b,a,c,m,k,g,p,F,l,D,z){function d(t){return t.replaceAll(/[|\\{}()[\]^$+*?.]/g,"\\$\x26")}function f(t){if(!t)return null;try{return C.parseScript(t)}catch(v){}return null}function A(t,v){if(!t)return!1;if("string"===
typeof t)return v(t);if("simple"===t.type||"class-breaks"===t.type||"unique-value"===t.type||"dot-density"===t.type||"dictionary"===t.type||"pie-chart"===t.type){if("dot-density"===t.type){var G=t.attributes?.some(n=>v(n.valueExpression));if(G)return G}G=t.visualVariables;G=!!G&&G.some(n=>{let q=v(n.valueExpression);"size"===n.type&&(e(n.minSize)&&(q=q||v(n.minSize.valueExpression)),e(n.maxSize)&&(q=q||v(n.maxSize.valueExpression)));return q});return"valueExpression"in t&&v(t.valueExpression)?!0:
G}return"esri.layers.support.LabelClass"===t.declaredClass?(t=t.labelExpressionInfo?.expression,!(!t||!v(t))||!1):"esri.PopupTemplate"===t.declaredClass?!!t.expressionInfos&&t.expressionInfos.some(n=>v(n.expression))||Array.isArray(t.content)&&t.content.some(n=>"expression"===n.type&&v(n.expressionInfo?.expression)):!1}function r(t){t=f(t);return!!t&&C.scriptTouchesGeometry(t)}function w(t){t=f(t);return!!t&&C.scriptUsesGeometryEngine(t)}function e(t){return t&&"esri.renderers.visualVariables.SizeVariable"===
t.declaredClass}const E=/^\$(feature|aggregatedFeatures)\./i,B={vars:{$feature:"any",$view:"any"},spatialReference:null};u.arcade=C.arcade;u.Dictionary=b;u.arcadeFeature=a;u.convertFeatureLayerToFeatureSet=function({layer:t,spatialReference:v,outFields:G,returnGeometry:n,lrucache:q,interceptor:W}){if(null===t)return null;const ca=C.featureSetUtils();return ca?ca.constructFeatureSet(t,v,G,n??!0,q,W):null};u.convertJsonToArcade=function(t,v){return b.convertJsonToArcade(t,v)};u.convertMapToFeatureSetCollection=
function(t){if(null===t?.map)return null;const v=C.featureSetUtils();return v?v.createFeatureSetCollectionFromMap(t.map,t.spatialReference,t.lrucache,t.interceptor):null};u.convertServiceUrlToWorkspace=function({url:t,spatialReference:v,lrucache:G,interceptor:n}){const q=C.featureSetUtils();return q?q.createFeatureSetCollectionFromService(t,v,G,n):null};u.createExecContext=function(t,v,G){return{vars:{$feature:null==t?new a:a.createFromGraphic(t,G),$view:v?.view},spatialReference:v?.sr,timeZone:G??
null}};u.createFeature=function(t,v,G){return a.createFromGraphicLikeObject(v,t,G,null)};u.createFunction=function(t,v){t="string"===typeof t?f(t):t;if(!t)return null;try{return v=v||m.clone(B),C.compileScript(t,v)}catch(G){}return null};u.createSyntaxTree=f;u.dependsOnView=function(t){return C.referencesMember(t,"$view")};u.enableFeatureSetOperations=function(){return C.enableFeatureSetSupport()};u.enableGeometryOperations=function(){return C.enableGeometrySupport()};u.evalSyntaxTree=function(t,
v){let G;try{G=C.executeScript(t,v)}catch(n){G=null}return G};u.executeAsyncFunction=function(t,v){try{return t?t(v):Promise.resolve(null)}catch(G){return Promise.resolve(null)}};u.executeFunction=function(t,v){let G;try{G=t?t(v):null}catch(n){G=null}return G};u.extractFieldNames=function(t,v){if(!t)return[];t="string"===typeof t?f(t):t;if(!t)return[];let G=[];C.extractExpectedFieldLiterals(t).forEach(q=>{E.test(q)&&(q=q.replace(E,""),G.push(q))});const n=G.filter(q=>q.includes("*"));G=G.filter(q=>
!n.includes(q));v&&n.forEach(q=>{const W=new RegExp(`^${q.split(/\*+/).map(d).join(".*")}$`,"i");v.forEach(ca=>W.test(ca)?G.push(ca):null)});return[...(new Set(G.sort()))]};u.getArcadeType=function(t){return null==t?null:c.isArray(t)||c.isImmutableArray(t)?"array":c.isDate(t)?"date":c.isString(t)?"text":c.isBoolean(t)?"boolean":c.isNumber(t)?"number":t instanceof b?"dictionary":c.isFeature(t)?"feature":t instanceof p?"point":t instanceof F?"polygon":t instanceof l?"polyline":t instanceof D?"multipoint":
t instanceof z?"extent":t instanceof k.DateOnly?"dateOnly":t instanceof g.TimeOnly?"time":c.isFeatureSet(t)?"featureSet":c.isFeatureSetCollection(t)?"featureSetCollection":null};u.getViewInfo=function(t){if(t&&(null!=t.spatialReference||null!=t.scale&&null!=t.viewingMode))return{view:t.viewingMode&&null!=t.scale?new b({viewingMode:t.viewingMode,scale:t.scale}):null,sr:t.spatialReference}};u.hasGeometryFunctions=function(t){return A(t,r)};u.hasGeometryOperations=function(t){return A(t,w)};u.hasVariable=
function(t,v){return t?C.referencesMember(t,v):!1};u.loadScriptDependencies=function(t,v,G=[]){return C.loadScriptDependencies(t,v,G)};u.updateExecContext=function(t,v){null!=t.vars&&(t.vars.$feature=v)};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});